var Sys={};(function(){Sys.openBetMode=false;if(/callbackurl/i.test(window.location.search)&&(/integration=openbet/i.test(window.location.search)||/openbet\.user_id/i.test(window.location.search))){Sys.openBetMode=true}Sys.openBetPlayForFunMode=false;if(/integration=openbet/i.test(window.location.search)&&!Sys.openBetMode){Sys.openBetPlayForFunMode=true}Sys.isGcmEnabled=false;if(/openbet.gcmMode=true/i.test(window.location.search)){Sys.isGcmEnabled=true}Sys.isiPad=false;Sys.isiPhone=false;Sys.isiPhoneIOS7=false;Sys.isiPhoneIOS8=false;Sys.isiPhoneIOS9=false;Sys.isiPod=false;Sys.isAndroidDevice=false;Sys.isSamsungS=false;Sys.isOneX=false;Sys.isHTCOne=false;Sys.isAndroid23Device=false;Sys.isAndroid400=false;Sys.isAndroid410=false;Sys.isAndroidTablet=false;Sys.isAndroid3Tablet=false;Sys.isDesktop=false;Sys.has3DTransforms=false;Sys.useLegacyScaling=false;Sys.isChrome=false;Sys.isChrome280=false;Sys.isSafari=false;Sys.isChromeForIOS=false;(function(){var b=document,a=b.createElement("div"),c=false,d;if(a.style.webkitPerspective!==undefined){d=b.createElement("style");d.textContent="@media (-webkit-transform-3d){#test3d{height:3px}}";b.getElementsByTagName("head")[0].appendChild(d);a.id="test3d";if(b.body){b.body.appendChild(a);c=a.offsetHeight===3;d.parentNode.removeChild(d);a.parentNode.removeChild(a)}}Sys.has3DTransforms=c}());var n=navigator.userAgent;if(n.match(/Chrome/i)){Sys.isChrome=true;if(n.match(/Chrome\/28[\.\d]/i)){Sys.isChrome280=true}}if(n.match(/CriOS/i)){Sys.isChromeForIOS=true}if(n.match(/Safari/i)&&!Sys.isChromeForIOS){Sys.isSafari=true}if(n.match(/iPad/i)!==null){Sys.isiPad=true}else{if((n.match(/iPod/i))){Sys.isiPod=true}else{if((n.match(/iPhone/i))){var i="3gs,4,4s",p="standard";i=(window.screen.height===568)?"5":i;i=(window.screen.height===667)?"6":i;p=window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches&&i==="6"?"zoomed":p;i=window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches?"6+":i;Sys.isiPhone={series:"iPhone",model:i,displayZoom:p}}else{if((n.match(/Android/i))||n.match(/HTC_Sensation/i)){Sys.isAndroidDevice=true;if(n.match(/Android 3[\.\d]+/i)){Sys.isAndroid3Tablet=true;Sys.isAndroidTablet=true}else{if(!n.match(/mobile/i)){Sys.isAndroidTablet=true}else{if(n.match(/Android 2\.3/i)){Sys.isAndroid23Device=true}else{if(n.match(/Android 4\.0/i)){Sys.isAndroid400=true}else{if(n.match(/Android 4\.1/i)){Sys.isAndroid410=true}else{if(n.match(/Android 4\.2/i)){Sys.isAndroid420=true}else{if(n.match(/Android 4\.3/i)){Sys.isAndroid430=true}}}}}}}}else{Sys.isDesktop=true}}}}Sys.isiPhoneIOS7=(n.indexOf("IEMobile")<0)&&(/(?:OS\s*[7]+_0(?:_\d+)?\s*)/i.test(n)&&!window.navigator.standalone)&&(Sys.isiPhone||Sys.isiPod)&&Sys.isSafari;Sys.isiPhoneIOS8=(/OS\s*8_/i.test(n)&&!window.navigator.standalone)&&Sys.isiPhone&&Sys.isSafari;Sys.isiPhoneIOS9=(/OS\s*9_/i.test(n)&&!window.navigator.standalone)&&Sys.isiPhone&&Sys.isSafari;Sys.isiOS9=(/OS\s*9_/i.test(n));Sys.isIphone4Or4s=Sys.isiPhone&&window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches&&window.screen.width===320&&window.screen.height===480;Sys.isIphone5Or5sOr5c=Sys.isiPhone&&window.screen.width===320&&window.screen.height===568;var m=document.getElementsByTagName("meta"),l=m.length;var k;for(var q=0;q<l;q++){if(m[q].getAttribute("name")==="viewport"){k=m[q]}}if((n.match(/GT-I9100/))){Sys.isSamsungS={series:"samsungS",model:"s2"}}else{if((n.match(/GT-I9300/))){Sys.isSamsungS={series:"samsungS",model:"s3"}}else{if((n.match(/GT-I9505/))||(n.match(/GT-I9506/))||(n.match(/GT-I9521/))||(n.match(/GT-I9525/))){Sys.isSamsungS={series:"samsungS",model:"s4"}}}}if(k){if(Sys.isAndroidDevice&&!Sys.isChrome){Sys.useLegacyScaling=true}else{var o="width=device-width,height = device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no";if(Sys.isSafari){o+=", minimal-ui"}k.content=o}}Sys.isiOSDevice=Sys.isiPad||Sys.isiPhone||Sys.isiPod;Sys.isIphone3GS=(Sys.isiOSDevice&&!window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches&&window.screen.width===320&&window.screen.height===480);Sys.isTouchDevice=!!("ontouchstart" in window);Sys.clickEvent=Sys.isTouchDevice?"touchend":"click";Sys.touchstartEvent=Sys.isTouchDevice?"touchstart":"mousedown";Sys.touchendEvent=Sys.isTouchDevice?"touchend":"mouseup";Sys.touchoutEvent="mouseout";Sys.touchmoveEvent=Sys.isTouchDevice?"touchmove":"mousemove";Sys.isInIFrame=(window!==window.parent)}());Sys.apply=function(d,f){var g;d=d||{};if(f===null||f===undefined){return d}if(d&&f&&Sys.isObj(f)){for(g in f){if(f.hasOwnProperty(g)){d[g]=f[g]}}}return d};Sys.applyProperties=function(j,l){var m=Object.keys(l),k=m.length,h,i;for(h=-1;++h<k;){i=m[h];if(Sys.isDefined(l[i])){j[i]=l[i]}}return j};Sys.applyIf=function(d,f){var g;if(d&&f&&Sys.isObj(f)){for(g in f){if(f.hasOwnProperty(g)&&!d.hasOwnProperty(g)){d[g]=f[g]}}}else{throw"Error in Sys.applyIf"}return d};Sys.applyPropertiesIf=function(j,l){var m=Object.keys(l),k=m.length,h,i;for(h=-1;++h<k;){i=m[h];if(!Sys.isDefined(j[i])&&Sys.isDefined(l[i])){j[i]=l[i]}}return j};Sys.iterate=function(h,g,i){if(!Sys.isObj(h)||typeof g!=="function"){return h}var f;for(f in h){if(h.hasOwnProperty(f)){g.call(i||h,f,h[f])}}return h};Sys.each=function(g,k,i){if(!Sys.isArray(g)||typeof k!=="function"){return g}var j,h;for(j=0,h=g.length;j<h;j+=1){if(k.call(i||g[j],g[j],j)===false){return j}}return g};Sys.contains=function(c,d){return c.indexOf(d)>-1};Sys.variadic=function(c){var d=c.length-1;return function(){var b=[].slice.call(arguments,0,d),a=[].slice.call(arguments,d);return c.apply(this,b.concat([a]))}};Sys.ns=function(g){g=g||"";var f=g.split(".")||[],d=window;while(f.length>0){g=f.shift();if(Sys.isEmpty(d[g])){d[g]={}}d=d[g]}};Sys.pluck=function(f,g){var d=[];Sys.each(f,function(a){d.push(a[g])});return d};Sys.isEmpty=function(b){return(b===null)||(b===undefined)||(Sys.isArray(b)&&!b.length)};Sys.isDefined=function(b){return typeof b!=="undefined"};Sys.defaultValue=function(c,d){return Sys.isEmpty(c)?d:c};Sys.override=function(d,c){if(c){Sys.apply(d.prototype,c)}};Sys.overrideClass=function(f,g){if(Sys.isObj(g)){Sys.apply(f.prototype,g);var i=f.prototype,h=f.superclass;if(Sys.isFunc(g.constructor)){f=g.constructor}f.prototype=i;f.superclass=h}return f};Sys.isArray=function(d){var c=Object.prototype.toString.call(d);return(c==="[object Array]"||c==="[object NodeList]"||c==="[object TouchList]"||c==="[object HTMLCollection]")};Sys.isString=function(b){return !Sys.isArray(b)&&(typeof b==="string")};Sys.isNumber=function(b){return !Sys.isArray(b)&&b===b&&(typeof b==="number")};Sys.isObj=function(b){return !Sys.isArray(b)&&(typeof b==="object")};Sys.isFunc=function(b){return(typeof b==="function")};Sys.isAudioBuffer=function(b){return Object.prototype.toString.call(b)==="[object AudioBuffer]"};Sys.isInstanceOf=function(h,f){var g=false;try{g=(h instanceof f)}catch(i){}return g};Sys.copyObject=function(b){return Sys.apply({},b)};Sys.copyObj=Sys.copyObject;Sys.clone=function(d){var f=this,g;if(Sys.isArray(d)){g=[];Sys.each(d,function(a){g.push(Sys.clone(a))},f)}else{if(Sys.isObj(d)){g={};Sys.iterate(d,function(b,a){g[b]=Sys.clone(a)},f)}else{g=d}}return g};Sys.extend=function(m,l,h){var j=Object.prototype.constructor,k=l,i=function(){};if(k.constructor!==j){l=k.constructor}else{l=function(){m.apply(this,arguments)}}i.prototype=m.prototype;l.prototype=new i();l.prototype.constructor=l;if(m.prototype.constructor===j){m.prototype.constructor=m}l.superclass=m.prototype;Sys.override(l,k);return l};Sys.clamp=function(b){return b.value<b.min?b.min:b.value>b.max?b.max:b.value};Sys.range=function(j,l,k){var i=[j],h=j>l,m;k=h?-1*Math.abs(k)||-1:Math.abs(k)||1;m=j+k;while(h?m>=l:m<=l){i.push(m);m=m+k}return i};Sys.reduce=function(f,i,j){if(!Sys.isDefined(j)){j=f[0];f=f.slice(1)}if(f.reduce){return f.reduce(i,j)}var k=0,h=f.length;for(;k<h;k++){j=i(j,f[k],k,f)}return j};Sys.map=function(d,c){if(d.map){return d.map(c)}return Sys.reduce(d,function(a,g,b){return a.concat(c(g,b,d))},[])};Sys.filter=function(d,c){if(d.filter){return d.filter(c)}return Sys.reduce(d,function(a,g,b){if(c(g,b,d)){return a.concat(g)}return a},[])};Sys.find=function(h,f){for(var i=0,g=h.length;i<g;i++){if(f(h[i])){return h[i]}}};Sys.EventHandler=function(){this.EVENTS={}};Sys.EventHandler.prototype={DEBUG:false,LOG_FUNC:false,LOG:false,LOG_WARN:false,LOG_FILTER:/(?:)/,history:[],toStringHistory:function(i){var f=this,g="",h;i=i||new RegExp();Sys.each(f.history,function(b){try{h=JSON.stringify(b.params)}catch(a){h=b.params}i.test(b.event)&&(g+=b.event+" ("+b.listeners+") -> "+h+"\r\n")});return g},addListener:function(g,d){var f=this;if(!Sys.isDefined(f.EVENTS[d])){f.EVENTS[d]=[]}if(!Sys.contains(f.EVENTS[d],g)){f.EVENTS[d].push(g)}},removeListener:function(h,i){var f=this.EVENTS[i]||[],g=f.indexOf(h);if(g>=0){f[g]="removed"}},dispatchEvent:Sys.variadic(function(m,n){var o=this.EVENTS[m]||[],k=o.length-1,j;for(j=k;j>=0;j--){var l=o[j],i=(Sys.isObj(l))?l.handlers[m]:undefined;if(Sys.isDefined(i)){i.apply(l,n)}}for(j=k;j>=0;j--){if(o[j]==="removed"){o.splice(j,1);++j}}}),sortEventListeners:function(k){var n=this.EVENTS,m=Object.keys(n),o=m.length,l,j,i;for(i=-1;++i<o;){l=n[m[i]];j=l.indexOf(k);if(j>0){l.splice(j,1);l.unshift(k)}}}};var EventHandler=new Sys.EventHandler();Sys.ns("Sys");Sys.Observable=function(b){this.eventHandler=Sys.isDefined(b)&&Sys.isDefined(b.eventHandler)?b.eventHandler:EventHandler;this.handlers={}};Sys.Observable.prototype={fireEvent:function(){if(arguments.length===0){return}this.eventHandler.dispatchEvent.apply(this.eventHandler,arguments)},on:function(i){var j=this,l=Object.keys(i),m=l.length,k,h=0;while(h<m){k=l[h];j.addListener(k,i[k]);++h}},off:function(){var i=this,k=Object.keys(i.handlers),g=k.length,j,h=0;while(h<g){j=k[h];i.removeListener(j);++h}},addListener:function(c,d){this.handlers[c]=d;this.eventHandler.addListener(this,c)},removeListener:function(b){this.eventHandler.removeListener(this,b);this.handlers[b]=undefined},hasListener:function(b){return Sys.isDefined(this.handlers[b])}};Sys.ns("Sys");Sys.Element={constructor:function(h){var i=this,g=Sys.isDefined,f;i.transitionend=function(){};if(Sys.isString(h)){f=document.createElement(h)}else{if(h!==null&&Sys.isObj(h)){if(/HTML[a-zA-z]*Element/i.test(h.toString())){f=h}else{f=document.createElement(h.tag);Sys.iterate(h,function(b,a){if(b==="cls"){f.setAttribute("class",a)}else{if(b==="innerHTML"){f.innerHTML=a}else{if(b==="textContent"){f.textContent=a}else{if(b==="items"){Sys.each(a,function(c){this.add(c)},i)}else{if(b==="transitionend"&&typeof a==="function"){i.transitionend=a}else{if(b!=="renderTo"&&b!=="tag"){f.setAttribute(b,a)}}}}}}})}}else{throw"Invalid instantiation of Sys.Element, invalid input, needs element string or object"}}f.addEventListener("transitionend",function(a){i.transitionend.apply(i,arguments);a.stopPropagation()},false);if(!Sys.isEmpty(h.renderTo)){document.getElementById(h.renderTo).appendChild(f)}i.el=f;Sys.Element.superclass.constructor.apply(i,arguments)},getEl:function(){return this.el},getChildren:function(){return Array.prototype.slice.call(this.getEl().childNodes,0)},add:function(b){this.el.appendChild(b.getEl());b.parent=this;return b},addBefore:function(c,d){this.el.insertBefore(c.getEl(),d.getEl());c.parent=this;return c},addChildren:function(b){Sys.each(b,function(a){this.el.appendChild(a)},this)},remove:function(d){var c=d.getEl();if(this.el===c.parentNode){this.el.removeChild(c)}return d},removeAll:function(){var b=this.el;while(b.firstChild){b.removeChild(b.firstChild)}},addListener:function(j,l,m,i){var k=this,n=function(){l.apply(m)},o;m=m||k.el;i=i||{};if(i.single){n=function(){k.removeListener(j,l,m);l.apply(m)}}k.domEvents=k.domEvents||{};o=k.domEvents[j]||[];o.push({eventName:j,fn:l,scope:m,wrappedFn:n});k.domEvents[j]=o;k.el.addEventListener(j,n,false);Sys.Element.superclass.addListener.apply(this,arguments)},removeListener:function(g,i,f){var h=this;f=f||h.el;Sys.each(h.domEvents[g],function(a,b){if(a.eventName===g&&a.fn===i&&a.scope===f){h.domEvents[g].splice(b,1);h.el.removeEventListener(g,a.wrappedFn,false);return false}return true});Sys.Element.superclass.removeListener.apply(this,arguments)},getOffset:function(){return Sys.utils.getElOffset(this.el)},addAsFirst:function(b){this.el.insertBefore(b.el,this.el.firstChild);return b},hasCSSClass:function(b){return Sys.utils.hasCSSClass(this.el,b)},addCSSClass:function(b){Sys.utils.addCSSClass(this.el,b)},removeCSSClass:function(b){Sys.utils.removeCSSClass(this.el,b)},replaceCSSClass:function(f,g,d){Sys.utils.replaceCSSClass(this.el,f,g,d)},setCSSClassString:function(b){this.el.className=b},toggleClass:function(f,g){var d=this;if(typeof g==="boolean"){return g?d.addCSSClass(f):d.removeCSSClass(f)}if(!d.hasCSSClass(f)){return d.addCSSClass(f)}else{return d.removeCSSClass(f)}}};Sys.Element.hasCls=Sys.Element.hasCSSClass;Sys.Element.addCls=Sys.Element.addCSSClass;Sys.Element.removeCls=Sys.Element.removeCSSClass;Sys.Element.replaceCls=Sys.Element.replaceCSSClass;Sys.Element.toggleCls=Sys.Element.toggleClass;Sys.Element=Sys.extend(Sys.Observable,Sys.Element,"Sys.Element");Sys.ns("Sys.Math");Sys.apply(Sys.Math,{hypotenuse:function(d,c){return Math.sqrt(d*d+c*c)},radToDeg:function(b){return b*(180/Math.PI)},degToRad:function(b){return Animation.utils.degToRad(b,10)},cos:function(b){return Math.cos(this.degToRad(b))},acos:function(b){return this.radToDeg(Math.acos(b))},sin:function(b){return Math.sin(this.degToRad(b))},atan2:function(c,d){return this.radToDeg(Math.atan2(c,d))},randomBetween:function(c,d){return c+(d-c)*Math.random()},randomIntBetween:function(c,d){return Math.floor(Math.random()*(d-c+1))+c},randomBetweenRanges:function(){var g=this,f=Array.prototype.slice.call(arguments),d=f[g.randomIntBetween(0,f.length-1)];return g.randomBetween(d[0],d[1])},randomIntBetweenRanges:function(){var b=this;return Math.round(b.randomBetweenRanges.apply(b,arguments))},absoluteDifference:function(c,d){return Math.abs(c-d)}});Sys.Deferred=function(){this.whenList=[];this.thenList=[];this.failList=[];this.alwaysList=[];this.states={pending:0,resolved:1,rejected:2};this.resolved=0;this.rejected=0;this.args=[];this.state=this.states.pending};Sys.Deferred.prototype={when:function(d){var c;if(Sys.isArray(d)){c=d}else{c=Array.prototype.slice.call(arguments,0)}Sys.each(c,function(a){this.whenList.push(a);a.always(function(){this.onDeferredUpdated()},this)},this);this.onDeferredUpdated();return this},then:function(c,d){d=d||window;if(this.isWaiting()){this.thenList.push({fn:c,scope:d})}else{if(this.isResolved()){c.call(d)}}return this},fail:function(c,d){d=d||window;if(this.isWaiting()){this.failList.push({fn:c,scope:d})}else{if(this.isRejected()){c.call(d)}}return this},always:function(c,d){d=d||window;if(this.isWaiting()){this.alwaysList.push({fn:c,scope:d})}else{c.call(d)}return this},resolve:function(){this.state=this.states.resolved;this.onStateUpdated()},resolveWith:function(b){this.args=b;this.resolve()},reject:function(){if(Sys.isFunc(this.fallbackFilter)){this.onFallback()}else{this.state=this.states.rejected;this.onStateUpdated()}},rejectWith:function(b){this.args=b;this.reject()},isRejected:function(){return(this.state===this.states.rejected)},isResolved:function(){return(this.state===this.states.resolved)},fallback:function(b){this.fallbackFilter=b;return this},onFallback:function(){var c=this,d=this.fallbackFilter.call(this,this.args);if(Sys.isObj(d)){d.done(function(){c.resolveWith(d.args)}).fail(function(){c.rejectWith(d.args)})}},onDeferredUpdated:function(){var g=0,f=0;Sys.each(this.whenList,function(a){if(a.isRejected()){g+=1}else{if(a.isResolved()){f+=1}}},this);this.resolved=f;this.rejected=g;if(!this.isWaiting()){var d=[];Sys.each(this.whenList,function(a){d=d.concat(a.args)});if(g>0){this.rejectWith(d)}else{if(f>0){this.resolveWith(d)}}}},isWaiting:function(){return !this.whenList.length||((this.resolved+this.rejected)<this.whenList.length)},onStateUpdated:function(){var h=[];if(this.state===this.states.resolved){h=this.thenList.concat(this.alwaysList)}else{if(this.state===this.states.rejected){h=this.failList.concat(this.alwaysList)}}var i,f,g=h.length;for(f=-1;++f<g;){i=h[f].fn.apply(h[f].scope,this.args);if(Sys.isObj(i)&&(f+1<g)){i.thenList.push.apply(i.thenList,h.slice(f+1));break}}this.thenList=[];this.alwaysList=[];this.failList=[]}};Sys.Deferred.prototype.done=Sys.Deferred.prototype.then;Sys.ns("Sys.utils");(function(){var b={queryStringToObject:function(a,o){var l={},j,m,k=Sys.isDefined(o)?o:true;if(!a){return l}var n=a.replace("?","").split(/&/);Sys.each(n,function(c){j=c.split("=");m=j[1];if(k){m=decodeURIComponent(m)}if(m==="false"){m=false}else{if(m==="true"){m=true}}l[j[0]]=m});return l},qsToObj:function(a,g){var f=this.queryStringToObject(a,g);f.toStr=function(){var c="";Sys.iterate(f,function(i,d){if(typeof d!=="function"){c+=c.length?"&":"?";c+=i+"="+d}});return c};return f},appendParameterToQuery:function(g,f){var a=g[g.length-1];if(a==="?"||a==="&"){g+=f}else{if(!g.contains("?")){g+="?"+f}else{g+="&"+f}}return g},httpGet:function(h){var g=new XMLHttpRequest(),a=new Sys.Deferred(),i=h.url;g.onreadystatechange=function(){if(this.readyState===4){g.onreadystatechange=function(){};if(Sys.utils.httpRequestIsOK(g)){if(h.responseType!=="arraybuffer"&&Sys.isDefined(Sys.utils.getErrorCode(g))){a.rejectWith([g])}else{a.resolveWith([g])}}else{a.rejectWith([g])}}};if(Sys.isDefined(h.onProgressCallback)){g.onprogress=function(c){h.onProgressCallback(c,h.name)}}g.open("GET",i);if(Sys.isDefined(h.responseType)){g.responseType=h.responseType}if(!Sys.isEmpty(h.useCredentials)){g.withCredentials=h.useCredentials}g.send();return a},httpRequestIsOK:function(a){return a.status===200||(a.status===0&&a.responseText.length>0)},getErrorCode:function(a){var d=Sys.utils.toInt(Sys.utils.getResponseParameter("errorcode",a));return !isNaN(d)?d:undefined},getErrorData:function(a){return this.getResponseParameter("errordata",a)},getResponseParameter:function(g,i){var h=new RegExp(g+"=([^&]+)"),a=Sys.isDefined(i.responseText)?i.responseText.match(h):null;return a!==null?a[1]:undefined},loadJS:function(i){var a=new Sys.Deferred(),g=document,h=g.createElement("script");h.onload=function(){a.resolve()};h.type="text/javascript";h.src=i.url;setTimeout(function(){if(!a.isResolved()){a.reject()}},5000);g.getElementsByTagName("head")[0].appendChild(h);return a},strIsTrue:function(a){if(Sys.isEmpty(a)){return false}return a.toString().toLowerCase()==="true"},pseudoGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var g=Math.random()*16|0,a=c==="x"?g:(g&3|8);return a.toString(16)})},getNodesByFormat:function(h,a){var j=this,k=[],i=0;h.replace(/\{([^\{\}]*)\}/g,function(g,m,c,f){k.push(document.createTextNode(f.slice(i,c)));i=c+g.length;var d=function(){var l=a[Sys.utils.toInt(m)];if(Sys.isString(l)||Sys.isNumber(l)){k.push(document.createTextNode(l.toString()));return l}else{if(Sys.isObj(l)){k.push(l.getEl())}}return""};d.apply(j,arguments)});if(i<h.length){k.push(document.createTextNode(h.slice(i,h.length)))}return k},objSort:function(a,g,h){var i=function(c,d){return h?d[g]-c[g]:c[g]-d[g]};a.sort(i);return a},toInt:function(a){return parseInt(a,10)},toFloat:function(a){return parseFloat(a)},floorToEven:function(d){var a=d%2;return d-a},ceilToEven:function(d){var a=d%2;return d+(2-a)},numberToFixedDigits:function(a,d){if(Math.abs(a)<1){return a.toFixed(d-1)}return a.toPrecision(d)},isUrl:function(a){var d=new RegExp("(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?");return d.test(a)},getElOffset:function(f){var a=0,g=0;if(f.offsetParent){do{a+=f.offsetLeft;g+=f.offsetTop}while((f=f.offsetParent))}return{left:a,top:g,x:a,y:g}},getTransformationOffset:function(h){var a=0,g=0;if(h.parentElement){do{var i=new WebKitCSSMatrix(window.getComputedStyle(h).webkitTransform);a+=i.e;g+=i.f}while((h=h.parentElement))}return{left:a,top:g,x:a,y:g}},getPointCoordinates:function(g){var f={x:0,y:0},a=g.type;if(/touch/.test(a)){f.x=g.changedTouches[0].pageX;f.y=g.changedTouches[0].pageY}else{if(/mouse/.test(a)){f.x=g.x;f.y=g.y}}return f},hasCSSClass:function(g,f){var a=new RegExp("(^|\\s)"+f+"($|\\s)");return g.className.search(a)>=0},addCSSClass:function(a,d){if(!Sys.utils.hasCSSClass(a,d)){a.className=Sys.utils.trimClassName(a.className+" "+d)}},removeCSSClass:function(a,d){Sys.utils.replaceCSSClass(a,d,"",false)},replaceCSSClass:function(l,m,i,j){var k=l.className,a;if(Sys.utils.hasCSSClass(l,m)){a=new RegExp("(^|\\s)("+m+")($|\\s)");k=k.replace(a,"$1"+i+"$3");l.className=Sys.utils.trimClassName(k)}else{if(j){Sys.utils.addCSSClass(l,i)}}},trimClassName:function(a){return a.replace(/\s+/g," ").trim()},addCSSClassToBody:function(a){Sys.utils.addCSSClass(document.body,a)},replaceCSSClassOnBody:function(a,f,g){Sys.utils.replaceCSSClass(document.body,a,f,g)},goTo:function(a){window.location=a},objectToQueryString:function(g){var a="";for(var f in g){if(g.hasOwnProperty(f)){a+="&"+f+"="+g[f]}}return a},reload:function(){window.location.reload()},containsObject:function(f,g){var a;if(Sys.isObj(f)&&Sys.isArray(g)){for(a=0;a<g.length;a++){if(g[a]===f){return{found:true,index:a}}}}else{}return{found:false,index:NaN}},getKeys:function(g){var h=[];var a=g.keys;if(typeof a!=="function"){var i;for(i in g){if(g.hasOwnProperty(i)){h.push(i)}}}else{h=a(g)}return h},init2dMatrix:function(a,h,i){var j,k=[];for(j=-1;++j<a;){k.push(Sys.utils.initArray(h,i))}return k},initArray:function(h,i){var a,g=[];for(a=-1;++a<h;){g.push(i)}return g},pollyFill:function(m){if(!Sys.isDefined(Sys.utils.pollyFillTestElement)){Sys.utils.pollyFillTestElement=document.createElement("div")}var j,k=Sys.utils.pollyFillTestElement,l=["Webkit","Moz","ms","O"],i=m.charAt(0).toUpperCase()+m.substr(1),a;if(k.style[m]){return m}for(a=0;a<l.length;a++){j=l[a]+i;if(k.style[j]!==undefined){return j}}return undefined},parseQueryStringToNestedObject:function(a){return this.parseQueryString(a,true)},parseQueryString:function(w,q){var n={},r=w.split("&"),v,t,a,u,s,o,p;for(v=0;v<r.length;v++){t=r[v].split("=");a=t[0].split(".");s=n;for(u=0;u<a.length-1;u++){if(!s[a[u]]){s[a[u]]={}}s=s[a[u]]}o=a[a.length-1];p=q===true?this.parseValue(decodeURIComponent(t[1])):decodeURIComponent(t[1]);if(o!==""){s[o]=p}}return n},parseValue:function(h){var i,a,g={};if(h.toLowerCase()==="true"){return true}if(h.toLowerCase()==="false"){return false}if(h.toLowerCase()==="null"){return null}if(h.toLowerCase()==="undefined"){return undefined}if(!isNaN(Number(h))){if(h.length>16){return h}return Number(h)}if(h.split(",").length>1){i=h.split(",");for(a=0;a<i.length;a++){i[a]=this.parseValue(i[a])}return i}if(h.split(":").length>1){i=h.split(":");g[i[0]]=this.parseValue(i[1]);return g}return h},parseReelInfo:function(a,l){var i,m=[],k,j;if(Sys.isDefined(l)){Sys.iterate(a.rs,function(d,c){if(Sys.isObj(c)&&c.id===l){i=c.r}})}if(!Sys.isDefined(i)){i=a.rs.i0.r}for(k=0;Sys.isDefined(i["i"+k]);k++){j={hold:i["i"+k].hold,symbols:i["i"+k].syms,overlaySymbols:[]};if(i["i"+k].overlay){j.overlaySymbols=this.getOverlaySymbols(i["i"+k].overlay)}m.push(j)}return m},getOverlaySymbols:function(a){var f=[],g;for(g=0;a["i"+g];g++){f[a["i"+g].row]=a["i"+g]["with"]}return f},getClassFromString:function(j){if(Sys.isString(j)){var i=j.split("."),k=window,a,h=i.length;for(a=0;a<h;a++){k=k[i[a]];if(!Sys.isDefined(k)){return undefined}}return k}},openURL:function(a){try{window.open(a,"_blank")}catch(d){window.location=a}}};Sys.utils=Sys.apply(Sys.utils,b)}());Sys.ns("Core");Core.Module={constructor:function(b){Core.Module.superclass.constructor.apply(this,arguments);this.init(b)},getStateChanges:function(){},getMixinDependencies:function(){return[]},getDefaultMVCClasses:function(){return{controller:Core.Controller}},init:function(h){var k=this,l=["model","view","controller"],i=k.getDefaultMVCClasses(),j=Object.keys(i),m=new Sys.EventHandler();if(Sys.isDefined(h)){Sys.each(l,function(a){if(Sys.isDefined(h[a])){i[a]=h[a]}else{if(j.contains(a)&&!Sys.isDefined(i[a])){throw new Error("Module :: The "+h.name+" module has a "+a+" class defined that is not included")}}})}if(Sys.isDefined(i.model)){k.model=new i.model({name:h.name,eventHandler:m})}if(Sys.isDefined(i.view)){if(!Sys.isDefined(k.model)){k.model=new Core.Model({name:h.name,eventHandler:m})}k.view=new i.view({name:h.name,model:k.model,eventHandler:m})}k.controller=new i.controller({name:h.name,view:k.view,model:k.model,eventHandler:m});k.MODULE_NAME=h.name}};Core.Module=Sys.extend(Sys.Observable,Core.Module,"Core.Module");Sys.ns("Core");Core.Controller={constructor:function(d){var c=this;c.localEventHandler=d.eventHandler;c.eventHandler=EventHandler;c.handlers={};c.init(d)},init:function(d){var c=this;c.model=d.model;c.view=d.view;c.MODULE_NAME=d.name;c.setupEvents()},setupEvents:function(){},onModulesFinishedLoading:function(){this.model.setState("loaded")},addListener:function(g,d){var f=this;f.handlers[g]=d;if(g.indexOf("view:")===0){f.localEventHandler.addListener(f,g)}else{f.eventHandler.addListener(f,g)}}};Core.Controller=Sys.extend(Sys.Observable,Core.Controller,"Core.Controller");Sys.ns("Core");Core.Model={constructor:function(b){Core.Model.superclass.constructor.apply(this,arguments);this.init(b)},readData:function(b){return this.data[b]},storeData:function(c,d){return this.data[c]=d},removeData:function(b){delete this.data[b]},setState:function(d,c){this.state=d;this.fireEvent("model:"+this.state,c)},getState:function(){return this.state},isState:function(b){return b===this.state},init:function(d){var c=this;c.data={};c.state=undefined;c.MODULE_NAME=d.name;c.setupData()},setupData:function(){}};Core.Model=Sys.extend(Sys.Observable,Core.Model,"Core.Model");Sys.ns("Core");Core.View={constructor:function(b){Core.View.superclass.constructor.apply(this,arguments);this.init(b)},init:function(b){this.model=b.model;this.MODULE_NAME=b.name;this.setupEvents()},setupEvents:function(){}};Core.View=Sys.extend(Sys.Observable,Core.View,"Core.View");Sys.ns("Platform");Platform.PlatformManager={AVAILABLE_RESOURCE_BUNDLES:[],gatherUserAgentInformation:function(){var c=navigator.userAgent.toLowerCase(),d;if(/Windows Phone/i.test(c)){Platform.isWindowsMobileDevice=true;Platform.isWindowsHandHeldDevice=true;Platform.isMobileDevice=true}else{if(/\sarm;/.test(c)&&(/trident/).test(c)){Platform.isWindowsTabletDevice=true;Platform.isWindowsHandHeldDevice=true;if((navigator.msMaxTouchPoints>0&&window.MouseEvent)||(/touch; wpdesktop/).test(c)){Platform.isTabletDevice=false}else{Platform.isTabletDevice=true}}}if(/ipod|ipad|iphone/i.test(c)&&!(Platform.isWindowsHandHeldDevice===true)){Platform.isIOSDevice=true;if(/ipad/i.test(c)){Platform.isTabletDevice=true}else{Platform.isMobileDevice=true}if(!Sys.isDefined(window.orientation)){Platform.isIOSDevice=false}}if(/Android/i.test(c)&&!(Platform.isWindowsHandHeldDevice===true)){Platform.isAndroidDevice=true;d=c.match(/Android (\d+)\.(\d+)/i);Platform.isAndroidMajorVersion=Number(d[1]);Platform.isAndroidMinorVersion=Number(d[2]);if(/mobile/i.test(c)){Platform.isMobileDevice=true}else{Platform.isTabletDevice=true}if(/Chrome/i.test(c)){Platform.isChromeBrowser=true;d=c.match(/Chrome\/(\d+)\.(\d+)/i);Platform.isChromeMajorVersion=Number(d[1]);Platform.isChromeMinorVersion=Number(d[2])}else{Platform.isAndroidStockBrowser=true}if(/GT-I9100/i.test(c)){Platform.isSamsungS2Device=true}if(/GT-I9300/i.test(c)){Platform.isSamsungS3Device=true}if(/GT-I9505|GT-I9521|GT-I9525/i.test(c)){Platform.isSamsungS4Device=true}}if(!Sys.isDefined(window.orientation)&&!Platform.isMobileDevice&&!Platform.isTabletDevice){Platform.isDesktopDevice=true}Platform.isIEBrowser=/trident/i.test(c);Platform.isEdgeBrowser=/edge/i.test(c);Platform.isSafariBrowser=/Safari/i.test(c)&&!/Chrome/i.test(c);if(!Platform.isDesktopDevice){Platform.isLowEndDevice=this.checkIfLowEndDevice(c)}},checkIfLowEndDevice:function(c){var d=false;if(Platform.isAndroidStockBrowser||((Platform.isAndroidMajorVersion===4&&Platform.isAndroidMinorVersion<=3)&&Platform.isAndroidMajorVersion<5)||Sys.isIphone3GS||(Sys.isiPad&&!window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches)||(Platform.isWindowsHandHeldDevice&&this.isLowMemoryWinPhone(c))||!this.isWebGLSupported()){d=true}return d},isLowMemoryWinPhone:function(d){if(/Lumia/i.test(d)){var f=d.match(/[L|l]umia (\d+)/i),g=[];if(g.indexOf(f[1])>-1){return true}}return false},isWebGLSupported:function(){var g={stencil:true};try{if(!window.WebGLRenderingContext){return false}var f=document.createElement("canvas"),h=f.getContext("webgl",g)||f.getContext("experimental-webgl",g);return !!(h&&h.getContextAttributes().stencil)}catch(i){return false}},detectPlatformFeatures:function(){Platform.hasWebAudioContext=this.isWebAudioContextAvailable()&&!Platform.isAndroidStockBrowser;Platform.hasFullscreenAPI=false;var c=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"];for(var d=0;d<c.length;d++){if(c[d] in document){Platform.hasFullscreenAPI=true;break}}},isWebAudioContextAvailable:function(){return Sys.isDefined(window.AudioContext||window.webkitAudioContext)},consolidatePlatformKnowledge:function(){var g=Platform.isAndroidMajorVersion===4&&Platform.isAndroidMinorVersion===3,d=Platform.isSamsungS3Device||Platform.isSamsungS4Device,f=Platform.isAndroidStockBrowser;f=f||Platform.isIphone3GSDevice;f=f||(g&&d&&Platform.isChromeMajorVersion===28);Platform.isWebAudioEnabled=Platform.hasWebAudioContext&&!f},applyOverrides:function(){},determineResourceBundle:function(){if(Sys.isDefined(Platform.resourceBundle)){return}var i=this,f,g;i.detectPlatformFeatures();i.consolidatePlatformKnowledge();i.applyOverrides();for(f=0;f<i.AVAILABLE_RESOURCE_BUNDLES.length;f++){g=Platform["_"+i.AVAILABLE_RESOURCE_BUNDLES[f]];if(g.requirementsAreMet()){Platform.resourceBundle=g;Platform.resourceBundle.preloadAudio=g.preloadAudio();try{Platform.hasWebGLContext=g.preloadOptionalWebGLLibrary()}catch(h){break}}}i.applyFeatureDetectedProperties()},applyFeatureDetectedProperties:function(){Platform.resourceBundle.loaderResourceKeys.audio=this.determineAudioConfiguration(Platform.resourceBundle.loaderResourceKeys.audio)},determineAudioConfiguration:function(h){var g=Platform.hasWebAudioContext?"webAudio":"legacyAudio",f="",i;if(g==="webAudio"&&!Platform.isDesktopDevice){i=(Platform.resourceBundle.audioType&&Platform.resourceBundle.audioType.postFix)?Platform.resourceBundle.audioType.postFix:"_mobile";g+=i||"_mobile";f="_sprite"}return g+"_"+h+f}};Platform.PlatformManager.gatherUserAgentInformation();Sys.ns("Platform");Platform._android={IDENTIFIER:"Android",loaderResourceKeys:{GFX:"960x540",audio:"ogg"},requirementsAreMet:function(){return Platform.isAndroidDevice},preloadAudio:function(){return false},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("android");Sys.ns("Platform");Platform._mobile={IDENTIFIER:"mobile",loaderResourceKeys:{GFX:"960x540",audio:"mp3"},requirementsAreMet:function(){return !Platform.isDesktopDevice&&!Platform.isLowEndDevice},preloadAudio:function(){return false},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("mobile");Sys.ns("Platform");Platform._mobile_low={IDENTIFIER:"mobileLow",loaderResourceKeys:{GFX:"960x540",audio:"mp3"},requirementsAreMet:function(){return !Platform.isDesktopDevice&&Platform.isLowEndDevice},preloadAudio:function(){return false},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("mobile_low");Sys.ns("Platform");Platform._android_low={IDENTIFIER:"androidLow",loaderResourceKeys:{GFX:"960x540",audio:"ogg"},requirementsAreMet:function(){return Platform.isAndroidDevice&&Platform.isLowEndDevice},preloadAudio:function(){return false},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("android_low");Sys.ns("Platform");Platform._desktop={IDENTIFIER:"Desktop",loaderResourceKeys:{GFX:"1280x720",audio:"ogg"},requirementsAreMet:function(){return Platform.isDesktopDevice},preloadAudio:function(){return Platform.hasWebAudioContext},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("desktop");Sys.ns("Platform");Platform._desktop_edge={IDENTIFIER:"Desktop Edge",loaderResourceKeys:{GFX:"1280x720",audio:"mp3"},requirementsAreMet:function(){return Platform.isDesktopDevice&&Platform.isEdgeBrowser},preloadAudio:function(){return Platform.hasWebAudioContext},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("desktop_edge");Sys.ns("Platform");Platform._desktop_IE={IDENTIFIER:"Desktop IE",loaderResourceKeys:{GFX:"1280x720",audio:"mp3"},requirementsAreMet:function(){return Platform.isDesktopDevice&&Platform.isIEBrowser},preloadAudio:function(){return Platform.hasWebAudioContext},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("desktop_IE");Sys.ns("Platform");Platform._desktop_safari={IDENTIFIER:"Desktop Safari",loaderResourceKeys:{GFX:"1280x720",audio:"mp3"},requirementsAreMet:function(){return Platform.isDesktopDevice&&Platform.isSafariBrowser},preloadAudio:function(){return Platform.hasWebAudioContext},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("desktop_safari");Sys.ns("Platform");Platform._default={IDENTIFIER:"Default",loaderResourceKeys:{GFX:"960x540",audio:"mp3"},requirementsAreMet:function(){return false},preloadAudio:function(){return false},preloadOptionalWebGLLibrary:function(){return false}};Platform.PlatformManager.AVAILABLE_RESOURCE_BUNDLES.push("default");Sys.ns("Sys");Sys.Environment={constructor:function(d){var c=this;Sys.Environment.superclass.constructor.apply(c,arguments);c.isIniFrame=(window.top!==window.self);c.supportedPlatforms=["mobile","mobileLow","tablet","tabletLow","desktop"];c.portraitSupport=true;c.init();document.onselectstart=function(){return false}},getResolution:function(){return this.resolutionProperties.resolution},getStageResolution:function(){return this.resolutionProperties.virtualResolution},scaleValue:function(d,g){var f=Sys.isNumber(g)?g:0;return parseFloat(d.toFixed(f))},scaleX:function(d,c){return this.scaleValue(d,c)},scaleY:function(c,d){return this.scaleValue(c,d)},getVirtualToWindowScale:function(b){return parseFloat(this.resolutionProperties.virtualToWindowScale.toFixed(b))},getWindowToVirtualScale:function(b){return parseFloat((1/this.resolutionProperties.virtualToWindowScale).toFixed(b))},init:function(){var b=this;b.identifyOS();b.identifyBrowser();b.identifyPlatform();b.resolutionProperties=b.determineResolution({mobile:{width:960,height:540,aspect:16/9,pixelFactor:1,portraitTopOffset:0.3},mobileLow:{width:960,height:540,aspect:16/9,pixelFactor:1,portraitTopOffset:0.3},tablet:{width:960,height:540,pixelFactor:1,aspect:16/9},tabletLow:{width:960,height:540,pixelFactor:1,aspect:16/9},desktop:{width:1280,height:720,pixelFactor:720/540,aspect:16/9}});document.documentElement.style.fontSize=b.resolutionProperties.resolution.pixelFactor*100+"px";b.checkSoundSupport();b.setupPageVisibility();b.defineInputEvents();b.setupEvents()},setupEvents:function(){var b=this;b.on({receivedOrientationChange_event:b.onOrientationChange,receivedEnvironmentSize_event:b.onSizeChange,"notify:potraitMessage.active":b.setPortraitSupport})},setPortraitSupport:function(){this.portraitSupport=false},isPortraitSupported:function(){return this.portraitSupport},identifyOS:function(){var c=navigator.userAgent,d="";if(c.match(/Windows/i)){d="windows"}else{if(c.match(/Android/i)){d="android"}else{if(c.match(/iPad/i)||c.match(/iPhone/i)||c.match(/iPod/i)){d="ios"}}}this.os=d},identifyBrowser:function(){var g=navigator.userAgent,d=this.os,f="";if(g.match(/CriOS/i)||g.match(/Chrome/i)){f="chrome"}else{if(g.match(/MSIE [0-9]*\.[0-9]*;/i)){f="ie"}else{if(g.match(/Safari/i)){if(d==="ios"){f="safari"}else{if(d==="android"){f="stock"}}}else{if(g.match(/Firefox/i)){f="firefox"}}}}this.browser=f},identifyPlatform:function(){var b="mobile";if(Platform.isTabletDevice){b="tablet"}else{if(Platform.isDesktopDevice){b="desktop"}}this.platformCSS=b;if(b!=="desktop"&&Platform.isLowEndDevice){b+="Low"}this.platform=b},determineResolution:function(f){var h={width:1280,height:720,aspect:16/9},g=this.platform,i;if(Sys.isDefined(f[g])){i=f[g]}else{i=Sys.clone(h)}return{virtualResolution:h,resolution:i,virtualToWindowScale:i.height/h.height,portraitTopOffset:i.portraitTopOffset||0}},getTopAboveGame:function(d){var c=this.getSpaceAboveGame();return Math.round(c*d-c)},getTopInGame:function(b){return Math.round(this.getGameHeight()*b)},getTopBelowGame:function(b){return Math.round(this.getGameHeight()+b*this.getSpaceBelowGame())},getBottomAboveGame:function(b){return Math.round(-1*this.getSpaceAboveGame()*b)},getBottomInGame:function(b){return Math.round(this.getGameHeight()*b)},getBottomBelowGame:function(d){var c=this.getSpaceBelowGame();return Math.round(d*c-c)},getSpaceAboveGame:function(){var c=Game.stage.getGameContainer().getBoundingClientRect(),d=1/this.getScale();return c.top*d},getGameHeight:function(){return this.resolutionProperties.resolution.height},getSpaceBelowGame:function(){var j=this,g=Game.stage.getGameContainer().getBoundingClientRect(),h=1/j.getScale(),i=j.getInnerScreenSize().height,k=parseInt(document.getElementById("viewport").style.top,10)+g.height;return(i-k)*h},getSupportedPlatforms:function(){return this.supportedPlatforms},getCurrentPlatform:function(){return this.platform},getCurrentPlatformCSS:function(){return this.platformCSS},checkSoundSupport:function(){var b=this;b.supportsWebAudio=Sys.isDefined(window.AudioContext||window.webkitAudioContext);if(Sys.isAndroidDevice&&!Sys.isChrome||Sys.isIphone3GS){b.supportsWebAudio=false}else{if(Sys.isAndroidDevice&&Sys.isAndroid430&&Sys.isChrome280&&(Sys.isSamsungS.model==="s4"||Sys.isSamsungS.model==="s3")){b.supportsWebAudio=false}}if(Sys.isAndroidDevice){}},setupPageVisibility:function(){var i=this,h,g,f=function(a){i.onPageVisibilityChange(a,document[h])};if(typeof document.hidden!=="undefined"){h="hidden";g="visibilitychange"}else{if(typeof document.mozHidden!=="undefined"){h="mozHidden";g="mozvisibilitychange"}else{if(typeof document.msHidden!=="undefined"){h="msHidden";g="msvisibilitychange"}else{if(typeof document.webkitHidden!=="undefined"){h="webkitHidden";g="webkitvisibilitychange"}}}}if(typeof document.addEventListener==="undefined"||typeof h==="undefined"){}else{document.addEventListener(g,f,false)}},onPageVisibilityChange:function(d,c){this.fireEvent("pageVisibilityChanged_event",c)},orientation:function(){return Services.orientation.getOrientation()},onOrientationChange:function(b){if(Sys.isDefined(b)){this.deviceOrientation=b.orientation}this.fireEvent("environmentOrientationChanged_event")},onSizeChange:function(b){if(Sys.isDefined(b)){this.screenSize={width:b.width,height:b.height}}},getScreenSize:function(){return{width:window.outerWidth,height:window.outerHeight}},getInnerScreenSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getScale:function(){return this.scale},setScale:function(b){this.scale=b},goTo:function(b){this.fireEvent("request:fullscreen.exit");this.setWindowLocation(b)},setWindowLocation:function(b){setTimeout(function(){window.location=b},300)},openNewBrowserTab:function(c,d){window.open(c,d).focus()},goToLobby:function(i){var k=Resources.readData("lobbyUrl"),h=Resources.readData("lobbyUrl"),g=Resources.readData("queryData"),j=Resources.readData("sessionID");if(Sys.isDefined(h)&&Sys.isDefined(i)){h=Sys.utils.appendParameterToQuery(h,"reason="+i)}if(Sys.isDefined(g)){if(Sys.isDefined(h)&&Sys.isDefined(g.gameId)){h=Sys.utils.appendParameterToQuery(h,"gameId="+g.gameId)}if(Sys.isDefined(h)&&Sys.isDefined(j)){h=Sys.utils.appendParameterToQuery(h,"sessId="+j)}}if(Sys.isDefined(k)&&k!==""){this.goTo(h)}else{}},goToCashier:function(){this.goToLobby(5)},reload:function(){window.location.reload()},getInteractionEvents:function(b){if(Sys.isDefined(b)){return this.interactionEvents[b]}return this.interactionEvents},getEventType:function(){return this.eventType},isStartEvent:function(g){var d=this,f=Sys.contains(d.interactionEvents.start,g.type);if(g.type==="mousedown"&&!d.leftButtonClicked(g)){f=false}return f},isEndEvent:function(g){var d=this,f=Sys.contains(d.interactionEvents.end,g.type);if(g.type==="mouseup"&&!d.leftButtonClicked(g)){f=false}return f},isMoveEvent:function(b){return Sys.contains(this.interactionEvents.move,b.type)},isCancelEvent:function(b){return Sys.contains(this.interactionEvents.cancel,b.type)},isScrollEvent:function(b){return Sys.contains(this.interactionEvents.scroll,b.type)},isKeyUpEvent:function(b){return Sys.contains(this.interactionEvents.keyUp,b.type)},isKeyDownEvent:function(b){return Sys.contains(this.interactionEvents.keyDown,b.type)},isKeyPressEvent:function(b){return Sys.contains(this.interactionEvents.keyPress,b.type)},getMouseWheelEventName:function(){if((Boolean(window.MSInputMethodContext)&&Boolean(document.documentMode))||"onwheel" in document.createElement("div")){return"wheel"}else{if(typeof document.onmousewheel!=="undefined"){return"mousewheel"}}return"DOMMouseScroll"},isTouchCapable:function(){return"ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0},defineInputEvents:function(){var n=this,s=[],q=[],p=[],k=[],l=[],r=[],m=[],o=[];if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){s.push(window.navigator.pointerEnabled?"pointerdown":"MSPointerDown");q.push(window.navigator.pointerEnabled?"pointermove":"MSPointerMove");p.push(window.navigator.pointerEnabled?"pointerup":"MSPointerUp");k.push(window.navigator.pointerEnabled?"pointerout":"MSPointerOut");if(!n.isTouchCapable()){l.push(n.getMouseWheelEventName())}o.push("pointerEvent")}else{if(n.isTouchCapable()){s.push("touchstart");q.push("touchmove");p.push("touchend");k.push("touchcancel");o.push("touchEvent")}if(!Platform.isAndroidStockBrowser){s.push("mousedown");q.push("mousemove");p.push("mouseup");k.push("mouseout");l.push(n.getMouseWheelEventName());o.push("mouseEvent")}}if(n.platform==="desktop"){r.push("keyup");m.push("keydown")}n.interactionEvents={start:s,move:q,end:p,cancel:k,keyUp:r,keyDown:m,scroll:l};n.eventType=o},leftButtonClicked:function(b){if("buttons" in b&&b.buttons!==0){return b.buttons===1}else{if("which" in b){return b.which===1}}return b.button===0}};Sys.Environment=Sys.extend(Sys.Observable,Sys.Environment,"Sys.Environment");window.Environment=new Sys.Environment();Sys.ns("Sys");Sys.Resources={constructor:function(){var b=this;Sys.Resources.superclass.constructor.apply(b,arguments);b.init()},init:function(){this.data={}},readData:function(b){return this.data[b]},storeData:function(c,d){this.data[c]=d;this.fireEvent("notify:resources.dataStored",c);return this.data[c]},processAudio:function(g){var i=this,j=i.readData(g),h=new webkitAudioContext(),k;h.decodeAudioData(j,function(a){k=a;i.storeData("decoded:"+g,{context:h,buffer:k});i.fireEvent("notify:resources.soundDecoded")},function(){})},removeData:function(b){delete this.data[b]}};Sys.Resources=Sys.extend(Sys.Observable,Sys.Resources,"Sys.Resources");Resources=new Sys.Resources();Sys.ns("Sys");Sys.ns("Services");Sys.Storage={constructor:function(){Sys.Storage.superclass.constructor.apply(this,arguments);this.init()},init:function(){this.data={}},readData:function(b){return this.data[b]},storeData:function(c,d){this.data[c]=d;return this.data[c]},removeData:function(b){delete this.data[b]}};Sys.Storage=Sys.extend(Sys.Observable,Sys.Storage,"Sys.Storage");Services.storage=new Sys.Storage();Array.prototype.sum=function(){var d=0,f,g;for(f=0,g=this.length;f<g;f++){d+=this[f]}return d};Array.prototype.min=function(){return this.length===0?undefined:Math.min.apply(Math,this)};Array.prototype.max=function(){return this.length===0?undefined:Math.max.apply(Math,this)};Array.prototype.average=function(){if(this.length===0){return undefined}return this.sum()/this.length};Array.prototype.indexOf=function(f){var g=this.length,d;for(d=-1;++d<g;){if(this[d]===f){return d}}return -1};Array.prototype.contains=function(b){return this.indexOf(b)!==-1};Array.prototype.last=function(){return this[this.length-1]};Array.prototype.remove=Array.prototype.remove||function(c){var d=this.indexOf(c);if(d===-1){return}this.splice(d,1)};(function(){var b=String.prototype.trim;if(typeof b!=="function"){String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}}());String.prototype.contains=function(b){if(b===""){return false}return(this.indexOf(b)!==-1)};if(typeof Function.prototype.bind!=="function"){Function.prototype.bind=function(d){var g=this;var f=Array.prototype.slice.call(arguments,1);return function(){g.apply(d,f.concat(Array.prototype.slice.call(arguments)))}}}Sys.UserInputUtils={getDOMElementFromCoordinates:function(c){if(Sys.isObj(c)&&(!Sys.isDefined(c.x)||!Sys.isDefined(c.y))){return null}var d=document.elementFromPoint(c.x,c.y);if(!Sys.isEmpty(d)&&d.nodeType===3){d.target=d.parentNode}return d},getUserInputCoordinates:function(d){var c={x:d.changedTouches?d.changedTouches[0].clientX:d.clientX,y:d.changedTouches?d.changedTouches[0].clientY:d.clientY};return c},getDOMElementFromEvent:function(b){return Sys.UserInputUtils.getDOMElementFromCoordinates(Sys.UserInputUtils.getUserInputCoordinates(b))},calculateMetrics:function(d){var f=d.getBoundingClientRect(),g=d.offsetWidth/f.width;return{top:f.top,left:f.left,width:f.width,height:f.height,scale:g}},getCoordinatesRelativeToElement:function(m,n){var o=Sys.UserInputUtils.calculateMetrics(n),l=m.x-o.left,i=m.y-o.top,j=l*o.scale,k=i*o.scale;return{x:j,y:k}},isParentAndChildElements:function(d,c){if(d===c){return true}else{if(c&&c!==document.body&&c.parentElement){return this.isParentAndChildElements(d,c.parentElement)}else{return false}}},isCoordinateTarget:function(d,c){return Sys.UserInputUtils.isParentAndChildElements(d,Sys.UserInputUtils.getDOMElementFromCoordinates(c))},isEventTarget:function(d,c){return Sys.UserInputUtils.isParentAndChildElements(d,Sys.UserInputUtils.getDOMElementFromEvent(c))},isUserInputInSegment:function(n,l,i){if(n===undefined||l===undefined){return false}if(!Sys.isArray(l)){l=[l]}i=Sys.isDefined(i)?i:true;var p=l.length,s=i?Environment.getWindowToVirtualScale(3):1,o=n.x*s,q=n.y*s,m,r;for(r=-1;++r<p;){m=l[r];if(o>=m.x&&o<=m.x+m.width&&q>=m.y&&q<=m.y+m.height){return true}}return false}};Sys.ns("Core");Core.LanguageManager={constructor:function(){Core.LanguageManager.superclass.constructor.apply(this,arguments);var b=this;b.texts={};b.errorTexts={};b.setupEvents()},setupEvents:function(){var b=this;b.on({"notify:resources.dataStored":b.preload})},preload:function(h){if(h==="languageXML"){var m=this,k=Resources.readData(h),i=Sys.utils.XMLHelper.findAll("ds",k.documentElement),l,j;Sys.each(i,function(a){j=Sys.utils.XMLHelper.getAttributeValue("name",a);l=a.textContent;m.texts[j]=l});m.fireEvent("languageLoaded_event")}},getErrorText:function(b){if(this.hasText(b)){return this.getText(b)}return"[Error ID not found]"},hasText:function(b){return this.texts[b]!==undefined},getText:function(k,o){var m=this,n="",l,i,j;if(!m.hasText(k)){l="["+k+" not defined]";return l}else{if(m.texts[k]===""){l="["+k+" not translated]";return l}}j=m.texts[k];j=j.replace("%2B","+");if(o){i=Sys.utils.getNodesByFormat(j,o,m);Sys.each(i,function(a){if(Sys.isString(a)){n+=a}else{n+=a.data.toString()}},m);return n}else{return j}}};Core.LanguageManager=Sys.extend(Sys.Observable,Core.LanguageManager,"Core.LanguageManager");Sys.ns("Language");Language.Keys={accountUnavailable:"OCTaccountUnavailable",additonalFreeSpinsWon:"OCTadditonalFreeSpinsWon",autoplay:"OCTautoplayPanelLabel",autoplay_advancedSettings:"OCTadvancedSettings",autoplay_numberSpins:"OCTnumberSpins",autoplay_panelStartText:"OCTautoplayPanelStartText",autoplay_setting_stopAutoPlay:"OCTstopAutoPlayColon",autoplay_setting_ifCashDecreasesBy:"OCTifCashDecreasesBy",autoplay_setting_ifCashIncreasesBy:"OCTifCashIncreasesBy",autoplay_setting_ifFBonusIsStarted:"OCTifFBonusIsStarted",autoplay_setting_ifFreeSpinsIsStarted:"OCTifFreeSpinsIsStarted",autoplay_setting_ifWinExeeds:"OCTifWinExeeds",autoplay_setting_onAnyWin:"OCTonAnyWin",autoplay_setting_ifCashDecreasesByInfoTouch:"OCTlossLimitInfoTouch",autoplay_setting_ifCashDecreasesByInfo:"OCTlossLimitInfo",autoplay_setting_ifCashDecreasesByWarning:"OCTlossLimitWarning",autoplay_setting_ifCashDecreasesByWarningTouch:"betExceedCDB",autoplay_stopAutoPlay:"OCTstopAutoPlay",autoplay_stopText:"OCTautoplayStopText",autoSpins:"OCTautoSpins",betColonVar:"OCTbetColonVar",betInCash:"OCTbetInCash",betInCoins:"OCTbetInCoins",betLevel:"OCTbetlevel",betSettings_uc:"OCTbetSettingsCaps",bigWin:"OCTbigWin",bonusAwardedTitle:"bonusAwardedTitle",bonusAwardedCongrats:"bonusAwardedCongrats",btn_autoplay:"OCTautoplayButton",btn_casino:"OCTcasino_btn",btn_checkEnd:"OCTCheckEndButton",btn_close:"OCTclose_btn",btn_continue:"OCTContinue",btn_deposit:"OCTdeposit_btn",btn_login:"OCTlogin_btn",btn_maxbet:"OCTmaxbetbutton",btn_no:"OCTbtnNo",btn_ok:"OCTbtnOK",btn_reduceBet:"OCTreduceBet_btn",btn_reload:"OCTreload_btn",btn_sessionTimeOut:"OCTreload_btnRev",btn_yes:"OCTbtnYes",btn_addValue:"addValue",cash:"OCTcash",cashColon:"OCTcashColon",cashColonVar:"OCTcashColonVar",coinsColonVar:"OCTcoinsColonVar",coinsWonColon:"OCTcoinsWonColon",coinValue:"OCTcoinValue",congratulations:"OCTcongratsLC",congratulations_uc:"OCTcongratsUC",connectionLost:"OCTconnectionLost",connectionQualityPoor:"OCTconnectionQualityPoor","continue":"OCTContinue",continue_uc:"OCTbutton_CONTINUE",continuePlaying:"OCTcontinuePlaying",deposit:"OCTdeposit",depositPlay:"OCTdepositPlay",error:"OCTerror",freeRounds_expired:"OCTfreerounds",freeRoundsFinished:"OCTfreeRoundsFinished",freeRoundsLeftColon:"OCTFreeRoundsLeftwithColon",freeRoundsVar:"OCTfreeRoundsVar",freeSpins:"OCTfreeSpinsUC",freeSpinsLeftColonVar:"OCTfreeSpinsLeftColonVar",gameHistory:"OCTgameHistory",gameHistory_uc:"OCTgameHistoryHeadingUC",gameHistoryHeading:"OCTgameHistoryHeadingUC",gameRules_uc:"OCTgameRulesUC",gameSettingsPanelLabel:"OCTslidePanelLabel",gameUnavailable:"OCTgameUnavailable",haveFreeRounds:"OCThaveFreeRounds",historyNotAvailable:"OCThistoryNotAvailable",landscapeMode:"OCTlandscapeMode",level:"OCTlevel",loading:"OCTloadingText",loadingDots:"OCTloading",loadingTakesLonger:"OCTloadingTakesLonger",lostConnectInactivity:"OCTlostConnectInactivity",machinetext_bet:"OCTmachinetext_bet",machinetext_coins:"OCTmachinetext_coins",machinetext_coinvalue:"OCTmachinetext_coinvalue",machinetext_win:"OCTmachinetext_win",megaWin:"OCTmegaWin",messageCaption:"OCTmessagecaption",newHistoryWindow:"OCTnewHistoryWindow",outOfMoney:"OCToutOfMoney",paytable_betLineWinsLeftToRightOnly:"OCTbetLineWinsLeftToRightOnly",paytable_extraInfo:"OCTextraInfo",paytable_highest:"OCTpaytableHighest",paytable_symbolPayout:"OCTsymbolPayout",paytable_uc:"OCTbutton_paytableUC",paytable_voidAllPays:"OCTvoidAllPays",paytable_winningBetLinesHeading:"OCTwinningBetLinesHeading",playingForFun:"OCTplayingForFun",youPlayingForFun:"OCTyouPlayingFun",playLimit:"OCTplayLimit",quickSpin:"OCTquickSpin",rc_checkPlayingLost:"OCTRCheckPlayingLost",rc_checkPlayingWon:"OCTRCheckPlayingWon",rc_checkReminder:"OCTRCcheckReminder",reduce:"OCTreduce",reload:"OCTreload",reset:"OCTreset",restoredGameHeader:"OCTrestoredGameHeader",returnToLobby:"OCTreturnToLobby",roundsLeft:"OCTroundsLeft",roundsUseAcctMoney:"OCTroundsUseAcctMoney",sessionTimeOut:"OCTsessionTimeOut",setting_gameSound:"OCTgameSound",setting_introGame:"OCTintroGameSetting",setting_introScreeGame:"OCTintroScreeGameSetting",setting_leftHandMode:"OCTleftHandMode",setting_quickSpinGame:"OCTquickSpinGameSetting",setting_spaceSpin:"OCTspaceSpin",skipIntro:"OCTskipIntro",slowConnection:"OCTslowConnection",soundSettings_uc:"OCTsoundSettingsCaps",spinSettings_uc:"OCTspinSettingsCaps",spinsLeftText:"OCTspinsLeftText",startFreespins:"OCTstartFreeSpins",stopIfFreeSpins:"OCTstopIfFreeSpins",superMegaWin:"OCTsuperMegaWin",totalbet:"OCTtotalbet",totalWin:"OCTTotalWinwithColonVar",totalWinColon:"OCTtotalWinWithColon",totalWinColon_uc:"OCTtotalWinUCnoVar",totalWinColonVar:"OCTtotalWinColonVar",totalWinColonVar_uc:"OCTTotalWinwithColonUC",varRetriggerFSNoSpan:"OCTvarRetriggerFSNoSpan",win:"OCTWin",winColon_uc:"OCTwinColonUC",winColonVar:"OCTwinColonVar",winUpTo:"OCTwinUpTo",youWin:"OCTyouWinUCNoExclamation",youWonCoins:"OCTyouWonCoins",deviceBestGameExperience:"deviceBestGameExperience",deviceBrowserUpdateMust:"deviceBrowserUpdateMust",deviceOptimizedFor:"deviceOptimizedFor",deviceUpdateBrowser:"deviceUpdateBrowser",deviceUpdateOS:"deviceUpdateOS",deviceUseBrowser:"deviceUseBrowser",gameOptimisedFor:"gameOptimisedFor",MGcontinueYesNo:"MGcontinueYesNo",MGdeviceNoSupport:"MGdeviceNoSupport",MGnoOSSupport:"MGnoOSSupport",optimisedForVersion:"optimisedForVersion",upgradeIn:"upgradeIn"};Sys.UserInput={constructor:function(){Sys.UserInput.superclass.constructor.apply(this,arguments);this.init()},init:function(){var n=this,o,l=Environment.getInteractionEvents("scroll"),p=Environment.getInteractionEvents("keyUp"),q=Environment.getInteractionEvents("keyDown"),i=Environment.getInteractionEvents("start"),k=Environment.getInteractionEvents("move"),m=Environment.getInteractionEvents("end");n.setupData();n.interactionEventHandlers={start:n.handleInteractionStart.bind(n),end:n.handleInteractionEnd.bind(n),cancel:n.handleInteractionEnd.bind(n),move:n.handleInteractionMove.bind(n),keyUp:n.handleInteractionKeyUp.bind(n),keyDown:n.handleInteractionKeyDown.bind(n),scroll:n.handleInteractionScroll.bind(n)};n.on({"request:userInputManager.activateExclusivity":n.activateExclusivity,"request:userInputManager.deactivateExclusivity":n.deactivateExclusivity,"request:userInputManager.allowInteractions":n.setState.bind(n,"active"),"request:userInputManager.ignoreAllInteractions":n.setState.bind(n,"deactivated"),"request:userInputManager.allowPropagation":this.storeData.bind(n,"allowPropagation",true),"request:userInputManager.disAllowPropagation":this.storeData.bind(n,"allowPropagation",false)});if(!Sys.isEmpty(document.body)){for(o=-1;++o<i.length;){document.body.addEventListener(i[o],n.interactionEventHandlers.start,true)}for(o=-1;++o<k.length;){document.body.addEventListener(k[o],n.interactionEventHandlers.move,false)}for(o=-1;++o<m.length;){document.body.addEventListener(m[o],n.interactionEventHandlers.end,true)}if(Sys.isDefined(p[0])){for(o=-1;++o<p.length;){document.addEventListener(p[o],n.interactionEventHandlers.keyUp,false)}}if(Sys.isDefined(q[0])){for(o=-1;++o<q.length;){document.addEventListener(q[o],n.interactionEventHandlers.keyDown,false)}}if(Sys.isDefined(l[0])){for(o=-1;++o<l.length;){document.body.addEventListener(l[o],n.interactionEventHandlers.scroll,true)}}n.disableGestureEvents()}if(Sys.isInIFrame){n.iFrame=window}},setupData:function(){this.data={standardEvents:{start:"notify:userInputManager.userInputStarted",end:"notify:userInputManager.userInputEnded",move:"notify:userInputManager.userInputMove",hover:"notify:userInputManager.userInputHover",cancel:"notify:userInputManager.userInputCanceled",keyUp:"notify:userInputManager.userInputKeyUp",keyDown:"notify:userInputManager.userInputKeyDown",scroll:"notify:userInputManager.userInputScroll"},exclusiveEvents:{},allowPropagation:false,exclusiveQueue:[]}},activateExclusivity:function(i){var h=this,f=h.readData("exclusiveEvents"),g=h.readData("exclusiveQueue");if(h.readData("exclusivityRequested")){g.push(i)}else{if(h.readData("activeInteraction")){h.sendInputEvent("end",{clientX:-1,clientY:-1})}h.storeData("exclusivityRequested",true);h.setExclusiveEvents(i)}},deactivateExclusivity:function(k){var j=this,h,l=j.readData("exclusiveEvents"),i=j.readData("exclusiveQueue"),m;if(Sys.isString(k)&&l.requester===k){h=true}else{if(Sys.isObj(k)){h=true;Sys.iterate(k,function(b,a){if(l[b]!==a){h=false}})}}if(h){if(i.length>0){j.setExclusiveEvents(i.shift())}else{j.storeData("exclusivityRequested",false)}}else{m=i.indexOf(k);if(m>=0){i.splice(m,1)}}},setExclusiveEvents:function(c){var d;if(Sys.isString(c)){d={requester:c,start:"notify:userInputManager."+c+"ExclusiveStart",end:"notify:userInputManager."+c+"ExclusiveEnd",keyUp:"notify:userInputManager."+c+"ExclusiveKeyUp",keyDown:"notify:userInputManager."+c+"ExclusiveKeyDown",move:"notify:userInputManager."+c+"ExclusiveMove",hover:"notify:userInputManager."+c+"ExclusiveHover",cancel:"notify:userInputManager."+c+"ExclusiveCancel",scroll:"notify:userInputManager."+c+"ExclusiveScroll"}}else{d=c}this.storeData("exclusiveEvents",d)},checkPropagation:function(c){var d=(c.touches)?c.touches.length:1;if(this.readData("allowPropagation")&&d<2){return}this.preventPropagation(c)},preventPropagation:function(b){b.preventDefault();b.stopPropagation()},handleInteractionStart:function(i){var f=this,h,g=f.readData("activeInteraction");f.checkPropagation(i);if(f.isState("deactivated")||!Environment.isStartEvent(i)||Sys.isDefined(g)){return}h=Sys.UserInputUtils.getUserInputCoordinates(i);g={target:Sys.UserInputUtils.getDOMElementFromCoordinates(h)};if(i.type==="touchstart"){g.identifier=i.targetTouches[0].identifier}f.storeData("activeInteraction",g);if(Sys.isInIFrame){f.iFrame.focus()}f.sendInputEvent("start",i)},handleInteractionMove:function(i){var f=this,h=true,g=f.readData("activeInteraction");f.checkPropagation(i);if(f.isState("deactivated")||!Environment.isMoveEvent(i)){return}if(i.type==="touchmove"){h=f.isTouchInList(i.changedTouches,g.identifier)}if(h){f.sendInputEvent(Sys.isDefined(g)?"move":"hover",i)}},handleInteractionEnd:function(h){var i=this,g=false,f=i.readData("activeInteraction");i.checkPropagation(h);if(i.isState("deactivated")||!Sys.isDefined(f)||(!Environment.isEndEvent(h)&&!Environment.isCancelEvent(h))){return}if(Environment.isEndEvent(h)){if(h.type==="touchend"||h.type==="touchcancel"){g=i.isTouchInList(h.touches,f.identifier)}if(!g){i.storeData("activeInteraction",undefined);i.sendInputEvent("end",h)}}},handleInteractionScroll:function(g){var d=this,f=d.readData("activeInteraction");d.checkPropagation(g);if(d.isState("deactivated")||Sys.isDefined(f)||!Environment.isScrollEvent(g)){return}d.sendInputEvent("scroll",g)},handleInteractionKeyUp:function(g){var d=this,f=d.readData("activeInteraction");if(d.isState("deactivated")||Sys.isDefined(f)||!Environment.isKeyUpEvent(g)){return}d.sendInputEvent("keyUp",g)},handleInteractionKeyDown:function(g){var d=this,f=d.readData("activeInteraction");if(d.isState("deactivated")||Sys.isDefined(f)||!Environment.isKeyDownEvent(g)){return}d.sendInputEvent("keyDown",g)},isTouchInList:function(d,f){var g=false;Sys.each(d,function(a){if(a.identifier===f){g=true;return false}return true});return g},sendInputEvent:function(f,g){var d=this.getEvent(f);if(Sys.isDefined(d)){this.fireEvent(d,Sys.UserInputUtils.getUserInputCoordinates(g),g)}},getEvent:function(c){var d=this.readData("exclusivityRequested");return d?this.readData("exclusiveEvents")[c]:this.readData("standardEvents")[c]},disableGestureEvents:function(){var b=this;document.body.addEventListener("gesturestart",b.preventPropagation.bind(b),false);document.body.addEventListener("gesturechange",b.preventPropagation.bind(b),false);document.body.addEventListener("gestureend",b.preventPropagation.bind(b),false)},storeData:function(d,c){this.data[d]=c},readData:function(b){return this.data[b]},removeData:function(b){delete this.data[b]},setState:function(b){this.state=b},readState:function(){return this.state},isState:function(b){return b===this.state}};Sys.UserInput=Sys.extend(Sys.Observable,Sys.UserInput,"Sys.UserInput");UserInput=new Sys.UserInput();Sys.ns("Interface.utils");Interface.utils.UserInputBase={CSS:{},constructor:function(b){Interface.utils.UserInputBase.superclass.constructor.apply(this,arguments);this.init(b)},enable:function(){var b=this;b.enabled=true;b.startListeningToUserInput();b.container.removeCls(b.CSS.disabled)},disable:function(){var b=this;b.enabled=false;b.stopListeningToUserInput();b.container.addCls(b.CSS.disabled)},isEnabled:function(){return this.enabled},lock:function(c){var d=this;if(!d.locker.contains(c)){d.locker.push(c)}d.disable()},unlock:function(g){var f=this,d=f.locker.indexOf(g);if(d>=0){f.locker.splice(d,1)}if(!f.isLocked()){f.enable()}},isLocked:function(){return this.locker.length!==0},getContainer:function(){return this.container},init:function(d){var c=this;d=d||{};d.cls=Sys.isString(d.cls)?d.cls:"";c.id=d.id;c.locker=[];if(Sys.isDefined(d.CSS)){c.CSS=Sys.applyIf(d.CSS,c.CSS)}c.setupContainer(d);if(d.enabled){c.enable()}else{c.disable()}},onUserInputStart:function(){},onUserInputEnd:function(){},onUserInputMove:function(){},onUserInputCanceled:function(){},setupContainer:function(){var b=this;b.container=new Sys.Element({id:b.id,tag:"div",cls:b.CSS.base})},startListeningToUserInput:function(){var b=this;b.on({"notify:userInputManager.userInputStarted":b.onUserInputStart,"notify:userInputManager.userInputEnded":b.onUserInputEnd,"notify:userInputManager.userInputMove":b.onUserInputMove,"notify:userInputManager.userInputCanceled":b.onUserInputCanceled})},stopListeningToUserInput:function(){var b=this;b.removeListener("notify:userInputManager.userInputStarted");b.removeListener("notify:userInputManager.userInputEnded");b.removeListener("notify:userInputManager.userInputMove");b.removeListener("notify:userInputManager.userInputCanceled")},setValue:function(){}};Interface.utils.UserInputBase=Sys.extend(Sys.Observable,Interface.utils.UserInputBase,"Interface.utils.UserInputBase");Sys.ns("Interface.utils");Interface.utils.Button={CSS:{base:"button",pressed:"button_pressed",disabled:"button_disabled"},DEFAULT_USER_INPUT_EVENTS:{started:"notify:userInputManager.userInputStarted",ended:"notify:userInputManager.userInputEnded",move:"notify:userInputManager.userInputMove",canceled:"notify:userInputManager.userInputCanceled"},constructor:function(b){Interface.utils.Button.superclass.constructor.apply(this,arguments)},enable:function(){var b=this;b.enabled=true;b.container.removeCls(b.CSS.disabled);if(b.enableInteraction){b.startListeningToUserInput()}},disable:function(){var b=this;b.enabled=false;b.container.addCls(b.CSS.disabled);if(b.enableInteraction){b.stopListeningToUserInput()}},setText:function(b){this.label=b;this.container.el.textContent=b},getText:function(){return this.label},show:function(b){this.container.el.style.display=Sys.isDefined(b)?b:"block"},hide:function(){this.container.el.style.display="none"},init:function(d){var c=this;Interface.utils.Button.superclass.init.call(c,d);if(Sys.isDefined(d.userInputEvents)){c.userInputEvents=d.userInputEvents}else{c.userInputEvents=c.DEFAULT_USER_INPUT_EVENTS}c.clickCallback=d.clickCallback;c.enableInteraction=Sys.isDefined(c.clickCallback);if(d.hidden===true){c.hide()}if(Sys.isString(d.label)){c.setText(d.label)}},startListeningToUserInput:function(){var b=this;if(Sys.isDefined(b.userInputEvents.started)){b.addListener(b.userInputEvents.started,b.onUserInputStart)}if(Sys.isDefined(b.userInputEvents.started)){b.addListener(b.userInputEvents.ended,b.onUserInputEnd)}if(Sys.isDefined(b.userInputEvents.move)){b.addListener(b.userInputEvents.move,b.onUserInputMove)}if(Sys.isDefined(b.userInputEvents.canceled)){b.addListener(b.userInputEvents.canceled,b.onUserInputCanceled)}},stopListeningToUserInput:function(){var b=this;if(Sys.isDefined(b.userInputEvents.started)){b.removeListener(b.userInputEvents.started)}if(Sys.isDefined(b.userInputEvents.ended)){b.removeListener(b.userInputEvents.ended)}if(Sys.isDefined(b.userInputEvents.move)){b.removeListener(b.userInputEvents.move)}if(Sys.isDefined(b.userInputEvents.canceled)){b.removeListener(b.userInputEvents.canceled)}},onUserInputStart:function(c){var d=this;if(d.enabled&&Sys.UserInputUtils.isCoordinateTarget(d.container.el,c)){d.isActiveInputTarget=true;d.container.addCls(d.CSS.pressed)}},onUserInputEnd:function(c){var d=this;if(d.isActiveInputTarget&&Sys.UserInputUtils.isCoordinateTarget(d.container.el,c)){d.clickCallback()}d.onUserInputCanceled()},onUserInputCanceled:function(){this.isActiveInputTarget=false;this.container.removeCls(this.CSS.pressed)}};Interface.utils.Button=Sys.extend(Interface.utils.UserInputBase,Interface.utils.Button,"Interface.utils.Button");Sys.ns("Interface.utils");Interface.utils.InteractiveContainer={DEFAULT_BUTTON_TEXT:"Add Value",CSS:{base:"interface-interactiveContainer_base",disabled:"interface-interactiveContainer_disabled",label:"interface-interactiveContainer_label",button_wrapper:"interface-interactiveContainer_buttonWrapper",button:"interface-interactiveContainer_button"},constructor:function(b){Interface.utils.InteractiveContainer.superclass.constructor.apply(this,arguments)},init:function(d){var c=this;d=d||{};c.title=d.title;c.callback=d.callback;c.minValue=d.minValue;c.info=d.info||"";c.buttonText=d.buttonText||c.DEFAULT_BUTTON_TEXT;c.callback=d.callback||function(){};c.keyboardResult={};Interface.utils.InteractiveContainer.superclass.init.apply(c,arguments)},setMinValue:function(b){this.minValue=b},setupContainer:function(d){var c=this;c.container=new Sys.Element({id:c.id,tag:"div",cls:d.cls+" "+c.CSS.base});if(c.title){c.label=c.container.add(new Sys.Element({id:c.id+"_title",tag:"div",cls:c.CSS.label,textContent:c.title}))}c.buttonWrapper=c.container.add(new Sys.Element({id:c.id+"_button_wrapper",tag:"div",cls:c.CSS.button_wrapper}));c.addButton=c.buttonWrapper.add(new Sys.Element({id:c.id+"_button",tag:"div",cls:c.CSS.button+"",textContent:c.buttonText}))},setValue:function(f,i){var h=this,g;if(Sys.isNumber(f)){g={formattedInputField:Services.moneyManager.formatMoneyCurrencySign(Sys.utils.toInt(f),undefined,0),input:""+Sys.utils.toInt(f/100),value:Sys.utils.toInt(f/100),cents:f};if(i!==true){h.keyboardCallback(g)}else{h.keyboardResult=g;h.updateButtonText()}}},onUserInputStart:function(b){this.wasInitialInputTarget=Sys.UserInputUtils.isCoordinateTarget(this.buttonWrapper.el,b)&&this.enabled},onUserInputEnd:function(g){var d=this,f=Sys.UserInputUtils.isCoordinateTarget(d.buttonWrapper.el,g);if(f&&d.wasInitialInputTarget){d.requestKeyboard()}d.wasInitialInputTarget=false},click:function(){this.requestKeyboard()},requestKeyboard:function(){var b=this;b.fireEvent("request:keyboard.open",{info:b.info,label:b.title,okCallback:b.keyboardCallback.bind(b),cancelCallback:b.keyboardCallback.bind(b),minValue:b.minValue})},keyboardCallback:function(d){var c=this;if(Sys.isDefined(d)){c.keyboardResult=d}c.updateButtonText();c.callback(c.keyboardResult.cents||0)},updateButtonText:function(){var c=this,d=c.addButton;if(c.keyboardResult.value>0){d.el.textContent=c.keyboardResult.formattedInput;d.addCSSClass("interactive_pushed")}else{d.el.textContent=c.buttonText;d.removeCSSClass("interactive_pushed")}}};Interface.utils.InteractiveContainer=Sys.extend(Interface.utils.UserInputBase,Interface.utils.InteractiveContainer,"Interface.utils.InteractiveContainer");Sys.ns("Core");Core.Orientation={constructor:function(){var b=this;Core.Orientation.superclass.constructor.apply(b,arguments);b.setupEvents();b.setBodyOrientationClass()},isPortrait:function(){return this.getOrientation()==="PORTRAIT"},isLandscape:function(){return this.getOrientation()==="LANDSCAPE"},getOrientation:function(){if(Sys.isDefined(Environment.deviceOrientation)){return Environment.deviceOrientation}if(Platform.isDesktopDevice||Platform.isTabletDevice){return"LANDSCAPE"}if(Platform.isIOSDevice===true||Platform.isAndroidStockBrowser){if(Math.abs(window.orientation)===90){return"LANDSCAPE"}return"PORTRAIT"}if(window.innerHeight<=window.innerWidth){return"LANDSCAPE"}else{return"PORTRAIT"}},setupEvents:function(){var b=this;window.addEventListener("orientationchange",function(){b.onOrientationChange()},false);b.on({"notify:scaling.updated":b.onScalingUpdated})},onOrientationChange:function(){var f=this,h,i,g=100;clearInterval(f.orientationChecker);f.fireEvent("notify:orientation.change",f.getOrientation());f.setBodyOrientationClass();f.orientationChecker=setInterval(function(){if(window.innerWidth===h&&window.innerHeight===i){if(g===0){clearInterval(f.orientationChecker);f.fireEvent("notify:orientation.changed",f.getOrientation())}else{--g}}else{h=window.innerWidth;i=window.innerHeight;g=100}},0)},onScalingUpdated:function(){this.setBodyOrientationClass()},setBodyOrientationClass:function(){var f=Environment.getCurrentPlatformCSS(),d=this.getOrientation(),g=d==="PORTRAIT"?f+"_landscape":f+"_portrait";Sys.utils.replaceCSSClassOnBody(g,f+"_"+d.toLowerCase(),true)}};Core.Orientation=Sys.extend(Sys.Observable,Core.Orientation,"Core.Orientation");Sys.ns("Core");Core.Scaling={constructor:function(){var b=this;Core.Scaling.superclass.constructor.apply(b,arguments);b.scalingPrefix=b.getScalingPrefix();b.loaderHasClosed=false;b.setDocumentSize();b.setLoaderSize();b.setGameSize();b.addDocumentListeners();b.setupEvents();b.centerLoader(1)},setupEvents:function(){var b=this;b.on({"request:scaling.update":b.scale,"notify:orientation.change":b.onOrientationChange,"notify:orientation.changed":b.onOrientationChange,"notify:loader.closed":b.onLoaderClosed,pageVisibilityChanged_event:b.scale,"request:viewport.resize":b.scale})},scale:function(){var d=this,f=Services.orientation.getOrientation(),g=d.calculateScale();if(!d.loaderHasClosed){d.scaleLoader(g)}d.scaleGame(g);Environment.setScale(g);d.setDocumentSize();d.fireEvent("notify:viewport.scaled");d.fireEvent("notify:scaling.updated");d.fireEvent("notify:viewport."+f)},onOrientationChange:function(){this.scale()},calculateScale:function(){var f=Environment.getResolution(),i=this.getScreenSize(),h=i.height/f.height,g=i.width/f.width;return this.formatScaleValue(Math.min(g,h))},scaleGame:function(b){document.getElementById("viewport").style[this.scalingPrefix]="scale("+b+")";this.centerGame(b)},scaleLoader:function(c){var d=this.formatScaleValue(c*this.getLoaderScaleFactor());document.getElementById("loaderWrapper").style[this.scalingPrefix]="scale("+d+")";this.centerLoader(d)},getLoaderScaleFactor:function(){if(Environment.getCurrentPlatform()==="tablet"){if(Services.orientation.isPortrait()){return 0.9}else{return 0.6}}return 1},centerLoader:function(d){var c=document.getElementById("loaderWrapper");c.style.top=this.getVerticalOffset(d)+"px";c.style.left=this.getHorizontalOffset(d)+"px";window.scrollTo(0,0)},centerGame:function(h){var g=document.getElementById("viewport").style,f=Environment.resolutionProperties.portraitTopOffset,i;if(Services.orientation.isPortrait()&&Platform.isMobileDevice){i=Math.round(f*Environment.getResolution().height*h)+"px"}else{i=this.getVerticalOffset(h)+"px"}g.top=i;g.left=this.getHorizontalOffset(h)+"px";g.position="fixed";window.scrollTo(0,0)},getVerticalOffset:function(b){return Math.round((this.getScreenSize().height-(Environment.getResolution().height*b))/2)},getHorizontalOffset:function(b){return Math.round((this.getScreenSize().width-(Environment.getResolution().width*b))/2)},setDocumentSize:function(){var c=document.body.style,d=document.documentElement.style;d.width="100%";d.height="100%";if(Platform.isDesktopDevice){d.overflow="hidden"}c.width="100%";c.height="100%"},setGameSize:function(){this.setElementSize("viewport")},setLoaderSize:function(){this.setElementSize("loaderWrapper")},setElementSize:function(f){var d=Environment.getResolution(),g=document.getElementById(f).style;g.width=d.width+"px";g.height=d.height+"px";g[this.scalingPrefix+"Origin"]="0 0"},getScreenSize:function(){var c=window.innerWidth,d=window.innerHeight;return{width:c,height:d}},formatScaleValue:function(b){return parseFloat((b).toFixed(3))},getScalingPrefix:function(){return this.getTransformerName(document.body.style)},getTransformerName:function(b){if("webkitTransform" in b){return"webkitTransform"}else{if("transform" in b){return"transform"}else{if("mozTransform" in b){return"mozTransform"}}}},onLoaderClosed:function(){this.loaderHasClosed=true;document.body.style.backgroundColor="#131313";document.documentElement.style.backgroundColor="#131313";this.scale()},addDocumentListeners:function(){window.addEventListener("resize",this.scale.bind(this),false)}};Core.Scaling=Sys.extend(Sys.Observable,Core.Scaling,"Core.Scaling");(function(){if(Platform.isIOSDevice){var c=function(){var m=Resources.readData("deviceDetection"),q=Sys.utils.XMLHelper,n=q.getAttributeValue,a=q.findNode("deviceScreenSpecifications",q.findNode("root",m)),o=q.findAll("deviceSpecification",a),p=o.length,b,i;for(i=0;i<p;i++){b=o[i];if(window.screen.width===parseInt(n("width",b),10)&&window.screen.height===parseInt(n("height",b),10)&&window.devicePixelRatio===parseInt(n("devicePixelRatio",b),10)){return[parseInt(n("portraitViewportWidth",b),10),parseInt(n("portraitViewportHeight",b),10),parseInt(n("landscapeViewportWidth",b),10),parseInt(n("landscapeViewportHeight",b),10),parseInt(n("width",b),10),parseInt(n("height",b),10),parseInt(n("devicePixelRatio",b),10),n("model",b)]}}};var d=Core.Scaling.prototype.setupEvents;Sys.override(Core.Scaling,{setupEvents:function(){var a=this;d.call(a);a.on({"notify:resourceHandler.priorityListComplete":a.onDeviceDetectionLoaded})},onDeviceDetectionLoaded:function(){var a=c();if(!Sys.isDefined(a)||Environment.isIniFrame){return}Resources.storeData("screenSpecification",a);if(Platform.isMobileDevice&&Sys.isSafari){this.getScreenSize=this.getIOSScreenSize}if(Sys.isSafari&&!window.navigator.standalone&&a[7]==="iPhone 5 or 5s"){Sys.utils.addCSSClassToBody("iOS_ui")}},centerLoader:function(b){var h=this.getScreenSize(),a=document.getElementById("loaderWrapper"),i=this.getVerticalOffset(b);i=i-Math.round((h.height-window.innerHeight)/2);a.style.top=i+"px";a.style.left=this.getHorizontalOffset(b)+"px";window.scrollTo(0,0)},setDocumentSize:function(){var a=document.body.style,b=document.documentElement.style;b.width="100%";b.height="100%";b.overflow="hidden";a.width="100%";a.height="100%"},getIOSScreenSize:function(){var a,b;if(Services.orientation.isLandscape()){a=screen.height;b=screen.width}else{a=screen.width;b=screen.height}return{width:a,height:b}}})}}());if(Platform.isAndroidStockBrowser){var originalOnLoaderClose=Core.Scaling.prototype.onLoaderClosed,originalOnOrientationChange=Core.Scaling.prototype.onOrientationChange;Sys.override(Core.Scaling,{showPortraitMessage:function(){this.fireEvent("request:portraitMessage.show");document.getElementById("gameWrapper").style.display="none"},hidePortraitMessage:function(){this.fireEvent("request:portraitMessage.hide");document.getElementById("gameWrapper").style.display="block"},onOrientationChange:function(){if(Services.orientation.isPortrait()){this.showPortraitMessage()}else{this.hidePortraitMessage()}originalOnOrientationChange.call(this)},onLoaderClosed:function(){if(Services.orientation.isPortrait()){this.showPortraitMessage()}else{this.hidePortraitMessage()}originalOnLoaderClose.call(this)}})}(function(l){var j=Date.now||function(){return +new Date()};var m=60;var k=1000;var h={};var i=1;if(!l.core){l.core={effect:{}}}else{if(!core.effect){core.effect={}}}core.effect.Animate={requestAnimationFrame:(function(){var b=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame;var d=!!b;if(b&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(b.toString())){d=false}if(d){return function(n,o){b(n,o)}}var q=60;var p={};var f=0;var g=1;var a=null;var c=+new Date();return function(n,o){var s=g++;p[s]=n;f++;if(a===null){a=setInterval(function(){var r=+new Date();var v=p;p={};f=0;for(var w in v){if(v.hasOwnProperty(w)){v[w](r);c=r}}if(r-c>2500){clearInterval(a);a=null}},1000/q)}return s}})(),stop:function(a){var b=h[a]!=null;if(b){h[a]=null}return b},isRunning:function(a){return h[a]!=null},start:function(g,d,b,f,A,B){var y=j();var x=y;var C=0;var v=0;var z=i++;if(!B){B=document.body}if(z%20===0){var a={};for(var c in h){a[c]=true}h=a}var w=function(o){var n=o!==true;var p=j();if(!h[z]||(d&&!d(z))){h[z]=null;b&&b(m-(v/((p-y)/k)),z,false);return}if(n){var r=Math.round((p-x)/(k/m))-1;for(var q=0;q<Math.min(r,4);q++){w(true);v++}}if(f){C=(p-y)/f;if(C>1){C=1}}var s=A?A(C):C;if((g(s,p,n)===false||C===1)&&n){h[z]=null;b&&b(m-(v/((p-y)/k)),z,C===1||f==null)}else{if(n){x=p;core.effect.Animate.requestAnimationFrame(w,B)}}};h[z]=true;core.effect.Animate.requestAnimationFrame(w,B);return z}}})(this);var Scroller;(function(){var h=function(){};Scroller=function(a,c){this.__callback=a;this.options={scrollingX:true,scrollingY:true,animating:true,animationDuration:250,bouncing:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:0.5,maxZoom:3,speedMultiplier:1,scrollingComplete:h,penetrationDeceleration:0.03,penetrationAcceleration:0.08};for(var b in c){this.options[b]=c[b]}};var i=function(a){return(Math.pow((a-1),3)+1)};var k=function(a){if((a/=0.5)<1){return 0.5*Math.pow(a,3)}return 0.5*(Math.pow((a-2),3)+2)};var g={__isSingleTouch:false,__isTracking:false,__didDecelerationComplete:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(a,c,f,b){var d=this;if(a===+a){d.__clientWidth=a}if(c===+c){d.__clientHeight=c}if(f===+f){d.__contentWidth=f}if(b===+b){d.__contentHeight=b}d.__computeScrollMax();d.scrollTo(d.__scrollLeft,d.__scrollTop,true)},setPosition:function(a,b){var c=this;c.__clientLeft=a||0;c.__clientTop=b||0},setSnapSize:function(a,c){var b=this;b.__snapWidth=a;b.__snapHeight=c},activatePullToRefresh:function(f,a,b,c){var d=this;d.__refreshHeight=f;d.__refreshActivate=a;d.__refreshDeactivate=b;d.__refreshStart=c},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,true);if(this.__refreshStart){this.__refreshStart()}},finishPullToRefresh:function(){var a=this;a.__refreshActive=false;if(a.__refreshDeactivate){a.__refreshDeactivate()}a.scrollTo(a.__scrollLeft,a.__scrollTop,true)},getValues:function(){var a=this;return{left:a.__scrollLeft,top:a.__scrollTop,zoom:a.__zoomLevel}},getScrollMax:function(){var a=this;return{left:a.__maxScrollLeft,top:a.__maxScrollTop}},zoomTo:function(s,r,f,b,c){var a=this;if(!a.options.zooming){throw new Error("Zooming is not enabled!")}if(c){a.__zoomComplete=c}if(a.__isDecelerating){core.effect.Animate.stop(a.__isDecelerating);a.__isDecelerating=false}var p=a.__zoomLevel;if(f==null){f=a.__clientWidth/2}if(b==null){b=a.__clientHeight/2}s=Math.max(Math.min(s,a.options.maxZoom),a.options.minZoom);a.__computeScrollMax(s);var q=((f+a.__scrollLeft)*s/p)-f;var d=((b+a.__scrollTop)*s/p)-b;if(q>a.__maxScrollLeft){q=a.__maxScrollLeft}else{if(q<0){q=0}}if(d>a.__maxScrollTop){d=a.__maxScrollTop}else{if(d<0){d=0}}a.__publish(q,d,s,r)},zoomBy:function(c,d,f,b,a){var m=this;m.zoomTo(m.__zoomLevel*c,d,f,b,a)},scrollTo:function(a,b,d,c){var f=this;if(f.__isDecelerating){core.effect.Animate.stop(f.__isDecelerating);f.__isDecelerating=false}if(c!=null&&c!==f.__zoomLevel){if(!f.options.zooming){throw new Error("Zooming is not enabled!")}a*=c;b*=c;f.__computeScrollMax(c)}else{c=f.__zoomLevel}if(!f.options.scrollingX){a=f.__scrollLeft}else{if(f.options.paging){a=Math.round(a/f.__clientWidth)*f.__clientWidth}else{if(f.options.snapping){a=Math.round(a/f.__snapWidth)*f.__snapWidth}}}if(!f.options.scrollingY){b=f.__scrollTop}else{if(f.options.paging){b=Math.round(b/f.__clientHeight)*f.__clientHeight}else{if(f.options.snapping){b=Math.round(b/f.__snapHeight)*f.__snapHeight}}}a=Math.max(Math.min(f.__maxScrollLeft,a),0);b=Math.max(Math.min(f.__maxScrollTop,b),0);if(a===f.__scrollLeft&&b===f.__scrollTop){d=false}f.__publish(a,b,c,d)},scrollBy:function(a,b,d){var f=this;var c=f.__isAnimating?f.__scheduledLeft:f.__scrollLeft;var m=f.__isAnimating?f.__scheduledTop:f.__scrollTop;f.scrollTo(c+(a||0),m+(b||0),d)},doMouseZoom:function(b,f,c,d){var m=this;var a=b>0?0.97:1.03;return m.zoomTo(m.__zoomLevel*a,false,c-m.__clientLeft,d-m.__clientTop)},doTouchStart:function(a,d){if(a.length==null){throw new Error("Invalid touch list: "+a)}if(d instanceof Date){d=d.valueOf()}if(typeof d!=="number"){throw new Error("Invalid timestamp value: "+d)}var f=this;f.__interruptedAnimation=true;if(f.__isDecelerating){core.effect.Animate.stop(f.__isDecelerating);f.__isDecelerating=false;f.__interruptedAnimation=true}if(f.__isAnimating){core.effect.Animate.stop(f.__isAnimating);f.__isAnimating=false;f.__interruptedAnimation=true}var c,b;var m=a.length===1;if(m){c=a[0].pageX;b=a[0].pageY}else{c=Math.abs(a[0].pageX+a[1].pageX)/2;b=Math.abs(a[0].pageY+a[1].pageY)/2}f.__initialTouchLeft=c;f.__initialTouchTop=b;f.__zoomLevelStart=f.__zoomLevel;f.__lastTouchLeft=c;f.__lastTouchTop=b;f.__lastTouchMove=d;f.__lastScale=1;f.__enableScrollX=!m&&f.options.scrollingX;f.__enableScrollY=!m&&f.options.scrollingY;f.__isTracking=true;f.__didDecelerationComplete=false;f.__isDragging=!m;f.__isSingleTouch=m;f.__positions=[]},doTouchMove:function(J,K,G){if(J.length==null){throw new Error("Invalid touch list: "+J)}if(K instanceof Date){K=K.valueOf()}if(typeof K!=="number"){throw new Error("Invalid timestamp value: "+K)}var E=this;if(!E.__isTracking){return}var a,O;if(J.length===2){a=Math.abs(J[0].pageX+J[1].pageX)/2;O=Math.abs(J[0].pageY+J[1].pageY)/2}else{a=J[0].pageX;O=J[0].pageY}var L=E.__positions;if(E.__isDragging){var H=a-E.__lastTouchLeft;var I=O-E.__lastTouchTop;var B=E.__scrollLeft;var P=E.__scrollTop;var Q=E.__zoomLevel;if(G!=null&&E.options.zooming){var b=Q;Q=Q/E.__lastScale*G;Q=Math.max(Math.min(Q,E.options.maxZoom),E.options.minZoom);if(b!==Q){var C=a-E.__clientLeft;var M=O-E.__clientTop;B=((C+B)*Q/b)-C;P=((M+P)*Q/b)-M;E.__computeScrollMax(Q)}}if(E.__enableScrollX){B-=H*this.options.speedMultiplier;var D=E.__maxScrollLeft;if(B>D||B<0){if(E.options.bouncing){B+=(H/2*this.options.speedMultiplier)}else{if(B>D){B=D}else{B=0}}}}if(E.__enableScrollY){P-=I*this.options.speedMultiplier;var f=E.__maxScrollTop;if(P>f||P<0){if(E.options.bouncing){P+=(I/2*this.options.speedMultiplier);if(!E.__enableScrollX&&E.__refreshHeight!=null){if(!E.__refreshActive&&P<=-E.__refreshHeight){E.__refreshActive=true;if(E.__refreshActivate){E.__refreshActivate()}}else{if(E.__refreshActive&&P>-E.__refreshHeight){E.__refreshActive=false;if(E.__refreshDeactivate){E.__refreshDeactivate()}}}}}else{if(P>f){P=f}else{P=0}}}}if(L.length>60){L.splice(0,30)}L.push(B,P,K);E.__publish(B,P,Q)}else{var F=E.options.locking?3:0;var N=5;var c=Math.abs(a-E.__initialTouchLeft);var d=Math.abs(O-E.__initialTouchTop);E.__enableScrollX=E.options.scrollingX&&c>=F;E.__enableScrollY=E.options.scrollingY&&d>=F;L.push(E.__scrollLeft,E.__scrollTop,K);E.__isDragging=(E.__enableScrollX||E.__enableScrollY)&&(c>=N||d>=N);if(E.__isDragging){E.__interruptedAnimation=false}}E.__lastTouchLeft=a;E.__lastTouchTop=O;E.__lastTouchMove=K;E.__lastScale=G},doTouchEnd:function(s){if(s instanceof Date){s=s.valueOf()}if(typeof s!=="number"){throw new Error("Invalid timestamp value: "+s)}var a=this;if(!a.__isTracking){return}a.__isTracking=false;if(a.__isDragging){a.__isDragging=false;if(a.__isSingleTouch&&a.options.animating&&(s-a.__lastTouchMove)<=100){var f=a.__positions;var u=f.length-1;var d=u;for(var r=u;r>0&&f[r]>(a.__lastTouchMove-100);r-=3){d=r}if(d!==u){var b=f[u]-f[d];var v=a.__scrollLeft-f[d-2];var c=a.__scrollTop-f[d-1];a.__decelerationVelocityX=v/b*(1000/60);a.__decelerationVelocityY=c/b*(1000/60);var t=a.options.paging||a.options.snapping?4:1;if(Math.abs(a.__decelerationVelocityX)>t||Math.abs(a.__decelerationVelocityY)>t){if(!a.__refreshActive){a.__startDeceleration(s)}}}else{a.options.scrollingComplete()}}else{if((s-a.__lastTouchMove)>100){a.options.scrollingComplete()}}}if(!a.__isDecelerating){if(a.__refreshActive&&a.__refreshStart){a.__publish(a.__scrollLeft,-a.__refreshHeight,a.__zoomLevel,true);if(a.__refreshStart){a.__refreshStart()}}else{if(a.__interruptedAnimation||a.__isDragging){a.options.scrollingComplete()}a.scrollTo(a.__scrollLeft,a.__scrollTop,true,a.__zoomLevel);if(a.__refreshActive){a.__refreshActive=false;if(a.__refreshDeactivate){a.__refreshDeactivate()}}}}a.__positions.length=0},__publish:function(z,b,E,B){var D=this;var y=D.__isAnimating;if(y){core.effect.Animate.stop(y);D.__isAnimating=false}if(B&&D.options.animating){D.__scheduledLeft=z;D.__scheduledTop=b;D.__scheduledZoom=E;var x=D.__scrollLeft;var w=D.__scrollTop;var C=D.__zoomLevel;var a=z-x;var d=b-w;var f=E-C;var A=function(l,n,m){if(m){D.__scrollLeft=x+(a*l);D.__scrollTop=w+(d*l);D.__zoomLevel=C+(f*l);if(D.__callback){D.__callback(D.__scrollLeft,D.__scrollTop,D.__zoomLevel)}}};var c=function(l){return D.__isAnimating===l};var v=function(m,l,n){if(l===D.__isAnimating){D.__isAnimating=false}if(D.__didDecelerationComplete||n){D.options.scrollingComplete()}if(D.options.zooming){D.__computeScrollMax();if(D.__zoomComplete){D.__zoomComplete();D.__zoomComplete=null}}};D.__isAnimating=core.effect.Animate.start(A,c,v,D.options.animationDuration,y?i:k)}else{D.__scheduledLeft=D.__scrollLeft=z;D.__scheduledTop=D.__scrollTop=b;D.__scheduledZoom=D.__zoomLevel=E;if(D.__callback){D.__callback(z,b,E)}if(D.options.zooming){D.__computeScrollMax();if(D.__zoomComplete){D.__zoomComplete();D.__zoomComplete=null}}}},__computeScrollMax:function(a){var b=this;if(a==null){a=b.__zoomLevel}b.__maxScrollLeft=Math.max((b.__contentWidth*a)-b.__clientWidth,0);b.__maxScrollTop=Math.max((b.__contentHeight*a)-b.__clientHeight,0)},__startDeceleration:function(r){var a=this;if(a.options.paging){var s=Math.max(Math.min(a.__scrollLeft,a.__maxScrollLeft),0);var u=Math.max(Math.min(a.__scrollTop,a.__maxScrollTop),0);var b=a.__clientWidth;var d=a.__clientHeight;a.__minDecelerationScrollLeft=Math.floor(s/b)*b;a.__minDecelerationScrollTop=Math.floor(u/d)*d;a.__maxDecelerationScrollLeft=Math.ceil(s/b)*b;a.__maxDecelerationScrollTop=Math.ceil(u/d)*d}else{a.__minDecelerationScrollLeft=0;a.__minDecelerationScrollTop=0;a.__maxDecelerationScrollLeft=a.__maxScrollLeft;a.__maxDecelerationScrollTop=a.__maxScrollTop}var t=function(l,n,m){a.__stepThroughDeceleration(m)};var f=a.options.snapping?4:0.1;var c=function(){var l=Math.abs(a.__decelerationVelocityX)>=f||Math.abs(a.__decelerationVelocityY)>=f;if(!l){a.__didDecelerationComplete=true}return l};var q=function(m,l,n){a.__isDecelerating=false;if(a.__didDecelerationComplete){a.options.scrollingComplete()}};a.__isDecelerating=core.effect.Animate.start(t,c,q)},__stepThroughDeceleration:function(w){var b=this;var t=b.__scrollLeft+b.__decelerationVelocityX;var v=b.__scrollTop+b.__decelerationVelocityY;if(!b.options.bouncing){var u=Math.max(Math.min(b.__maxDecelerationScrollLeft,t),b.__minDecelerationScrollLeft);if(u!==t){t=u;b.__decelerationVelocityX=0}var f=Math.max(Math.min(b.__maxDecelerationScrollTop,v),b.__minDecelerationScrollTop);if(f!==v){v=f;b.__decelerationVelocityY=0}}if(w){b.__publish(t,v,b.__zoomLevel)}else{b.__scrollLeft=t;b.__scrollTop=v}if(!b.options.paging){var d=0.95;b.__decelerationVelocityX*=d;b.__decelerationVelocityY*=d}if(b.options.bouncing){var a=0;var c=0;var r=b.options.penetrationDeceleration;var s=b.options.penetrationAcceleration;if(t<b.__minDecelerationScrollLeft){a=b.__minDecelerationScrollLeft-t}else{if(t>b.__maxDecelerationScrollLeft){a=b.__maxDecelerationScrollLeft-t}}if(v<b.__minDecelerationScrollTop){c=b.__minDecelerationScrollTop-v}else{if(v>b.__maxDecelerationScrollTop){c=b.__maxDecelerationScrollTop-v}}if(a!==0){if(a*b.__decelerationVelocityX<=0){b.__decelerationVelocityX+=a*r}else{b.__decelerationVelocityX=a*s}}if(c!==0){if(c*b.__decelerationVelocityY<=0){b.__decelerationVelocityY+=c*r}else{b.__decelerationVelocityY=c*s}}}}};for(var j in g){Scroller.prototype[j]=g[j]}})();var dat=dat||{};dat.gui=dat.gui||{};dat.utils=dat.utils||{};dat.controllers=dat.controllers||{};dat.dom=dat.dom||{};dat.color=dat.color||{};dat.utils.css=(function(){return{load:function(f,g){g=g||document;var d=g.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=f;g.getElementsByTagName("head")[0].appendChild(d)},inject:function(d,g){g=g||document;var f=document.createElement("style");f.type="text/css";f.innerHTML=d;g.getElementsByTagName("head")[0].appendChild(f)}}})();dat.utils.common=(function(){var d=Array.prototype.forEach;var c=Array.prototype.slice;return{BREAK:{},extend:function(a){this.each(c.call(arguments,1),function(b){for(var g in b){if(!this.isUndefined(b[g])){a[g]=b[g]}}},this);return a},defaults:function(a){this.each(c.call(arguments,1),function(b){for(var g in b){if(this.isUndefined(a[g])){a[g]=b[g]}}},this);return a},compose:function(){var a=c.call(arguments);return function(){var g=c.call(arguments);for(var b=a.length-1;b>=0;b--){g=[a[b].apply(this,g)]}return g[0]}},each:function(a,b,i){if(!a){return}if(d&&a.forEach&&a.forEach===d){a.forEach(b,i)}else{if(a.length===a.length+0){for(var j=0,k=a.length;j<k;j++){if(j in a&&b.call(i,a[j],j)===this.BREAK){return}}}else{for(var j in a){if(b.call(i,a[j],j)===this.BREAK){return}}}}},defer:function(a){setTimeout(a,0)},toArray:function(a){if(a.toArray){return a.toArray()}return c.call(a)},isUndefined:function(a){return a===undefined},isNull:function(a){return a===null},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return a===false||a===true},isFunction:function(a){return Object.prototype.toString.call(a)==="[object Function]"}}})();dat.controllers.Controller=(function(d){var c=function(b,a){this.initialValue=b[a];this.domElement=document.createElement("div");this.object=b;this.property=a;this.__onChange=undefined;this.__onFinishChange=undefined};d.extend(c.prototype,{onChange:function(a){this.__onChange=a;return this},onFinishChange:function(a){this.__onFinishChange=a;return this},setValue:function(a){this.object[this.property]=a;if(this.__onChange){this.__onChange.call(this,a)}this.updateDisplay();return this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}});return c})(dat.utils.common);dat.dom.dom=(function(h){var j={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]};var k={};h.each(j,function(a,b){h.each(a,function(c){k[c]=b})});var i=/(\d+(\.\d+)?)px/;function m(a){if(a==="0"||h.isUndefined(a)){return 0}var b=a.match(i);if(!h.isNull(b)){return parseFloat(b[1])}return 0}var l={makeSelectable:function(a,b){if(a===undefined||a.style===undefined){return}a.onselectstart=b?function(){return false}:function(){};a.style.MozUserSelect=b?"auto":"none";a.style.KhtmlUserSelect=b?"auto":"none";a.unselectable=b?"on":"off"},makeFullscreen:function(a,c,b){if(h.isUndefined(c)){c=true}if(h.isUndefined(b)){b=true}a.style.position="absolute";if(c){a.style.left=0;a.style.right=0}if(b){a.style.top=0;a.style.bottom=0}},fakeEvent:function(f,q,d,g){d=d||{};var c=k[q];if(!c){throw new Error("Event type "+q+" not supported.")}var b=document.createEvent(c);switch(c){case"MouseEvents":var r=d.x||d.clientX||0;var s=d.y||d.clientY||0;b.initMouseEvent(q,d.bubbles||false,d.cancelable||true,window,d.clickCount||1,0,0,r,s,false,false,false,false,0,null);break;case"KeyboardEvents":var a=b.initKeyboardEvent||b.initKeyEvent;h.defaults(d,{cancelable:true,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:undefined,charCode:undefined});a(q,d.bubbles||false,d.cancelable,window,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.keyCode,d.charCode);break;default:b.initEvent(q,d.bubbles||false,d.cancelable||true);break}h.defaults(b,g);f.dispatchEvent(b)},bind:function(a,b,c,d){d=d||false;if(a.addEventListener){a.addEventListener(b,c,d)}else{if(a.attachEvent){a.attachEvent("on"+b,c)}}return l},unbind:function(a,b,c,d){d=d||false;if(a.removeEventListener){a.removeEventListener(b,c,d)}else{if(a.detachEvent){a.detachEvent("on"+b,c)}}return l},addClass:function(a,b){if(a.className===undefined){a.className=b}else{if(a.className!==b){var c=a.className.split(/ +/);if(c.indexOf(b)==-1){c.push(b);a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")}}}return l},removeClass:function(a,b){if(b){if(a.className===undefined){}else{if(a.className===b){a.removeAttribute("class")}else{var c=a.className.split(/ +/);var d=c.indexOf(b);if(d!=-1){c.splice(d,1);a.className=c.join(" ")}}}}else{a.className=undefined}return l},hasClass:function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||false},getWidth:function(a){var b=getComputedStyle(a);return m(b["border-left-width"])+m(b["border-right-width"])+m(b["padding-left"])+m(b["padding-right"])+m(b.width)},getHeight:function(a){var b=getComputedStyle(a);return m(b["border-top-width"])+m(b["border-bottom-width"])+m(b["padding-top"])+m(b["padding-bottom"])+m(b.height)},getOffset:function(b){var a={left:0,top:0};if(b.offsetParent){do{a.left+=b.offsetLeft;a.top+=b.offsetTop}while(b=b.offsetParent)}return a},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return l})(dat.utils.common);dat.controllers.OptionController=(function(i,h,g){var f=function(d,c,k){f.superclass.call(this,d,c);var a=this;this.__select=document.createElement("select");if(g.isArray(k)){var b={};g.each(k,function(j){b[j]=j});k=b}g.each(k,function(j,n){var o=document.createElement("option");o.innerHTML=n;o.setAttribute("value",j);a.__select.appendChild(o)});this.updateDisplay();h.bind(this.__select,"change",function(){var j=this.options[this.selectedIndex].value;a.setValue(j)});this.domElement.appendChild(this.__select)};f.superclass=i;g.extend(f.prototype,i.prototype,{setValue:function(b){var a=f.superclass.prototype.setValue.call(this,b);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}return a},updateDisplay:function(){this.__select.value=this.getValue();return f.superclass.prototype.updateDisplay.call(this)}});return f})(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.controllers.NumberController=(function(h,f){var i=function(c,b,a){i.superclass.call(this,c,b);a=a||{};this.__min=a.min;this.__max=a.max;this.__step=a.step;if(f.isUndefined(this.__step)){if(this.initialValue==0){this.__impliedStep=1}else{this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10}}else{this.__impliedStep=this.__step}this.__precision=g(this.__impliedStep)};i.superclass=h;f.extend(i.prototype,h.prototype,{setValue:function(a){if(this.__min!==undefined&&a<this.__min){a=this.__min}else{if(this.__max!==undefined&&a>this.__max){a=this.__max}}if(this.__step!==undefined&&a%this.__step!=0){a=Math.round(a/this.__step)*this.__step}return i.superclass.prototype.setValue.call(this,a)},min:function(a){this.__min=a;return this},max:function(a){this.__max=a;return this},step:function(a){this.__step=a;this.__impliedStep=a;this.__precision=g(a);return this}});function g(a){a=a.toString();if(a.indexOf(".")>-1){return a.length-a.indexOf(".")-1}else{return 0}}return i})(dat.controllers.Controller,dat.utils.common);dat.controllers.NumberControllerBox=(function(j,i,k){var g=function(s,a,t){this.__truncationSuspended=false;g.superclass.call(this,s,a,t);var d=this;var q;this.__input=document.createElement("input");this.__input.setAttribute("type","text");i.bind(this.__input,"change",c);i.bind(this.__input,"blur",u);i.bind(this.__input,"mousedown",b);i.bind(this.__input,"keydown",function(l){if(l.keyCode===13){d.__truncationSuspended=true;this.blur();d.__truncationSuspended=false}});function c(){var l=parseFloat(d.__input.value);if(!k.isNaN(l)){d.setValue(l)}}function u(){c();if(d.__onFinishChange){d.__onFinishChange.call(d,d.getValue())}}function b(l){i.bind(window,"mousemove",r);i.bind(window,"mouseup",f);q=l.clientY}function r(l){var m=q-l.clientY;d.setValue(d.getValue()+m*d.__impliedStep);q=l.clientY}function f(){i.unbind(window,"mousemove",r);i.unbind(window,"mouseup",f)}this.updateDisplay();this.domElement.appendChild(this.__input)};g.superclass=j;k.extend(g.prototype,j.prototype,{updateDisplay:function(){this.__input.value=this.__truncationSuspended?this.getValue():h(this.getValue(),this.__precision);return g.superclass.prototype.updateDisplay.call(this)}});function h(b,c){var a=Math.pow(10,c);return Math.round(b*a)/a}return g})(dat.controllers.NumberController,dat.dom.dom,dat.utils.common);var rawCssText="/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}",cssConverterElement=document.createElement("div");cssConverterElement.appendChild(document.createTextNode(rawCssText));dat.controllers.NumberControllerSlider=(function(n,l,j,i,k){var o=function(r,a,h,c,s){o.superclass.call(this,r,a,{min:h,max:c,step:s});var d=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");l.bind(this.__background,"mousedown",b);l.addClass(this.__background,"slider");l.addClass(this.__foreground,"slider-fg");function b(p){l.bind(window,"mousemove",g);l.bind(window,"mouseup",f);g(p)}function g(q){q.preventDefault();var p=l.getOffset(d.__background);var u=l.getWidth(d.__background);d.setValue(m(q.clientX,p.left,p.left+u,d.__min,d.__max));return false}function f(){l.unbind(window,"mousemove",g);l.unbind(window,"mouseup",f);if(d.__onFinishChange){d.__onFinishChange.call(d,d.getValue())}}this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)};o.superclass=n;o.useDefaultStyles=function(){j.inject(k)};i.extend(o.prototype,n.prototype,{updateDisplay:function(){var a=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=a*100+"%";return o.superclass.prototype.updateDisplay.call(this)}});function m(f,b,d,a,c){return a+(c-a)*((f-b)/(d-b))}return o})(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,cssConverterElement.innerHTML);dat.controllers.FunctionController=(function(f,i,g){var h=function(d,c,b){h.superclass.call(this,d,c);var a=this;this.__button=document.createElement("div");this.__button.innerHTML=b===undefined?"Fire":b;i.bind(this.__button,"click",function(k){k.preventDefault();a.fire();return false});i.addClass(this.__button,"button");this.domElement.appendChild(this.__button)};h.superclass=f;g.extend(h.prototype,f.prototype,{fire:function(){if(this.__onChange){this.__onChange.call(this)}if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}this.getValue().call(this.object)}});return h})(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.controllers.BooleanController=(function(i,h,g){var f=function(c,b){f.superclass.call(this,c,b);var a=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");h.bind(this.__checkbox,"change",d,false);this.domElement.appendChild(this.__checkbox);this.updateDisplay();function d(){a.setValue(!a.__prev)}};f.superclass=i;g.extend(f.prototype,i.prototype,{setValue:function(b){var a=f.superclass.prototype.setValue.call(this,b);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}this.__prev=this.getValue();return a},updateDisplay:function(){if(this.getValue()===true){this.__checkbox.setAttribute("checked","checked");this.__checkbox.checked=true}else{this.__checkbox.checked=false}return f.superclass.prototype.updateDisplay.call(this)}});return f})(dat.controllers.Controller,dat.dom.dom,dat.utils.common);dat.color.toString=(function(b){return function(a){if(a.a==1||b.isUndefined(a.a)){var d=a.hex.toString(16);while(d.length<6){d="0"+d}return"#"+d}else{return"rgba("+Math.round(a.r)+","+Math.round(a.g)+","+Math.round(a.b)+","+a.a+")"}}})(dat.utils.common);dat.color.interpret=(function(l,m){var i,j;var h=function(){j=false;var a=arguments.length>1?m.toArray(arguments):arguments[0];m.each(k,function(b){if(b.litmus(a)){m.each(b.conversions,function(c,d){i=c.read(a);if(j===false&&i!==false){j=i;i.conversionName=d;i.conversion=c;return m.BREAK}});return m.BREAK}});return j};var k=[{litmus:m.isString,conversions:{THREE_CHAR_HEX:{read:function(b){var a=b.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);if(a===null){return false}return{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:l},SIX_CHAR_HEX:{read:function(b){var a=b.match(/^#([A-F0-9]{6})$/i);if(a===null){return false}return{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:l},CSS_RGB:{read:function(b){var a=b.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(a===null){return false}return{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:l},CSS_RGBA:{read:function(b){var a=b.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);if(a===null){return false}return{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:l}}},{litmus:m.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:m.isArray,conversions:{RGB_ARRAY:{read:function(a){if(a.length!=3){return false}return{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){if(a.length!=4){return false}return{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:m.isObject,conversions:{RGBA_OBJ:{read:function(a){if(m.isNumber(a.r)&&m.isNumber(a.g)&&m.isNumber(a.b)&&m.isNumber(a.a)){return{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}}return false},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){if(m.isNumber(a.r)&&m.isNumber(a.g)&&m.isNumber(a.b)){return{space:"RGB",r:a.r,g:a.g,b:a.b}}return false},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){if(m.isNumber(a.h)&&m.isNumber(a.s)&&m.isNumber(a.v)&&m.isNumber(a.a)){return{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}}return false},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){if(m.isNumber(a.h)&&m.isNumber(a.s)&&m.isNumber(a.v)){return{space:"HSV",h:a.h,s:a.s,v:a.v}}return false},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return h})(dat.color.toString,dat.utils.common);rawCssText=".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 10; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";cssConverterElement=document.createElement("div");cssConverterElement.appendChild(document.createTextNode(rawCssText));dat.GUI=dat.gui.GUI=(function(W,U,at,au,aw,ac,am,aj,P,aa,ah,ap,ar,az,ai){W.inject(at);var Z="dg";var ab=72;var aq=20;var aA="Default";var aB=(function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}})();var ae;var O=true;var al;var T=false;var X=[];var av=function(g){var f=this;this.domElement=document.createElement("div");this.domElement.id="dat.gui";this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);az.addClass(this.domElement,Z);this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];g=g||{};g=ai.defaults(g,{autoPlace:true,width:av.DEFAULT_WIDTH});g=ai.defaults(g,{resizable:g.autoPlace,hideable:g.autoPlace});if(!ai.isUndefined(g.load)){if(g.preset){g.load.preset=g.preset}}else{g.load={preset:aA}}if(ai.isUndefined(g.parent)&&g.hideable){X.push(this)}g.resizable=ai.isUndefined(g.parent)&&g.resizable;if(g.autoPlace&&ai.isUndefined(g.scrollable)){g.scrollable=true}var c=aB&&localStorage.getItem(ak(this,"isLocal"))==="true";var h;Object.defineProperties(this,{parent:{get:function(){return g.parent}},scrollable:{get:function(){return g.scrollable}},autoPlace:{get:function(){return g.autoPlace}},preset:{get:function(){if(f.parent){return f.getRoot().preset}else{return g.load.preset}},set:function(l){if(f.parent){f.getRoot().preset=l}else{g.load.preset=l}ag(this);f.revert()}},width:{get:function(){return g.width},set:function(l){g.width=l;S(f,l)}},name:{get:function(){return g.name},set:function(l){g.name=l;if(j){j.innerHTML=g.name}}},closed:{get:function(){return g.closed},set:function(l){g.closed=l;if(g.closed){az.addClass(f.__ul,av.CLASS_CLOSED)}else{az.removeClass(f.__ul,av.CLASS_CLOSED)}this.onResize();if(f.__closeButton){f.__closeButton.innerHTML=l?av.TEXT_OPEN:av.TEXT_CLOSED}}},load:{get:function(){return g.load}},useLocalStorage:{get:function(){return c},set:function(l){if(aB){c=l;if(l){az.bind(window,"unload",h)}else{az.unbind(window,"unload",h)}localStorage.setItem(ak(f,"isLocal"),l)}}}});if(ai.isUndefined(g.parent)){g.closed=false;az.addClass(this.domElement,av.CLASS_MAIN);az.makeSelectable(this.domElement,false);if(aB){if(c){f.useLocalStorage=true;var k=localStorage.getItem(ak(this,"gui"));if(k){g.load=JSON.parse(k)}}}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=av.TEXT_CLOSED;az.addClass(this.__closeButton,av.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);az.bind(this.__closeButton,"click",function(){f.closed=!f.closed})}else{if(g.closed===undefined){g.closed=true}var j=document.createTextNode(g.name);az.addClass(j,"controller-name");var b=Y(f,j);var a=function(l){l.preventDefault();f.closed=!f.closed;return false};az.addClass(this.__ul,av.CLASS_CLOSED);az.addClass(b,"title");az.bind(b,"click",a);if(!g.closed){this.closed=false}}if(g.autoPlace){if(ai.isUndefined(g.parent)){if(O){al=document.createElement("div");az.addClass(al,Z);az.addClass(al,av.CLASS_AUTO_PLACE_CONTAINER);document.body.appendChild(al);O=false}al.appendChild(this.domElement);az.addClass(this.domElement,av.CLASS_AUTO_PLACE)}if(!this.parent){S(f,g.width)}}az.bind(window,"resize",function(){f.onResize()});az.bind(this.__ul,"webkitTransitionEnd",function(){f.onResize()});az.bind(this.__ul,"transitionend",function(){f.onResize()});az.bind(this.__ul,"oTransitionEnd",function(){f.onResize()});this.onResize();if(g.resizable){Q(this)}h=function(){if(aB&&localStorage.getItem(ak(f,"isLocal"))==="true"){localStorage.setItem(ak(f,"gui"),JSON.stringify(f.getSaveObject()))}};this.saveToLocalStorageIfPossible=h;var d=f.getRoot();function i(){var l=f.getRoot();l.width+=1;ai.defer(function(){l.width-=1})}if(!g.parent){i()}};av.toggleHide=function(){T=!T;ai.each(X,function(a){a.domElement.style.zIndex=T?-999:999;a.domElement.style.opacity=T?0:1})};av.CLASS_AUTO_PLACE="a";av.CLASS_AUTO_PLACE_CONTAINER="ac";av.CLASS_MAIN="main";av.CLASS_CONTROLLER_ROW="cr";av.CLASS_TOO_TALL="taller-than-window";av.CLASS_CLOSED="closed";av.CLASS_CLOSE_BUTTON="close-button";av.CLASS_DRAG="drag";av.DEFAULT_WIDTH=245;av.TEXT_CLOSED="Close Controls";av.TEXT_OPEN="Open Controls";az.bind(window,"keydown",function(a){if(document.activeElement.type!=="text"&&(a.which===ab||a.keyCode==ab)){av.toggleHide()}},false);ai.extend(av.prototype,{add:function(b,a){return ay(this,b,a,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(b,a){return ay(this,b,a,{color:true})},remove:function(b){this.__ul.removeChild(b.__li);this.__controllers.slice(this.__controllers.indexOf(b),1);var a=this;ai.defer(function(){a.onResize()})},destroy:function(){if(this.autoPlace){al.removeChild(this.domElement)}},addFolder:function(b){if(this.__folders[b]!==undefined){throw new Error('You already have a folder in this GUI by the name "'+b+'"')}var a={name:b,parent:this};a.autoPlace=this.autoPlace;if(this.load&&this.load.folders&&this.load.folders[b]){a.closed=this.load.folders[b].closed;a.load=this.load.folders[b]}var c=new av(a);this.__folders[b]=c;var d=Y(this,c.domElement);az.addClass(d,"folder");return c},open:function(){this.closed=false},close:function(){this.closed=true},onResize:function(){var c=this.getRoot();if(c.scrollable){var a=az.getOffset(c.__ul).top;var b=0;ai.each(c.__ul.childNodes,function(d){if(!(c.autoPlace&&d===c.__save_row)){b+=az.getHeight(d)}});if(window.innerHeight-a-aq<b){az.addClass(c.domElement,av.CLASS_TOO_TALL);c.__ul.style.height=window.innerHeight-a-aq+"px"}else{az.removeClass(c.domElement,av.CLASS_TOO_TALL);c.__ul.style.height="auto"}}if(c.__resize_handle){ai.defer(function(){c.__resize_handle.style.height=c.__ul.offsetHeight+"px"})}if(c.__closeButton){c.__closeButton.style.width=c.width+"px"}},remember:function(){if(ai.isUndefined(ae)){ae=new ar();ae.domElement.innerHTML=U}if(this.parent){throw new Error("You can only call remember on a top level GUI.")}var a=this;ai.each(Array.prototype.slice.call(arguments),function(b){if(a.__rememberedObjects.length==0){af(a)}if(a.__rememberedObjects.indexOf(b)==-1){a.__rememberedObjects.push(b)}});if(this.autoPlace){S(this,this.width)}},getRoot:function(){var a=this;while(a.parent){a=a.parent}return a},getSaveObject:function(){var a=this.load;a.closed=this.closed;if(this.__rememberedObjects.length>0){a.preset=this.preset;if(!a.remembered){a.remembered={}}a.remembered[this.preset]=V(this)}a.folders={};ai.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()});return a},save:function(){if(!this.load.remembered){this.load.remembered={}}this.load.remembered[this.preset]=V(this);an(this,false);this.saveToLocalStorageIfPossible()},saveAs:function(a){if(!this.load.remembered){this.load.remembered={};this.load.remembered[aA]=V(this,true)}this.load.remembered[a]=V(this);this.preset=a;ad(this,a,true);this.saveToLocalStorageIfPossible()},revert:function(a){ai.each(this.__controllers,function(b){if(!this.getRoot().load.remembered){b.setValue(b.initialValue)}else{ax(a||this.getRoot(),b)}},this);ai.each(this.__folders,function(b){b.revert(b)});if(!a){an(this.getRoot(),false)}},listen:function(b){var a=this.__listening.length==0;this.__listening.push(b);if(a){R(this.__listening)}}});function ay(h,f,b,g){if(f[b]===undefined){throw new Error("Object "+f+' has no property "'+b+'"')}var d;if(g.color){d=new ah(f,b)}else{var a=[f,b].concat(g.factoryArgs);d=au.apply(h,a)}if(g.before instanceof aw){g.before=g.before.__li}ax(h,d);az.addClass(d.domElement,"c");var j=document.createElement("span");az.addClass(j,"property-name");j.innerHTML=d.property;var i=document.createElement("div");i.appendChild(j);i.appendChild(d.domElement);var c=Y(h,i,g.before);az.addClass(c,av.CLASS_CONTROLLER_ROW);az.addClass(c,typeof d.getValue());ao(h,c,d);h.__controllers.push(d);return d}function Y(c,a,b){var d=document.createElement("li");if(a){d.appendChild(a)}if(b){c.__ul.insertBefore(d,params.before)}else{c.__ul.appendChild(d)}c.onResize();return d}function ao(c,f,d){d.__li=f;d.__gui=c;ai.extend(d,{options:function(g){if(arguments.length>1){d.remove();return ay(c,d.object,d.property,{before:d.__li.nextElementSibling,factoryArgs:[ai.toArray(arguments)]})}if(ai.isArray(g)||ai.isObject(g)){d.remove();return ay(c,d.object,d.property,{before:d.__li.nextElementSibling,factoryArgs:[g]})}},name:function(g){d.__li.firstElementChild.firstElementChild.innerHTML=g;return d},listen:function(){d.__gui.listen(d);return d},remove:function(){d.__gui.remove(d);return d}});if(d instanceof P){var a=new aj(d.object,d.property,{min:d.__min,max:d.__max,step:d.__step});ai.each(["updateDisplay","onChange","onFinishChange"],function(g){var i=d[g];var h=a[g];d[g]=a[g]=function(){var j=Array.prototype.slice.call(arguments);i.apply(d,j);return h.apply(a,j)}});az.addClass(f,"has-slider");d.domElement.insertBefore(a.domElement,d.domElement.firstElementChild)}else{if(d instanceof aj){var b=function(g){if(ai.isNumber(d.__min)&&ai.isNumber(d.__max)){d.remove();return ay(c,d.object,d.property,{before:d.__li.nextElementSibling,factoryArgs:[d.__min,d.__max,d.__step]})}return g};d.min=ai.compose(b,d.min);d.max=ai.compose(b,d.max)}else{if(d instanceof ac){az.bind(f,"click",function(){az.fakeEvent(d.__checkbox,"click")});az.bind(d.__checkbox,"click",function(g){g.stopPropagation()})}else{if(d instanceof am){az.bind(f,"click",function(){az.fakeEvent(d.__button,"click")});az.bind(f,"mouseover",function(){az.addClass(d.__button,"hover")});az.bind(f,"mouseout",function(){az.removeClass(d.__button,"hover")})}else{if(d instanceof ah){az.addClass(f,"color");d.updateDisplay=ai.compose(function(g){f.style.borderLeftColor=d.__color.toString();return g},d.updateDisplay);d.updateDisplay()}}}}}d.setValue=ai.compose(function(g){if(c.getRoot().__preset_select&&d.isModified()){an(c.getRoot(),true)}return g},d.setValue)}function ax(g,h){var i=g.getRoot();var a=i.__rememberedObjects.indexOf(h.object);if(a!=-1){var d=i.__rememberedObjectIndecesToControllers[a];if(d===undefined){d={};i.__rememberedObjectIndecesToControllers[a]=d}d[h.property]=h;if(i.load&&i.load.remembered){var f=i.load.remembered;var c;if(f[g.preset]){c=f[g.preset]}else{if(f[aA]){c=f[aA]}else{return}}if(c[a]&&c[a][h.property]!==undefined){var b=c[a][h.property];h.initialValue=b;h.setValue(b)}}}}function ak(b,a){return document.location.href+"."+a}function af(j){var m=j.__save_row=document.createElement("li");az.addClass(j.domElement,"has-save");j.__ul.insertBefore(m,j.__ul.firstChild);az.addClass(m,"save-row");var k=document.createElement("span");k.innerHTML="&nbsp;";az.addClass(k,"button gears");var i=document.createElement("span");i.innerHTML="Save";az.addClass(i,"button");az.addClass(i,"save");var f=document.createElement("span");f.innerHTML="New";az.addClass(f,"button");az.addClass(f,"save-as");var h=document.createElement("span");h.innerHTML="Revert";az.addClass(h,"button");az.addClass(h,"revert");var a=j.__preset_select=document.createElement("select");if(j.load&&j.load.remembered){ai.each(j.load.remembered,function(n,o){ad(j,o,o==j.preset)})}else{ad(j,aA,false)}az.bind(a,"change",function(){for(var n=0;n<j.__preset_select.length;n++){j.__preset_select[n].innerHTML=j.__preset_select[n].value}j.preset=this.value});m.appendChild(a);m.appendChild(k);m.appendChild(i);m.appendChild(f);m.appendChild(h);if(aB){var b=document.getElementById("dg-save-locally");var g=document.getElementById("dg-local-explain");b.style.display="block";var d=document.getElementById("dg-local-storage");if(localStorage.getItem(ak(j,"isLocal"))==="true"){d.setAttribute("checked","checked")}function l(){g.style.display=j.useLocalStorage?"block":"none"}l();az.bind(d,"change",function(){j.useLocalStorage=!j.useLocalStorage;l()})}var c=document.getElementById("dg-new-constructor");az.bind(c,"keydown",function(n){if(n.metaKey&&(n.which===67||n.keyCode==67)){ae.hide()}});az.bind(k,"click",function(){c.innerHTML=JSON.stringify(j.getSaveObject(),undefined,2);ae.show();c.focus();c.select()});az.bind(i,"click",function(){j.save()});az.bind(f,"click",function(){var n=prompt("Enter a new preset name.");if(n){j.saveAs(n)}});az.bind(h,"click",function(){j.revert()})}function Q(c){c.__resize_handle=document.createElement("div");ai.extend(c.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var d;az.bind(c.__resize_handle,"mousedown",f);az.bind(c.__closeButton,"mousedown",f);c.domElement.insertBefore(c.__resize_handle,c.domElement.firstElementChild);function f(g){g.preventDefault();d=g.clientX;az.addClass(c.__closeButton,av.CLASS_DRAG);az.bind(window,"mousemove",a);az.bind(window,"mouseup",b);return false}function a(g){g.preventDefault();c.width+=d-g.clientX;c.onResize();d=g.clientX;return false}function b(){az.removeClass(c.__closeButton,av.CLASS_DRAG);az.unbind(window,"mousemove",a);az.unbind(window,"mouseup",b)}}function S(a,b){a.domElement.style.width=b+"px";if(a.__save_row&&a.autoPlace){a.__save_row.style.width=b+"px"}if(a.__closeButton){a.__closeButton.style.width=b+"px"}}function V(c,b){var a={};ai.each(c.__rememberedObjects,function(d,g){var h={};var f=c.__rememberedObjectIndecesToControllers[g];ai.each(f,function(j,i){h[i]=b?j.initialValue:j.getValue()});a[g]=h});return a}function ad(d,c,a){var b=document.createElement("option");b.innerHTML=c;b.value=c;d.__preset_select.appendChild(b);if(a){d.__preset_select.selectedIndex=d.__preset_select.length-1}}function ag(b){for(var a=0;a<b.__preset_select.length;a++){if(b.__preset_select[a].value==b.preset){b.__preset_select.selectedIndex=a}}}function an(c,b){var a=c.__preset_select[c.__preset_select.selectedIndex];if(b){a.innerHTML=a.value+"*"}else{a.innerHTML=a.value}}function R(a){if(a.length!=0){ap(function(){R(a)})}ai.each(a,function(b){b.updateDisplay()})}return av})(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',cssConverterElement.innerHTML,dat.controllers.factory=(function(m,o,n,j,k,l,i){return function(b,a){var c=b[a];if(i.isArray(arguments[2])||i.isObject(arguments[2])){return new m(b,a,arguments[2])}if(i.isNumber(c)){if(i.isNumber(arguments[2])&&i.isNumber(arguments[3])){return new n(b,a,arguments[2],arguments[3])}else{return new o(b,a,{min:arguments[2],max:arguments[3]})}}if(i.isString(c)){return new j(b,a)}if(i.isFunction(c)){return new k(b,a,"")}if(i.isBoolean(c)){return new l(b,a)}}})(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=(function(i,h,f){var g=function(d,b){g.superclass.call(this,d,b);var a=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");h.bind(this.__input,"keyup",k);h.bind(this.__input,"change",k);h.bind(this.__input,"blur",c);h.bind(this.__input,"keydown",function(j){if(j.keyCode===13){this.blur()}});function k(){a.setValue(a.__input.value)}function c(){if(a.__onFinishChange){a.__onFinishChange.call(a,a.getValue())}}this.updateDisplay();this.domElement.appendChild(this.__input)};g.superclass=i;f.extend(g.prototype,i.prototype,{updateDisplay:function(){if(!h.isActive(this.__input)){this.__input.value=this.getValue()}return g.superclass.prototype.updateDisplay.call(this)}});return g})(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=(function(q,p,s,r,n){var o=function(f,u){o.superclass.call(this,f,u);this.__color=new s(this.getValue());this.__temp=new s(0);var b=this;this.domElement=document.createElement("div");p.makeSelectable(this.domElement,false);this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");this.__input.type="text";this.__input_textShadow="0 1px 1px ";p.bind(this.__input,"keydown",function(t){if(t.keyCode===13){i.call(this)}});p.bind(this.__input,"blur",i);p.bind(this.__selector,"mousedown",function(t){p.addClass(this,"drag").bind(window,"mouseup",function(w){p.removeClass(b.__selector,"drag")})});var d=document.createElement("div");n.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});n.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<0.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});n.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});n.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});n.extend(d.style,{width:"100%",height:"100%",background:"none"});m(d,"top","rgba(0,0,0,0)","#000");n.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});k(this.__hue_field);n.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});p.bind(this.__saturation_field,"mousedown",a);p.bind(this.__field_knob,"mousedown",a);p.bind(this.__hue_field,"mousedown",function(t){c(t);p.bind(window,"mousemove",c);p.bind(window,"mouseup",h)});function a(t){g(t);p.bind(window,"mousemove",g);p.bind(window,"mouseup",j)}function j(){p.unbind(window,"mousemove",g);p.unbind(window,"mouseup",j)}function i(){var t=r(this.value);if(t!==false){b.__color.__state=t;b.setValue(b.__color.toOriginal())}else{this.value=b.__color.toString()}}function h(){p.unbind(window,"mousemove",c);p.unbind(window,"mouseup",h)}this.__saturation_field.appendChild(d);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay();function g(B){B.preventDefault();var w=p.getWidth(b.__saturation_field);var v=p.getOffset(b.__saturation_field);var C=(B.clientX-v.left+document.body.scrollLeft)/w;var t=1-(B.clientY-v.top+document.body.scrollTop)/w;if(t>1){t=1}else{if(t<0){t=0}}if(C>1){C=1}else{if(C<0){C=0}}b.__color.v=t;b.__color.s=C;b.setValue(b.__color.toOriginal());return false}function c(y){y.preventDefault();var z=p.getHeight(b.__hue_field);var t=p.getOffset(b.__hue_field);var A=1-(y.clientY-t.top+document.body.scrollTop)/z;if(A>1){A=1}else{if(A<0){A=0}}b.__color.h=A*360;b.setValue(b.__color.toOriginal());return false}};o.superclass=q;n.extend(o.prototype,q.prototype,{updateDisplay:function(){var b=r(this.getValue());if(b!==false){var c=false;n.each(s.COMPONENTS,function(f){if(!n.isUndefined(b[f])&&!n.isUndefined(this.__color.__state[f])&&b[f]!==this.__color.__state[f]){c=true;return{}}},this);if(c){n.extend(this.__color.__state,b)}}n.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var d=(this.__color.v<0.5||this.__color.s>0.5)?255:0;var a=255-d;n.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+d+","+d+","+d+")"});this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px";this.__temp.s=1;this.__temp.v=1;m(this.__saturation_field,"left","#fff",this.__temp.toString());n.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+d+","+d+","+d+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];function m(d,b,a,c){d.style.background="";n.each(l,function(f){d.style.cssText+="background: "+f+"linear-gradient("+b+", "+a+" 0%, "+c+" 100%); "})}function k(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}return o})(dat.controllers.Controller,dat.dom.dom,dat.color.Color=(function(r,l,q,m){var s=function(){this.__state=r.apply(this,arguments);if(this.__state===false){throw"Failed to interpret color arguments"}this.__state.a=this.__state.a||1};s.COMPONENTS=["r","g","b","h","s","v","hex","a"];m.extend(s.prototype,{toString:function(){return q(this)},toOriginal:function(){return this.__state.conversion.write(this)}});n(s.prototype,"r",2);n(s.prototype,"g",1);n(s.prototype,"b",0);k(s.prototype,"h");k(s.prototype,"s");k(s.prototype,"v");Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}});Object.defineProperty(s.prototype,"hex",{get:function(){if(!this.__state.space!=="HEX"){this.__state.hex=l.rgb_to_hex(this.r,this.g,this.b)}return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});function n(a,b,c){Object.defineProperty(a,b,{get:function(){if(this.__state.space==="RGB"){return this.__state[b]}o(this,b,c);return this.__state[b]},set:function(d){if(this.__state.space!=="RGB"){o(this,b,c);this.__state.space="RGB"}this.__state[b]=d}})}function k(a,b){Object.defineProperty(a,b,{get:function(){if(this.__state.space==="HSV"){return this.__state[b]}p(this);return this.__state[b]},set:function(c){if(this.__state.space!=="HSV"){p(this);this.__state.space="HSV"}this.__state[b]=c}})}function o(c,a,b){if(c.__state.space==="HEX"){c.__state[a]=l.component_from_hex(c.__state.hex,b)}else{if(c.__state.space==="HSV"){m.extend(c.__state,l.hsv_to_rgb(c.__state.h,c.__state.s,c.__state.v))}else{throw"Corrupted color state"}}}function p(a){var b=l.rgb_to_hsv(a.r,a.g,a.b);m.extend(a.__state,{s:b.s,v:b.v});if(!m.isNaN(b.h)){a.__state.h=b.h}else{if(m.isUndefined(a.__state.h)){a.__state.h=0}}}return s})(dat.color.interpret,dat.color.math=(function(){var b;return{hsv_to_rgb:function(p,a,f){var q=Math.floor(p/60)%6;var o=p/60-Math.floor(p/60);var r=f*(1-a);var s=f*(1-(o*a));var c=f*(1-((1-o)*a));var h=[[f,c,r],[s,f,r],[r,f,c],[r,s,f],[c,r,f],[f,r,s]][q];return{r:h[0]*255,g:h[1]*255,b:h[2]*255}},rgb_to_hsv:function(g,h,q){var p=Math.min(g,h,q),r=Math.max(g,h,q),a=r-p,n,o;if(r!=0){o=a/r}else{return{h:NaN,s:0,v:0}}if(g==r){n=(h-q)/a}else{if(h==r){n=2+(q-g)/a}else{n=4+(g-h)/a}}n/=6;if(n<0){n+=1}return{h:n*360,s:o,v:r/255}},rgb_to_hex:function(a,g,j){var i=this.hex_with_component(0,2,a);i=this.hex_with_component(i,1,g);i=this.hex_with_component(i,0,j);return i},component_from_hex:function(d,a){return(d>>(a*8))&255},hex_with_component:function(g,a,f){return f<<(b=a*8)|(g&~(255<<b))}}})(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=(function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c,d){window.setTimeout(c,1000/60)}})(),dat.dom.CenteredDiv=(function(h,i){var f=function(){this.backgroundElement=document.createElement("div");i.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"});h.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=document.createElement("div");i.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var a=this;h.bind(this.backgroundElement,"click",function(){a.hide()})};f.prototype.show=function(){var a=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();i.defer(function(){a.backgroundElement.style.opacity=1;a.domElement.style.opacity=1;a.domElement.style.webkitTransform="scale(1)"})};f.prototype.hide=function(){var a=this;var b=function(){a.domElement.style.display="none";a.backgroundElement.style.display="none";h.unbind(a.domElement,"webkitTransitionEnd",b);h.unbind(a.domElement,"transitionend",b);h.unbind(a.domElement,"oTransitionEnd",b)};h.bind(this.domElement,"webkitTransitionEnd",b);h.bind(this.domElement,"transitionend",b);h.bind(this.domElement,"oTransitionEnd",b);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};f.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-h.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-h.getHeight(this.domElement)/2+"px"};function g(a){}return f})(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);Sys.ns("Layering");Layering.Game={Background:{image:0},Logo:{image:5},ResourceLoader:{fade:50,spinner:51},Movie:{video:50,button:51}};Sys.ns("Layering.Game");Layering.Game.Slots={BigWin:{text:20},CoinWin:{background:15,text:16},FreeSpinSymbolAttentionAnimation:{animationItems:2},FreeSpinAdditional:{text:20},FreeSpinCountDown:{text:20},FreeSpinIntro:{skip:121,background:122,button:123,text:124},FreeSpinOutro:{background:120,backgroundImage:121,button:122,text:123},Keypad:{background_basic:3,background_freespin:35,bet:4,balance:4,win:36,total_win:36,betLevelSelector:5,coinValueSelector:5,maxBet:{button:5,label:6},autoPlay:{button:5,label:6},paytable:{button:5,label:6}},QuickStop:{flash:25},Spin:{"default":{symbols:1},symbols:1},SpreadingWild:{symbols:5},StickySymbols:{symbols:5},WinningSymbols:{animationItems:10},WinSituationsDisplay:{hoverBetlines:21,betlines:20,betlineNumberHighlight:20}};Sys.ns("Core");Core.DeviceDetectionCodes={WHITE:0,GREY_OS:1,GREY_OS_VERSION:2,GREY_BROWSER:3,GREY_BROWSER_VERSION:4,BLACK_OS:5,BLACK_OS_VERSION:6,BLACK_BROWSER:7,BLACK_BROWSER_VERSION:8};Core.DeviceDetectionService=(function(){var k=function(b,c,a){var f=new RegExp(c),d=f.exec(b),m;if(!(d&&d.length>0)){throw new Error("Could not find a matching version")}m=d[1];if(a){m=m.replace(new RegExp(a,"g"),".")}if(!Core._DeviceDetectionUtils.isVersionNumber(m)){throw new Error("The match found is not a valid version")}return m};var j=function(a,y,b){var f=Object.keys(y),d=f.length,z,x,v,u,t,c,w;for(w=0;w<d;w++){z=y[f[w]];x=b[f[w]];u=false;v=new RegExp(x.matchPattern);if(x.excludePattern){u=(new RegExp(x.excludePattern)).test(a)}if(v.test(a)&&!u){if(z.version){t=k(a,x.version.matchPattern,x.version.separator);c=Core._DeviceDetectionUtils.isInRange(t,z.version.min,z.version.max)}else{c=true}return{name:f[w],inRange:c}}}return null};var h=function(a,q){var o=q.definitions.operatingSystems,b=q.ruleSets.white||{},d=j(a,b,o),c,f,p={};if(d){p.allowed=true;p.preferredBrowser=o[d.name].preferredBrowser;if(!d.inRange){p.code=Core.DeviceDetectionCodes.GREY_OS_VERSION;return p}f=b[d.name].browsers;c=j(a,f||{},q.definitions.browsers);if(!f){p.code=Core.DeviceDetectionCodes.WHITE}else{if(c){if(!c.inRange){p.code=Core.DeviceDetectionCodes.GREY_BROWSER_VERSION}else{p.code=Core.DeviceDetectionCodes.WHITE}}else{p.code=Core.DeviceDetectionCodes.GREY_BROWSER}}}return p};var i=function(b,t){var u=t.definitions.operatingSystems,d=t.ruleSets.black||{},c=j(b,d,u),q,r,s,f,a={};if(c&&c.inRange){q=d[c.name];r=q.browsers;s=j(b,r||{},t.definitions.browsers);if(s&&s.inRange){f=r[s.name];a.preferredBrowser=u[c.name].preferredBrowser;a.allowed=false;if(!f.version){a.code=Core.DeviceDetectionCodes.BLACK_BROWSER}else{a.code=Core.DeviceDetectionCodes.BLACK_BROWSER_VERSION}}else{if(!q.version){a.allowed=false;a.code=Core.DeviceDetectionCodes.BLACK_OS}else{if(!r){a.allowed=false;a.code=Core.DeviceDetectionCodes.BLACK_OS_VERSION}}}}return a};var g=function(b,a){var c={preferredBrowser:null,allowed:true,code:Core.DeviceDetectionCodes.GREY_OS};Sys.applyProperties(c,h(b,a));Sys.applyProperties(c,i(b,a));return c};return{validate:function(b,a){if(!Sys.isString(b)){throw new Error("Could not validate the device since the user agent was not a string")}if(!Sys.isObj(a)){throw new Error("Could not validate the device since the configuration was not an object")}return g(b,a)}}}());Sys.ns("Core");Core._DeviceDetectionUtils=(function(){return{isVersionNumber:function(b){return(/^\d+(\.\d+){0,2}$/).test(b)},compareVersions:function(n,o){if(!Core._DeviceDetectionUtils.isVersionNumber(n)||!Core._DeviceDetectionUtils.isVersionNumber(o)){throw new Error("The versions provided are not valid versions")}var m,a,l,b=n.split(".").map(parseFloat),i=o.split(".").map(parseFloat);while(b.length<i.length){b.push(0)}while(i.length<b.length){i.push(0)}for(m=0;m<b.length;m++){a=b[m];l=i[m];if(a===l){continue}return a<l?-1:1}return 0},isInRange:function(g,j,h){var i=true,k=true;if(j&&Core._DeviceDetectionUtils.compareVersions(g,j)<0){i=false}if(h&&Core._DeviceDetectionUtils.compareVersions(g,h)>0){k=false}return i&&k}}}());Sys.ns("Sys.utils");Sys.utils.XMLHelper={getNodeValue:function(g,d){if(d.getElementsByTagName){var f=d.getElementsByTagName(g);if(f.length>0){return f[0].textContent}}return null},findNode:function(g,d){if(d.getElementsByTagName){var f=d.getElementsByTagName(g);if(f.length>0){return f[0]}}return null},findAll:function(g,d){var f=[];if(!Sys.isEmpty(d)){if(d.getElementsByTagName){f=d.getElementsByTagName(g)}}return f},getAttributeValue:function(c,d){if(d.attributes){if(d.hasAttribute(c)){return d.attributes.getNamedItem(c).value}}return null},toJSON:function(l){var j={tag:l.nodeName};var k,i;if(l.hasChildNodes()){j.children=[];for(k=0;k<l.childNodes.length;k++){i=l.childNodes.item(k);if(i.nodeType===1){j.children.push(Sys.utils.XMLHelper.toJSON(i))}else{if(i.nodeType===3){j.text=i.nodeValue.replace(/^\s+|\s+$/g,"")}}}}if(l.attributes){j.attributes={};var m=l.attributes.length;var a;for(k=0;k<m;k++){a=l.attributes[k];j.attributes[a.nodeName]=a.nodeValue}}j.find=function(c){var b=[];Sys.each(j.children,function(d){if(d.tag===c){b.push(d)}});return b[0]||null};j.findAll=function(b){var c=[];Sys.each(j.children,function(d){if(d.tag===b){c.push(d)}});return c};return j},getMoneyFormatFromXML:function(m,i){var h=Sys.utils.XMLHelper.findAll("moneyformat",m),k=h.length,j,l;for(l=-1;++l<k;){j=Sys.utils.XMLHelper.getNodeValue("iso",h[l]);if(j===i){return Sys.utils.XMLHelper.getMoneyFormatFromNode(h[l])}}},getMoneyFormatFromNode:function(g){var j={},i,h,k;i=Sys.utils.XMLHelper.findNode("dividers",g);j.thousandsDivider=Sys.utils.XMLHelper.getAttributeValue("thousands",i);j.decimalDivider=Sys.utils.XMLHelper.getAttributeValue("decimal",i);h=Sys.utils.XMLHelper.findNode("curchar",g);j.currencyChar=h.textContent;j.isCurrCharAfter=(Sys.utils.XMLHelper.getAttributeValue("after",h)==="true");k=Sys.utils.XMLHelper.findNode("iso",g);j.iso=k.textContent;return j}};Sys.ns("Sys.utils");Sys.utils.FunctionQueuer={constructor:function(){var b=this;Sys.utils.FunctionQueuer.superclass.constructor.apply(this,arguments);b.q=[];b.executing=false;b.debug=false},queue:function(h){var g=h.args||[];if(!Sys.isArray(g)){g=[g]}var i=h.waitForEvents||[];var k=h.waitForObjects||[];if(!Sys.isArray(i)){i=[i]}var j={obj:h.obj,fun:h.fn,event:h.endEvent,args:g,we:i,wo:h.waitForObject||h.obj,wos:{totalEventsCount:0,waitForObjects:k}};if(i.length||k.length){this.createWaiters(j)}this.q.push(j);this.processQueue()},execute:function(g){var d=this;d.executing=true;var f=function(){if(d.debug){}g.obj.removeListener(g.event,f,d);d.executing=false;d.processQueue()};g.obj.on(g.event,f,d);g.fun.apply(g.obj,g.args)},processQueue:function(){var i=this,h,g,f;if(!i.executing&&i.q.length){g=i.q[0].wos;f=g.waitForObjects.length!==0;if((i.q[0].we.length===0&&!f)||(f&&g.totalEventsCount===0)){h=i.q.shift();i.execute(h)}else{if(i.debug){if(Sys.isDefined(i.q[0].wos)){}}}}else{if(i.debug){if(!i.q.length){}else{if(i.executing){}}}}},createWaiters:function(c){var d=this;if(c.we.length){d.registerListeners({queueItem:c,waitForEvents:c.we,waitForObject:c.wo})}else{if(c.wos.waitForObjects.length){Sys.each(c.wos.waitForObjects,function(a){if(!Sys.isArray(a.events)){a.events=[a.events]}c.wos.totalEventsCount+=a.events.length;d.registerListeners({queueItem:c,waitForEvents:a.events,waitForObject:a.obj})})}}},registerListeners:function(d){var c=this;Sys.each(d.waitForEvents,function(a){var b=function(){if(c.debug){}d.waitForEvents.splice(d.waitForEvents.indexOf(a),1);var g=d.queueItem.wos;if(Sys.isDefined(g.waitForObjects.length)){if(g.totalEventsCount>=1){g.totalEventsCount-=1}}d.waitForObject.removeListener(a,b,c);c.processQueue()};d.waitForObject.on(a,b,c)})}};Sys.utils.FunctionQueuer=Sys.extend(Sys.Observable,Sys.utils.FunctionQueuer,"Sys.utils.FunctionQueuer");Sys.ns("Loader");Loader.DeviceDetector={constructor:function(){Loader.DeviceDetector.superclass.constructor.call(this);this.setupEvents()},setupEvents:function(){var b=this;b.on({"notify:resourceHandler.priorityListComplete":b.onPriorityListComplete})},onPriorityListComplete:function(){this.performValidation()},performValidation:function(){var j=this,g=Core.DeviceDetectionCodes,k=Resources.readData("deviceDetectionJson"),h;try{h=Core.DeviceDetectionService.validate(navigator.userAgent,k)}catch(i){j.fireEvent("request:loaderErrorHandler.showTechnicalError");return}switch(h.code){case g.WHITE:j.handleWhiteListedCombination();break;case g.GREY_OS:j.handleGreyListedCombination(Services.languageManager.getText(Language.Keys.MGnoOSSupport));break;case Core.DeviceDetectionCodes.GREY_OS_VERSION:j.handleGreyListedCombination(Services.languageManager.getText(Language.Keys.deviceBestGameExperience));break;case Core.DeviceDetectionCodes.GREY_BROWSER:j.handleGreyListedCombination(Services.languageManager.getText(Language.Keys.optimisedForVersion,[h.preferredBrowser]));break;case Core.DeviceDetectionCodes.GREY_BROWSER_VERSION:j.handleGreyListedCombination(Services.languageManager.getText(Language.Keys.deviceUpdateBrowser));break;case g.BLACK_OS:case g.BLACK_OS_VERSION:case g.BLACK_BROWSER:case g.BLACK_BROWSER_VERSION:j.handleBlackListedCombination();break;default:j.fireEvent("request:loaderErrorHandler.showTechnicalError")}},handleWhiteListedCombination:function(){this.fireEvent("notify:deviceDetector.validationComplete",true);this.fireEvent("notify:deviceDetector.finished")},handleGreyListedCombination:function(g){var d=this,f={proceed:{label:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){d.fireEvent("notify:deviceDetector.finished");d.fireEvent("request:loader.hideDialog")}},casinoLobby:{label:Services.languageManager.getText(Language.Keys.btn_casino),action:function(){Environment.goToLobby("6")}}};d.fireEvent("notify:deviceDetector.validationComplete",true);d.showDialog({texts:[g],buttons:Platform.isDesktopDevice?[f.proceed]:[f.casinoLobby,f.proceed],confirmDialog:{id:"deviceDetector.greyList"}})},handleBlackListedCombination:function(){var c=this,d={casinoLobby:{label:Services.languageManager.getText(Language.Keys.btn_casino),action:function(){Environment.goToLobby("6")}}};c.fireEvent("notify:deviceDetector.validationComplete",false);c.showDialog({texts:[Services.languageManager.getText(Language.Keys.MGdeviceNoSupport)],buttons:!Platform.isDesktopDevice?[d.casinoLobby]:[],severity:"stopped"})},showDialog:function(b){this.fireEvent("request:loader.showDialog",b);this.handleIntegrationSpecificDialogs(b)},handleIntegrationSpecificDialogs:function(b){}};Loader.DeviceDetector=Sys.extend(Sys.Observable,Loader.DeviceDetector,"Loader.DeviceDetector");Sys.ns("Loader");Loader.ResourceHandler={INTEGRATION:"standard",constructor:function(d){d=d||{};var c=this;Loader.ResourceHandler.superclass.constructor.call(c,d);c.setupData(d);c.setupEvents();if(Sys.isFunc(d.callback)){c.progressCallback=d.callback}c.setLanguageOfHtmlTag(Resources.readData("queryData").lang)},setupEvents:function(){var b=this;b.on({"notify:loader.animationComplete":b.onLoaderAnimationComplete,"notify:gcmProxy.animationComplete":b.onLoaderAnimationComplete,"notify:loader.confirmDialogClosed":b.onRequestedConfirmDialogsClosed,"notify:userAgentManager.loadDialogConfirmed":b.onRequestedConfirmDialogsClosed,"notify:userAgentManager.requestedConfirmDialogsClosed":b.onRequestedConfirmDialogsClosed,"notify:userAgentManager.deviceDetectionFinished":b.onDetectionComplete,"notify:deviceDetector.validationComplete":b.onDetectionComplete,"notify:deviceDetector.finished":b.onRequestedConfirmDialogsClosed})},progressCallback:function(b){this.fireEvent("request:loader.updateProgress",b);this.fireEvent("request:gcmProxy.updateProgress",b)},preLoad:function(){var h=this,f=new Sys.Deferred(),g,i;h.fireEvent("request:loader.show");h.storeData("startTime",Date.now());g=h.determineSessionID();if(Sys.isDefined(g)){i=f.when(g).then(function(){return h.gameServerInit()})}else{h.determinePluginURL();i=f.when(h.gameServerInit())}i.then(function(){return h.loadResourcesXML()}).then(function(){h.addDynamicPriorityResources();return h.loadResources("priorityList")}).done(function(){h.fireEvent("notify:resourceHandler.priorityListComplete")})},determineSessionID:function(){var k=this,g=Resources.readData("queryData"),h=g.callbackurl,i=g.sessId,j=g.integration;if(Sys.isDefined(h)&&Sys.isDefined(j)){return k.performServletCall(h,j)}else{if(!Sys.isDefined(i)){Environment.goToLobby("1")}}k.storeSessionID(i);return undefined},determinePluginURL:function(){var b=Resources.readData("queryData");if(Sys.isDefined(b.pluginURL)){Resources.storeData("pluginURL",b.pluginURL)}},performServletCall:function(i,h){var f=this,g=new Sys.Deferred();if(h===f.INTEGRATION){g.when(Sys.utils.httpGet({url:i,useCredentials:true})).fail(function(){Environment.goToLobby("1")}).done(function(a){f.handleServletResponse(a)})}else{Environment.goToLobby("1")}return g},handleServletResponse:function(g){var i=Sys.utils.parseQueryString(g.responseText),h=i.playerSessionId,f=i.pluginURL;if(!Sys.isDefined(h)){Environment.goToLobby("1")}else{this.storeSessionID(decodeURIComponent(h))}if(Sys.isDefined(f)){Resources.storeData("pluginURL",decodeURIComponent(f))}else{this.determinePluginURL()}},storeSessionID:function(b){this.storeData("sessionID",b);Resources.storeData("sessionID",b)},onDetectionComplete:function(b){if(b){this.storeData("detectionComplete",true);this.load()}},onRequestedConfirmDialogsClosed:function(){var b=this;b.storeData("allConfirmDialogsClosed",true);if(b.readData("loaderCompleted")){b.initGameIfPossible()}},load:function(){var c=this,d=new Sys.Deferred();if(!c.readData("detectionComplete")){return}c.addPlatformSpecificResourcesToGenericList();d.when(c.loadResources("genericList")).fail(function(a){c.fireEvent("request:loaderErrorHandler.handleRequestError",a)}).done(function(){c.storeData("loaderCompleted",true);c.onLoaderComplete()})},addPlatformSpecificResourcesToGenericList:function(){Platform.PlatformManager.determineResourceBundle();var g=this,j=g.readData("genericList"),i=g.readData("dynamicallyLoadedResources"),h=g.readData("totalSize"),k;Sys.iterate(Platform.resourceBundle.loaderResourceKeys,function(a,b){k=i[a][b];if(Sys.isDefined(k)){j.push(k);h+=k.size}});g.storeData("genericList",j);g.storeData("totalSize",h)},addDynamicPriorityResources:function(){Platform.PlatformManager.determineResourceBundle();var j=this,g=j.readData("priorityList"),k=j.readData("priorityDynamicallyLoadedResources"),h=j.readData("totalSize"),i;Sys.iterate(Platform.resourceBundle.loaderResourceKeys,function(a,b){if(Sys.isDefined(k[a])&&Sys.isDefined(k[a][b])){i=k[a][b];g.push(i);h+=i.size}});j.storeData("priorityList",g);j.storeData("totalSize",h)},gameServerInit:function(){var f=this,g=new Sys.Deferred(),d=f.createInitQuery().getQuery();g.when(Sys.utils.httpGet({url:d})).done(function(a){f.gameServerInitComplete(a)}).fail(function(a){f.fireEvent("request:loaderErrorHandler.handleRequestError",a)});return g},loadResourcesXML:function(){var d=this,c=new Sys.Deferred();c.when(Sys.utils.httpGet({url:"resources.xml"})).fail(function(a){d.fireEvent("request:loaderErrorHandler.handleRequestError",a)}).done(function(a){d.parseResourceXml(a)});return c},loadResources:function(h){var l=this,j=l.readData(h),m=new Sys.Deferred(),i=[],k=Sys.isDefined(l.readData("resources"))?l.readData("resources"):{};Sys.each(j,function(b){var d=b.type,f=l.getPathFromName(b.name,b.url),c=new Sys.Deferred(),g=(d==="audio")?"arraybuffer":undefined,a;if(h==="genericList"){a=function(p,q){l.onProgressCallback(p,q)}}if(d==="css"){l.cssComplete("",b.name,b.url)}c.when(Sys.utils.httpGet({url:f,name:b.name,onProgressCallback:a,responseType:g})).fallback(function(o){return l.onLoadResourceError(o,b)}).done(function(q){var p=l[d+"Complete"];if(Sys.isDefined(p)){if(d!=="css"){p.call(l,q,b.name,b.url)}}else{Resources.storeData(b.name+"Response",q)}});k[b.name]=0;i.push(c)});l.storeData("resources",k);m.when(i);return m},onLoadResourceError:function(h,j){var k=this,i=Resources.readData("language");if(j.name==="languageXML"&&i.lang!==i.defaultLang){var g="../langlib/"+i.defaultLang+"/"+j.url;i.lang=i.defaultLang;return Sys.utils.httpGet({url:g,name:j.name}).fail(function(a){k.fireEvent("request:loaderErrorHandler.handleRequestError",a)}).done(function(a){k[j.type+"Complete"](a,j.name,j.url)})}else{k.fireEvent("request:loaderErrorHandler.handleRequestError",h)}},onProgressCallback:function(i,g){var f=this,h=f.readData("resources");h[g]=i.loaded;f.calculatePercentage();f.checkLoadSpeed()},calculatePercentage:function(){var q=this,o=q.readData("resources"),k=q.readData("totalSize"),m=0,l,p=Object.keys(o),n=p.length,i=0;while(i<n){m+=o[p[i]];++i}l=(m/k)*100;l=Math.min(l,100);l=parseInt(l,10);q.storeData("percentageLoaded",l);q.progressCallback(l)},checkLoadSpeed:function(){var k=this,l=this.readData("startTime"),h=this.readData("totalSize"),i=this.readData("status"),m=Date.now(),j=(60000/2500000)*h;if(i!=="slow"&&(m-l>j)){k.slownessDetected()}},slownessDetected:function(){var g=this,d,f=Services.languageManager;g.storeData("status","slow");d={texts:[f.hasText(Language.Keys.loadingTakesLonger)?f.getText(Language.Keys.loadingTakesLonger):"Loading the game is taking longer than usual."],buttons:[{action:function(){Environment.goToLobby("9")},label:f.hasText(Language.Keys.btn_casino)?f.getText(Language.Keys.btn_casino):"Home",scope:g},{action:function(){Environment.reload()},label:f.hasText(Language.Keys.btn_reload)?f.getText(Language.Keys.btn_reload):"Reload",scope:g}],severity:"slow"};g.fireEvent("request:loader.showDialog",d)},onLoaderComplete:function(){var b=this;b.progressCallback(100);b.storeData("resourcesLoaded",true);b.initGameIfPossible()},onLoaderAnimationComplete:function(){var b=this;b.fireEvent("notify:resourceHandler.animationComplete");b.storeData("animationComplete",true);b.initGameIfPossible()},initGameIfPossible:function(){var b=this;if(!b.scriptsAppended&&b.readData("resourcesLoaded")&&b.readData("animationComplete")&&b.readData("allConfirmDialogsClosed")){b.scriptsAppended=true;b.fireEvent("notify:resourceHandler.gameAssetsLoaded");b.appendScriptFiles()}},gameServerInitComplete:function(b){Resources.storeData("gameServerInitResponse",Sys.utils.qsToObj(b.responseText));Resources.storeData("gameServerInitResponseObject",Sys.utils.parseQueryStringToNestedObject(b.responseText));Resources.storeData("unParsedGameServerInitResponse",b.responseText);Resources.storeData("historyUrl",this.buildHistoryUrl())},jsonComplete:function(d,c){Resources.storeData(c,JSON.parse(d.responseText))},priorityAudioJsonComplete:function(f,d){var g=JSON.parse(f.responseText);if(Platform.resourceBundle.preloadAudio){this.addAudioToGenericList(g)}Resources.storeData(d,g)},addAudioToGenericList:function(n){var l=this,s=n.files.main,m=Sys.isDefined(n.fileSizes)&&Sys.isDefined(n.fileSizes.main)?n.fileSizes.main:{},o,q,r,p=l.readData("genericList"),i=l.readData("totalSize");if(Sys.isObj(s)){q=Object.keys(s);r=q.length;for(o=-1;++o<r;){p.push({url:s[q[o]],type:"audio",name:q[o],size:100000,loadComplete:false});i+=(Sys.isDefined(m[q[o]])?m[q[o]]:100000)}}else{p.push({url:s,type:"audio",name:"main",size:100000,loadComplete:false});i+=(Sys.isDefined(m)?m:100000)}l.storeData("totalSize",i)},audioComplete:function(f,d){var g=Resources.readData("preloadedAudio");if(!Sys.isDefined(g)){g={}}g["main/"+d]=f.response;Resources.storeData("preloadedAudio",g)},xmlComplete:function(d,c){Resources.storeData(c,d.responseXML)},cssComplete:function(g,j,k){var i=document.createElement("link"),h=this.readData("cssFiles");i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("href",k);h.push(i)},javascriptComplete:function(i,m,h){var k=document,j=this.readData("scriptFiles"),l=k.createElement("script");l.type="text/javascript";l.charset="utf-8";l.src=h;j.push(l)},appendScriptFiles:function(){var k=document.getElementsByTagName("head")[0],j=this.readData("scriptFiles"),h=this.readData("cssFiles"),i=h.length,g;for(g=-1;++g<i;){k.appendChild(h[g])}i=j.length;for(g=-1;++g<i;){k.appendChild(j[g])}},preloadAudioComplete:function(d,c){Resources.storeData(c,JSON.parse(d.responseText));Resources.processAudio(c)},getPathFromName:function(i,j){var n=this,m=j,k,o=Resources.readData("gameServerInitResponse"),l=Resources.readData("language");if(i==="languageXML"){m="../langlib/"+l.lang+"/"+j}else{if(i==="moneyformat_player"){m="../../../currencies/"+o.playercurrencyiso.toLowerCase()+"/"+j}else{if(i==="moneyformat_jackpot"){m="../../../currencies/"+o.jackpotcurrencyiso.toLowerCase()+"/"+j}else{if(i==="deviceDetection"||i==="deviceDetectionJson"){k=o.staticsharedurl||n.readData("deviceListPath").fallbackPath;m=k+"/"+j}}}}return m},createInitQuery:function(){var f=this,i=f.getSessionId(),g=Resources.readData("queryData"),h=Resources.readData("extraParams");return{serverStr:g.server+"servlet/CasinoGameServlet;jsession="+i,initStr:"?action=init&sessid="+i+"&gameId="+g.gameId,extraParams:Sys.utils.objectToQueryString(h),noCache:"&no-cache="+Math.round(Date.now()),getQuery:function(){var a="";for(var b in this){if(this.hasOwnProperty(b)&&typeof this[b]==="string"){a+=this[b]}}return a}}},getSessionId:function(){return Resources.readData("sessionID")},parseResourceXml:function(l){var p=this,k=Sys.utils.XMLHelper.toJSON(l.responseXML),s=k.children[0].children,n=[],r=[],q={},m={},o=0;Sys.each(s,function(a){Sys.each(a.findAll("resource"),function(f){var d={url:"",type:"",size:"",loadComplete:false},h,c,g,b;d.type=f.find("type").text;d.url=f.find("url").text;d.size=Sys.utils.toInt(f.find("size").text);d.name=f.find("name").text;h=f.find("priority");c=f.find("resourceTag");if(h!==null){if(c!==null){g=c.find("type").text;b=c.find("key").text;if(!Sys.isDefined(m[g])){m[g]={}}m[g][b]=d}else{d.priority=h.text;n.push(d)}}else{if(c!==null){g=c.find("type").text;b=c.find("key").text;if(!Sys.isDefined(q[g])){q[g]={}}q[g][b]=d}else{r.push(d);o+=d.size}}})});p.storeData("totalSize",o);p.storeData("priorityList",n);p.storeData("genericList",r);p.storeData("dynamicallyLoadedResources",q);p.storeData("priorityDynamicallyLoadedResources",m)},setupData:function(f){var h=this,i=Sys.utils.qsToObj(window.location.search);h.data={};h.storeData("callback",f.callback);h.storeData("scriptFiles",[]);h.storeData("cssFiles",[]);h.storeData("totalSize",0);h.storeData("resourcesLoaded",false);h.storeData("animationComplete",false);h.storeData("deviceListPath",{fallbackPath:i.staticsharedurl});h.storeData("detectionComplete",false);h.storeData("allConfirmDialogsClosed",false);h.storeData("loaderCompleted",false);var g=Environment.supportsWebAudio?false:true;h.storeData("soundDecoded",g);Resources.storeData("queryData",i);Resources.storeData("extraParams",{wantsfreerounds:true,freeroundmode:false,wantsreels:true});Resources.storeData("language",{defaultLang:"en",lang:i.lang});Resources.storeData("lobbyUrl",i.lobbyURL)},buildHistoryUrl:function(){var c=Resources.readData("queryData"),d=c.server;if(d[d.length-1]!=="/"){d+="/"}d+="game/history?lang="+c.lang+"&sessionId="+Resources.readData("sessionID");if(!Platform.isDesktopDevice){d+="&type=mobile"}return d},readData:function(b){return this.data[b]},storeData:function(d,c){this.data[d]=c},setLanguageOfHtmlTag:function(b){document.documentElement.lang=b}};Loader.ResourceHandler=Sys.extend(Sys.Observable,Loader.ResourceHandler,"Loader.ResourceHandler");Sys.ns("Core");Core.LoaderController={MINIMUM_LOADING_TIME:3000,LOADER_PERCENTAGE_STEP:0.2,DEBUG:false,constructor:function(){Core.LoaderController.superclass.constructor.apply(this,arguments);this.MINIMUM_LOADING_TIME=3000},init:function(){Core.LoaderController.superclass.init.apply(this,arguments);this.model.storeData("delayedMessages",[])},setupEvents:function(){var b=this;b.on({"request:loader.show":b.show,"request:loader.hide":b.hide,"request:loader.showDialog":b.requestDialog,"request:loader.hideDialog":b.hideDialog,"request:loader.updateProgress":b.update,"notify:stateHandler.leavingBeforeLoaderCloseState":b.onLeavingBeforeLoaderCloseState})},onLeavingBeforeLoaderCloseState:function(){this.hide()},update:function(b){b=parseInt(b,10)||0;b=b>=0?b:0;b=b<=100?b:100;this.model.storeData("progressValue",b)},tick:function(){var j=this,m=j.model.readData("progressValue")||0,k=j.model.readData("percentage")||0,h=Date.now(),i=h-j.startTime,l=parseInt(i/j.MINIMUM_LOADING_TIME*100,10);l=l<100?l:100;if(this.DEBUG){}m=l<m?l:m;if(k+j.LOADER_PERCENTAGE_STEP*100<=m){j.model.storeData("percentage",m);j.view.updateLoaderBar()}if(m===100){clearInterval(j.tickInterval);j.model.storeData("percentage",100);j.view.updateLoaderBar();setTimeout(j.fireEvent.bind(j,"notify:loader.animationComplete"),parseInt(j.MINIMUM_LOADING_TIME*j.LOADER_PERCENTAGE_STEP,10));j.showDialogFromQueue()}},show:function(){var b=this;b.startTime=Date.now();clearInterval(b.tickInterval);b.tickInterval=setInterval(b.tick.bind(b),parseInt(b.MINIMUM_LOADING_TIME*b.LOADER_PERCENTAGE_STEP,10));b.view.show()},hide:function(){var b=this;b.startTime=undefined;clearInterval(b.tickInterval);b.fireEvent("notify:loader.closed");b.view.hide()},requestDialog:function(g){g=g||{};var i=this,h=i.model.readData("delayedMessages"),f=i.model.readData("currentMessage");if(this.DEBUG){}if(g.severity==="stopped"){i.model.storeData("currentMessage",g);i.stopLoading();return}if(g.severity==="slow"){i.model.storeData("currentMessage",g);i.view.showDialog()}else{h.push(g)}},stopLoading:function(){var b=this;b.model.storeData("stoppingError",true);setTimeout(function(){clearInterval(b.tickInterval);b.model.storeData("percentage",100);b.view.updateLoaderBar();b.showDialog()},1000)},showDialog:function(){this.view.showDialog()},showDialogFromQueue:function(){var d=this,c=d.model.readData("delayedMessages");if(c.length>0){d.model.storeData("currentMessage",c.pop());d.view.showDialog()}},hideDialog:function(){var c=this,d=c.model.readData("currentMessage")||{confirmDialog:{}};c.fireEvent("notify:loader.confirmDialogClosed",d.confirmDialog.id);c.view.hideDialog();if(c.model.readData("percentage")===100){c.showDialogFromQueue()}}};Core.LoaderController=Sys.extend(Core.Controller,Core.LoaderController,"Core.LoaderController");Sys.ns("Core");Core.LoaderView={ANIMATION_DELAY:100,LOGO_SVG:{tag:"svg",attributes:{"class":"logoSVG",version:"1.1",viewBox:"0 0 258 92",xmlns:"http://www.w3.org/2000/svg"},children:[{tag:"defs",attributes:{},children:[{tag:"clipPath",attributes:{id:"netMask"},children:[{tag:"rect",attributes:{x:"0",y:"0",width:"135px",height:"92px"},children:[]}]},{tag:"clipPath",attributes:{id:"entMask"},children:[{tag:"rect",attributes:{x:"136",y:"0",width:"245.427px",height:"92px"},children:[]}]}]},{tag:"g",attributes:{id:"logo"},children:[{tag:"path",attributes:{id:"line","class":"logoLine logoPartsFill",d:"M 135,0 L 137.393,0 L 137.393,91.447 L 135,91.447 L 135,0 Z","shape-rendering":"crispEdges"},children:[]},{tag:"g",attributes:{"clip-path":"url(#netMask)"},children:[{tag:"g",attributes:{"class":"netWrapper"},children:[{tag:"path",attributes:{d:"M 31.69,51.93 L 22.25,36.651 L 10.15,17.731 L 10.032,17.542 L 0.003,17.542 L 0.003,73.621 L 11.133,73.621 L 11.133,39.151 L 19.432,52.581 L 32.78,73.621 L 42.89,73.621 L 42.89,17.541 L 31.692,17.541 L 31.692,51.93 L 31.692,51.93 M 31.692,51.93 ","class":"logoPartsFill"},children:[]},{tag:"path",attributes:{d:"M 49.15,73.62 L 85.91,73.62 L 85.91,63.001 L 60.35,63.001 L 60.35,50.772 L 82.199,50.772 L 82.199,40.074 L 60.35,40.074 L 60.35,28.245 L 85.91,28.245 L 85.91,17.547 L 49.15,17.547 L 49.15,73.627 L 49.15,73.627 M 49.15,73.627 ","class":"logoPartsFill"},children:[]},{tag:"path",attributes:{d:"M 90.419,28.319 L 103.268,28.319 L 103.268,73.619 L 114.468,73.619 L 114.468,28.319 L 127.237,28.319 L 127.237,17.54 L 90.418,17.54 L 90.418,28.319 L 90.418,28.319 M 90.418,28.319 ","class":"logoPartsFill"},children:[]}]}]},{tag:"g",attributes:{"clip-path":"url(#entMask)"},children:[{tag:"g",attributes:{"class":"entWrapper"},children:[{tag:"path",attributes:{d:"M 135,73.621 L 168.309,73.621 L 168.309,63.002 L 142.753,63.002 L 142.753,50.773 L 164.601,50.773 L 164.601,40.075 L 142.753,40.075 L 142.753,28.246 L 168.309,28.246 L 168.309,17.548 L 135,17.548 ","class":"logoPartsFill"},children:[]},{tag:"path",attributes:{d:"M 205.6,52.02 L 196.162,36.75 L 184.064,17.83 L 183.947,17.631 L 173.92,17.631 L 173.92,73.709 L 185.039,73.709 L 185.039,39.24 L 193.339,52.669 L 206.699,73.709 L 216.809,73.709 L 216.809,17.63 L 205.61,17.63 L 205.61,52.02 L 205.61,52.02 M 205.61,52.02 ","class":"logoPartsFill"},children:[]},{tag:"path",attributes:{d:"M 221.38,17.629 L 221.38,28.408 L 234.228,28.408 L 234.228,73.706 L 245.427,73.706 L 245.427,28.407 L 258.196,28.407 L 258.196,17.627 L 221.377,17.627 L 221.377,17.627 M 221.377,17.627 ","class":"logoPartsFill"},children:[]}]}]}]}]},SLOGAN_SVG:{tag:"svg",attributes:{viewBox:"0 0 195.8 22.1","class":"fillWhite sloganSVG"},children:[{tag:"path",attributes:{d:"M8.8 21.9h-8.8v-18.7h8.4c3.8 0 5.4 2.4 5.4 5.1 0 1.4-.7 3-2.3 3.8 1.8.9 2.6 2.8 2.6 4.3.1 2.9-1.8 5.5-5.3 5.5zm-1.3-15.4h-3.8v4.1h3.8c1.5 0 2.5-.8 2.5-2 0-1.4-.8-2.1-2.5-2.1zm.2 7.3h-4v4.8h4c1.7 0 2.5-.9 2.5-2.4 0-1.4-.9-2.4-2.5-2.4zM15.9 3.2h12.9v3.3h-9.2v4.3h7.9v3.3h-7.9v4.4h9.2v3.3h-12.9v-18.6zM39 6.5v15.4h-3.7v-15.4h-5v-3.3h13.6v3.4h-4.9zM53.8 6.5v15.4h-3.7v-15.4h-5v-3.3h13.6v3.4h-4.9zM60.2 3.2h12.9v3.3h-9.2v4.3h7.9v3.3h-7.9v4.4h9.2v3.3h-12.9v-18.6zM83.1 3.2c3.8 0 5.4 3.1 5.4 5.8 0 2-1.1 4.2-3.1 5.2l3.4 7.7h-4l-2.9-7h-3.4v7h-3.7v-18.7h8.3zm-4.6 8.3h3.8c1.7 0 2.6-1 2.6-2.5 0-1.4-.9-2.5-2.6-2.5h-3.8v5zM103.9 22.1c-3.5 0-7.2-2-7.2-6v-7c0-4 3.6-6.1 7.3-6.1 2.1 0 4.4.6 5.8 1.8l-1.8 2.9c-1.1-1-2.7-1.3-3.9-1.3-1.7 0-3.6.9-3.6 3.4v5.5c0 2.4 1.8 3.4 3.5 3.4.7 0 1.6-.1 2.4-.8v-3.1h-2.7v-3.2h6.4v7.9c-1.7 1.9-4.2 2.6-6.2 2.6zM122.5 18h-6.5l-1.2 3.9h-4l6.6-18.7h3.8l6.5 18.7h-4.1l-1.1-3.9zm-5.5-3.1h4.5l-.7-2.4-1.5-4.9h-.1l-1.4 4.9-.8 2.4zM143.4 11.8l-1.7 3.5-2.1 4h-2.7l-2.1-3.9-1.8-3.5h-.1v10.1h-3.7v-18.8h3.4l3.3 6.6 2.3 4.6h.2l2.3-4.7 3.2-6.5h3.4v18.7h-3.7v-10.1h-.2zM154.3 3.2v18.7h-3.7v-18.7h3.7zM161.1 10.1v11.8h-3.7v-18.7h3.4l4.3 6.4 3.6 5.4h.1v-11.8h3.7v18.7h-3.4l-4.8-7.1-3.1-4.7h-.1zM182.1 22.1c-3.5 0-7.2-2-7.2-6v-7c0-4 3.6-6.1 7.3-6.1 2.1 0 4.4.6 5.8 1.8l-1.8 2.9c-1.1-1-2.7-1.3-3.9-1.3-1.7 0-3.6.9-3.6 3.4v5.5c0 2.4 1.8 3.4 3.5 3.4.7 0 1.6-.1 2.4-.8v-3.1h-2.7v-3.2h6.4v7.9c-1.7 1.9-4.2 2.6-6.2 2.6zM190.2.6v3.5h-.6v-3.5h-1.2v-.6h3.1v.6h-1.3zm3.7 2.2l.5-1.1.9-1.7h.5v4.1h-.6v-2.8l-.4.8-.7 1.4h-.4l-.7-1.3-.5-.9v2.8h-.6v-4.1h.6l.9 1.7.5 1.1z"},children:[]}]},constructor:function(){Core.LoaderView.superclass.constructor.apply(this,arguments)},init:function(d){Core.LoaderView.superclass.init.apply(this,arguments);var c=this;c.loaderWrapper=document.getElementById("loaderWrapper")||document.createElement("div");c.loaderBackground=document.getElementById("loaderBackground")||document.createElement("div");c.setup();c.show()},setup:function(){var d=this,c=d.createLoaderBar();d.brandingWrapper=d.createBrandingWrapper();d.mainLogoWrapper=d.createMainLogo();d.sloganWrapper=d.createSlogan();d.dialogAndLogoWrapper=document.createElement("div");d.dialogWrapper=document.createElement("div");d.dialogAndLogoWrapper.appendChild(d.mainLogoWrapper);d.dialogAndLogoWrapper.appendChild(d.sloganWrapper);d.dialogAndLogoWrapper.appendChild(d.dialogWrapper);d.loaderWrapper.appendChild(c);d.loaderWrapper.appendChild(d.dialogAndLogoWrapper);d.loaderWrapper.appendChild(d.brandingWrapper);Sys.utils.addCSSClass(d.dialogAndLogoWrapper,"dialogAndLogoWrapper");Sys.utils.addCSSClass(d.loaderWrapper,"loaderWrapper");Sys.utils.addCSSClass(d.loaderBackground,"loaderBackground")},show:function(){var b=this;b.loaderWrapper.style.display=b.loaderBackground.style.display="block";clearTimeout(b.timeout);b.timeout=setTimeout(b.animateAll.bind(b),b.ANIMATION_DELAY)},hide:function(){var b=this;clearTimeout(b.timeout);b.loaderWrapper.style.display=b.loaderBackground.style.display="none"},showDialog:function(){var g=this,d=g.model.readData("currentMessage"),f=this.createDialog(d);Sys.utils.addCSSClass(g.loaderWrapper,"dialogVisible");g.dialogAndLogoWrapper.replaceChild(f,g.dialogWrapper);g.dialogWrapper=f;setTimeout(function(){g.dialogWrapper.style.top=0},g.ANIMATION_DELAY)},hideDialog:function(){Sys.utils.removeCSSClass(this.loaderWrapper,"dialogVisible");this.dialogWrapper.style.top="100%"},updateLoaderBar:function(){var b=this;if(b.model.readData("stoppingError")===true){Sys.utils.addCSSClass(b.loaderWrapper,"error")}b.loaderBarProgress.style.width=b.model.readData("percentage")+"%"},getBrandingContent:function(){return{}},createBrandingWrapper:function(){var g=document.createElement("div"),d=this.getBrandingContent(),f;Sys.utils.addCSSClass(g,"brandingWrapper");if(d.tag==="svg"){f=this.createElement(d,"http://www.w3.org/2000/svg")}else{f=this.createElement(d)}if(f){g.appendChild(f);Sys.utils.addCSSClass(this.loaderWrapper,"branded")}return g},createLoaderBar:function(){var d=this,f=document.createElement("div"),g=document.createElement("div");Sys.utils.addCSSClass(f,"loaderBar");Sys.utils.addCSSClass(g,"loaderBarProgress");f.appendChild(g);d.loaderBarProgress=g;return f},createMainLogo:function(){var d=this,f=document.createElement("div"),g=d.createElement(d.LOGO_SVG,"http://www.w3.org/2000/svg");Sys.utils.addCSSClass(f,"logoWrapper");if(Platform.isIEBrowser||Platform.isEdgeBrowser){Sys.utils.addCSSClass(f,"IEBrowser")}f.appendChild(g);return f},createSlogan:function(){var d=this,g=document.createElement("div"),f=d.createElement(this.SLOGAN_SVG,"http://www.w3.org/2000/svg");Sys.utils.addCSSClass(g,"sloganWrapper");g.appendChild(f);return g},createElement:function(j,k){var m;if(!Sys.isDefined(j.tag)){return null}if(k){m=document.createElementNS(k,j.tag)}else{m=document.createElement(j.tag)}for(var i in j.attributes){if(j.attributes.hasOwnProperty(i)){m.setAttribute(i,j.attributes[i])}}for(var l=0;l<j.children.length;l++){var h=this.createElement(j.children[l],k);m.appendChild(h)}return m},createDialog:function(h){h=h||{};var l=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),i,m;l.classList.add("loadDialogWrapper");j.classList.add("loadDialogTextWrap");k.classList.add("loadDialogGUI");h.texts.map(function(a){i=document.createElement("div");i.innerText=a;j.appendChild(i)});h.buttons.map(function(a){a.clickCallback=a.action;m=new Interface.utils.Button(a);m.enable();k.appendChild(m.getContainer().getEl())});l.appendChild(j);l.appendChild(k);return l},animateLogo:function(){Sys.utils.addCSSClass(this.mainLogoWrapper,"animate")},animateSlogan:function(){Sys.utils.addCSSClass(this.sloganWrapper,"animate")},animateBranding:function(){Sys.utils.addCSSClass(this.brandingWrapper,"animate")},animateAll:function(){this.animateLogo();this.animateSlogan();this.animateBranding()}};Core.LoaderView=Sys.extend(Core.View,Core.LoaderView,"Core.LoaderView");Sys.ns("Core");Core.Loader={constructor:function(){Core.Loader.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.Model,view:Core.LoaderView,controller:Core.LoaderController}}};Core.Loader=Sys.extend(Core.Module,Core.Loader,"Core.Loader");Sys.ns("Loader");Loader.ErrorHandler={HTTP_ERROR_TEXTS:[{key:Language.Keys.connectionLost,fallback:"Connection Lost"},{key:Language.Keys.reload,fallback:"Please reload the game."}],GAME_SERVER_ERROR_TEXT:[{key:Language.Keys.error,fallback:"Technical Error"},{key:Language.Keys.returnToLobby,fallback:"Please return to Casino."}],PLUGIN_TIMEOUT_ERROR_TEXT:[{key:Language.Keys.error,fallback:"Technical Error"},{key:Language.Keys.returnToLobby,fallback:"Please return to Casino."}],constructor:function(){var b=this;Loader.ErrorHandler.superclass.constructor.apply(this,arguments);b.errorStatus={http:"handleHttpError",timeout:"handleTimeoutError",server:"handleGameServerError"};b.data={status:""};b.setupDialogButtons();b.setupEvents()},setupEvents:function(){var b=this;b.on({"request:loaderErrorHandler.handleRequestError":b.handleRequestError,"request:loaderErrorHandler.handlePluginTimeoutError":b.handlePluginTimeoutError,"request:loaderErrorHandler.showTechnicalError":b.handleTechnicalError})},handlePluginTimeoutError:function(){var b=this;b.dispatchDialogRequest({texts:b.getTexts(b.PLUGIN_TIMEOUT_ERROR_TEXT),buttons:b.dialogButtons,severity:"stopped"})},readStatus:function(){return this.data.status},setStatus:function(c){var d=this.readStatus();if(d!==c){this.data.status=c}},handleRequestError:function(f){var i=this,g,h=Sys.utils.getErrorCode(f);if(!Sys.utils.httpRequestIsOK(f)){g="http"}else{if(Sys.isDefined(h)){g="server";if(h===20){Environment.goToLobby("1")}}else{Environment.goToLobby("1")}}if(!Sys.isDefined(g)||g===i.readStatus()){return}i[i.errorStatus[g]]();i.setStatus(g)},handleHttpError:function(){var b=this;b.dispatchDialogRequest({texts:b.getTexts(b.HTTP_ERROR_TEXTS),buttons:b.dialogButtons,severity:"stopped"})},handleGameServerError:function(){var b=this;b.dispatchDialogRequest({texts:b.getTexts(b.GAME_SERVER_ERROR_TEXT),buttons:b.dialogButtons,severity:"stopped"})},handleTechnicalError:function(){this.handleGameServerError()},getTexts:function(j){var i=[],h=Services.languageManager,k,g;for(g=-1;++g<j.length;){k=j[g];i.push(h.hasText(k.key)?h.getText(k.key):k.fallback)}return i},setupDialogButtons:function(){this.dialogButtons=[{action:function(){Environment.goToLobby("9")},label:Services.languageManager.hasText(Language.Keys.btn_casino)?Services.languageManager.getText(Language.Keys.btn_casino):"Home"},{action:function(){Environment.reload()},label:Services.languageManager.hasText(Language.Keys.btn_reload)?Services.languageManager.getText(Language.Keys.btn_reload):"Reload"}]},dispatchDialogRequest:function(b){this.fireEvent("request:loader.showDialog",b)}};Loader.ErrorHandler=Sys.extend(Sys.Observable,Loader.ErrorHandler,"Loader.ErrorHandler");if(Sys.isDefined(Loader.ResourceHandler)&&Platform.isDesktopDevice){Sys.override(Loader.ResourceHandler,{slownessDetected:function(){var g=this,d,f=Services.languageManager;g.storeData("status","slow");d={texts:[f.hasText(Language.Keys.loadingTakesLonger)?f.getText(Language.Keys.loadingTakesLonger):"Loading the game is taking longer than usual."],buttons:[{action:function(){Environment.reload()},label:f.hasText(Language.Keys.btn_reload)?f.getText(Language.Keys.btn_reload):"Reload",scope:g}],severity:"slow"};g.fireEvent("request:loader.showDialog",d)}})}if(Sys.isDefined(Loader.ErrorHandler)&&Platform.isDesktopDevice){Sys.override(Loader.ErrorHandler,{GAME_SERVER_ERROR_TEXT:[{key:Language.Keys.error,fallback:"Technical Error"}],SESSION_TIMEOUT_TEXT:[{key:"20",fallback:"Your session has timed out. Restart the game."}],PLUGIN_TIMEOUT_ERROR_TEXT:[{key:Language.Keys.error,fallback:"Technical Error"}],handleRequestError:function(f){var i=this,g,h=Sys.utils.getErrorCode(f);if(!Sys.utils.httpRequestIsOK(f)){g="http"}else{if(Sys.isDefined(h)){g="server";if(h===20){g="timeout"}}else{g="server"}}if(!Sys.isDefined(g)||g===i.readStatus()){return}i[i.errorStatus[g]]();i.setStatus(g)},setupDialogButtons:function(){this.dialogButtons=[{action:function(){Environment.reload()},label:Services.languageManager.hasText(Language.Keys.btn_reload)?Services.languageManager.getText(Language.Keys.btn_reload):"Reload"}]},handleTimeoutError:function(){var b=this;b.dispatchDialogRequest({texts:b.getTexts(b.SESSION_TIMEOUT_TEXT),buttons:[],severity:"stopped"})}})}Sys.ns("Game");Sys.ns("Services");function initializeGame(d){var f;Game.gameStartDateMs=Date.now();if(Sys.isDefined(Loader.DeviceDetector)){var g=new Loader.DeviceDetector()}else{if(Sys.isDefined(Core.UseragentManager)){Game.uam=new Core.UseragentManager()}}Services.orientation=new Core.Orientation();Game.viewport=Services.scaling=new Core.Scaling();Services.languageManager=new Core.LanguageManager();Game.languagemanager=Services.languageManager;if(!Sys.isGcmEnabled){Game.loader=new Core.Loader({name:"loader"})}Game.errorHandler=new Loader.ErrorHandler();Game.resourceHandler=new Loader.ResourceHandler();Services.scaling.scale();Game.resourceHandler.preLoad()}if(!Sys.isGcmEnabled){document.addEventListener("DOMContentLoaded",function(){initializeGame()})}(function(i,f,g){function h(a){if(!a){return}if(!a.setTargetValueAtTime){a.setTargetValueAtTime=a.setTargetAtTime}}if(typeof window.AudioContext!=="undefined"){window.webkitAudioContext=AudioContext;AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain;AudioContext.prototype.createGain=function(){var a=this.internal_createGain();h(a.gain);return a};AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay;AudioContext.prototype.createDelay=function(){var a=this.internal_createDelay();h(a.delayTime);return a};AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource;AudioContext.prototype.createBufferSource=function(){var a=this.internal_createBufferSource();if(!a.noteOn){a.noteOn=a.start}if(!a.noteGrainOn){a.noteGrainOn=a.start}if(!a.noteOff){a.noteOff=a.stop}h(a.playbackRate);return a};AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor;AudioContext.prototype.createDynamicsCompressor=function(){var a=this.internal_createDynamicsCompressor();h(a.threshold);h(a.knee);h(a.ratio);h(a.reduction);h(a.attack);h(a.release);return a};AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter;AudioContext.prototype.createBiquadFilter=function(){var a=this.internal_createBiquadFilter();h(a.frequency);h(a.detune);h(a.Q);h(a.gain);return a};if(AudioContext.prototype.hasOwnProperty("createOscillator")){AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator;AudioContext.prototype.createOscillator=function(){var a=this.internal_createOscillator();if(!a.noteOn){a.noteOn=a.start}if(!a.noteOff){a.noteOff=a.stop}h(a.frequency);h(a.detune);return a}}AudioContext.prototype.internal_createPanner=AudioContext.prototype.createPanner;AudioContext.prototype.createPanner=function(){var b=this.internal_createPanner();var a={EQUALPOWER:"equalpower",HRTF:"HRTF",LINEAR_DISTANCE:"linear",INVERSE_DISTANCE:"inverse",EXPONENTIAL_DISTANCE:"exponential"};for(var c in a){var d=a[c];if(typeof b.prototype[c]==="undefined"){b.prototype[c]=d}}return b};if(typeof AudioContext.prototype.createGainNode==="undefined"){AudioContext.prototype.createGainNode=AudioContext.prototype.createGain}if(typeof AudioContext.prototype.createDelayNode==="undefined"){AudioContext.prototype.createDelayNode=AudioContext.prototype.createDelay}if(typeof AudioContext.prototype.createJavaScriptNode==="undefined"){AudioContext.prototype.createJavaScriptNode=AudioContext.prototype.createScriptProcessor}if(typeof AudioContext.prototype.createWaveTable==="undefined"){AudioContext.prototype.createWaveTable=AudioContext.prototype.createPeriodicWave}}}(window));(function(c){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=c()}else{if(typeof define==="function"&&define.amd){define([],c)}else{var d;if(typeof window!=="undefined"){d=window}else{if(typeof global!=="undefined"){d=global}else{if(typeof self!=="undefined"){d=self}else{d=this}}}d.PIXI=c()}}})(function(){var h,f,g;return(function i(m,a,c){function d(l,r){if(!a[l]){if(!m[l]){var j=typeof require=="function"&&require;if(!r&&j){return j(l,!0)}if(n){return n(l,!0)}var o=new Error("Cannot find module '"+l+"'");throw o.code="MODULE_NOT_FOUND",o}var k=a[l]={exports:{}};m[l][0].call(k.exports,function(q){var p=m[l][1][q];return d(p?p:q)},k,k.exports,i,m,a,c)}return a[l].exports}var n=typeof require=="function"&&require;for(var b=0;b<c.length;b++){d(c[b])}return d})({1:[function(b,a,c){(function(d,k){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var ao={};function ad(){}function ak(l){return l}function aH(l){return !!l}function aO(l){return !l}var ag;var aA=typeof self==="object"&&self.self===self&&self||typeof k==="object"&&k.global===k&&k||this;if(aA!=null){ag=aA.async}ao.noConflict=function(){aA.async=ag;return ao};function aQ(l){return function(){if(l===null){throw new Error("Callback was already called.")}l.apply(this,arguments);l=null}}function aE(l){return function(){if(l===null){return}l.apply(this,arguments);l=null}}var av=Object.prototype.toString;var ac=Array.isArray||function(l){return av.call(l)==="[object Array]"};var aL=function(l){var m=typeof l;return m==="function"||m==="object"&&!!l};function aj(l){return ac(l)||(typeof l.length==="number"&&l.length>=0&&l.length%1===0)}function ah(m,l){return aj(m)?ae(m,l):ab(m,l)}function ae(o,m){var n=-1,l=o.length;while(++n<l){m(o[n],n,o)}}function ay(o,m){var n=-1,l=o.length,p=Array(l);while(++n<l){p[n]=m(o[n],n,o)}return p}function aK(l){return ay(Array(l),function(n,m){return m})}function ax(n,l,m){ae(n,function(q,o,p){m=l(m,q,o,p)});return m}function ab(m,l){ae(az(m),function(n){l(m[n],n)})}function ai(n,l){for(var m=0;m<n.length;m++){if(n[m]===l){return m}}return -1}var az=Object.keys||function(l){var m=[];for(var n in l){if(l.hasOwnProperty(n)){m.push(n)}}return m};function aI(n){var o=-1;var p;var l;if(aj(n)){p=n.length;return function m(){o++;return o<p?o:null}}else{l=az(n);p=l.length;return function m(){o++;return o<p?l[o]:null}}}function aJ(m,l){l=l==null?m.length-1:+l;return function(){var n=Math.max(arguments.length-l,0);var o=Array(n);for(var p=0;p<n;p++){o[p]=arguments[p+l]}switch(l){case 0:return m.call(this,o);case 1:return m.call(this,arguments[0],o)}}}function aN(l){return function(n,o,m){return l(n,m)}}var aG=typeof setImmediate==="function"&&setImmediate;var aq=aG?function(l){aG(l)}:function(l){setTimeout(l,0)};if(typeof d==="object"&&typeof d.nextTick==="function"){ao.nextTick=d.nextTick}else{ao.nextTick=aq}ao.setImmediate=aG?aq:ao.nextTick;ao.forEach=ao.each=function(n,m,l){return ao.eachOf(n,aN(m),l)};ao.forEachSeries=ao.eachSeries=function(n,m,l){return ao.eachOfSeries(n,aN(m),l)};ao.forEachLimit=ao.eachLimit=function(o,n,m,l){return al(n)(o,aN(m),l)};ao.forEachOf=ao.eachOf=function(p,m,l){l=aE(l||ad);p=p||[];var o=aj(p)?p.length:az(p).length;var n=0;if(!o){return l(null)}ah(p,function(r,s){m(p[s],s,aQ(q))});function q(r){if(r){l(r)}else{n+=1;if(n>=o){l(null)}}}};ao.forEachOfSeries=ao.eachOfSeries=function(m,n,l){l=aE(l||ad);m=m||[];var q=aI(m);var o=q();function p(){var r=true;if(o===null){return l(null)}n(m[o],o,aQ(function(s){if(s){l(s)}else{o=q();if(o===null){return l(null)}else{if(r){ao.nextTick(p)}else{p()}}}}));r=false}p()};ao.forEachOfLimit=ao.eachOfLimit=function(m,o,n,l){al(o)(m,n,l)};function al(l){return function(n,o,t){t=aE(t||ad);n=n||[];var s=aI(n);if(l<=0){return t(null)}var r=false;var q=0;var p=false;(function m(){if(r&&q<=0){return t(null)}while(q<l&&!p){var u=s();if(u===null){r=true;if(q<=0){t(null)}return}q+=1;o(n[u],u,aQ(function(v){q-=1;if(v){t(v);p=true}else{m()}}))}})()}}function at(l){return function(n,o,m){return l(ao.eachOf,n,o,m)}}function aR(l){return function(n,p,o,m){return l(al(p),n,o,m)}}function am(l){return function(n,o,m){return l(ao.eachOfSeries,n,o,m)}}function aw(m,p,n,l){l=aE(l||ad);var o=[];m(p,function(r,s,q){n(r,function(t,u){o[s]=u;q(t)})},function(q){l(q,o)})}ao.map=at(aw);ao.mapSeries=am(aw);ao.mapLimit=aR(aw);ao.inject=ao.foldl=ao.reduce=function(o,n,m,l){ao.eachOfSeries(o,function(r,q,p){m(n,r,function(t,s){n=s;p(t)})},function(p){l(p||null,n)})};ao.foldr=ao.reduceRight=function(p,o,n,l){var m=ay(p,ak).reverse();ao.reduce(m,o,n,l)};function af(m,p,n,l){var o=[];m(p,function(s,r,q){n(s,function(t){if(t){o.push({index:r,value:s})}q()})},function(){l(ay(o.sort(function(q,r){return q.index-r.index}),function(q){return q.value}))})}ao.select=ao.filter=at(af);ao.selectLimit=ao.filterLimit=aR(af);ao.selectSeries=ao.filterSeries=am(af);function ap(m,o,n,l){af(m,o,function(p,q){n(p,function(r){q(!r)})},l)}ao.reject=at(ap);ao.rejectLimit=aR(ap);ao.rejectSeries=am(ap);function ar(m,n,l){return function(r,p,o,s){function q(){if(s){s(l(false,void 0))}}function t(w,v,u){if(!s){return u()}o(w,function(x){if(s&&n(x)){s(l(true,w));s=o=false}u()})}if(arguments.length>3){m(r,p,t,q)}else{s=o;o=p;m(r,t,q)}}}ao.any=ao.some=ar(ao.eachOf,aH,ak);ao.someLimit=ar(ao.eachOfLimit,aH,ak);ao.all=ao.every=ar(ao.eachOf,aO,aO);ao.everyLimit=ar(ao.eachOfLimit,aO,aO);function aD(l,m){return m}ao.detect=ar(ao.eachOf,ak,aD);ao.detectSeries=ar(ao.eachOfSeries,ak,aD);ao.detectLimit=ar(ao.eachOfLimit,ak,aD);ao.sortBy=function(o,m,l){ao.map(o,function(q,p){m(q,function(s,r){if(s){p(s)}else{p(null,{value:q,criteria:r})}})},function(p,q){if(p){return l(p)}else{l(null,ay(q.sort(n),function(r){return r.value}))}});function n(p,q){var r=p.criteria,s=q.criteria;return r<s?-1:r>s?1:0}};ao.auto=function(r,m){m=aE(m||ad);var l=az(r);var s=l.length;if(!s){return m(null)}var p={};var n=[];function t(u){n.unshift(u)}function q(u){var v=ai(n,u);if(v>=0){n.splice(v,1)}}function o(){s--;ae(n.slice(0),function(u){u()})}t(function(){if(!s){m(null,p)}});ae(l,function(z){var A=ac(r[z])?r[z]:[r[z]];var u=aJ(function(D,C){if(C.length<=1){C=C[0]}if(D){var E={};ab(p,function(F,G){E[G]=F});E[z]=C;m(D,E)}else{p[z]=C;ao.setImmediate(o)}});var x=A.slice(0,A.length-1);var B=x.length;var v;while(B--){if(!(v=r[x[B]])){throw new Error("Has inexistant dependency")}if(ac(v)&&ai(v,z)>=0){throw new Error("Has cyclic dependencies")}}function y(){return ax(x,function(D,C){return(D&&p.hasOwnProperty(C))},true)&&!p.hasOwnProperty(z)}if(y()){A[A.length-1](u,p)}else{t(w)}function w(){if(y()){q(w);A[A.length-1](u,p)}}})};ao.retry=function(t,q,n){var r=5;var o=0;var m=[];var u={times:r,interval:o};function p(v,w){if(typeof w==="number"){v.times=parseInt(w,10)||r}else{if(typeof w==="object"){v.times=parseInt(w.times,10)||r;v.interval=parseInt(w.interval,10)||o}else{throw new Error("Unsupported argument type for 'times': "+typeof w)}}}var s=arguments.length;if(s<1||s>3){throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)")}else{if(s<=2&&typeof t==="function"){n=q;q=t}}if(typeof t!=="function"){p(u,t)}u.callback=n;u.task=q;function l(v,y){function w(B,A){return function(C){B(function(D,E){C(!D||A,{err:D,result:E})},y)}}function x(A){return function(B){setTimeout(function(){B(null)},A)}}while(u.times){var z=!(u.times-=1);m.push(w(u.task,z));if(!z&&u.interval>0){m.push(x(u.interval))}}ao.series(m,function(B,A){A=A[A.length-1];(v||u.callback)(A.err,A.result)})}return u.callback?l():l};ao.waterfall=function(l,m){m=aE(m||ad);if(!ac(l)){var o=new Error("First argument to waterfall must be an array of functions");return m(o)}if(!l.length){return m()}function n(p){return aJ(function(q,s){if(q){m.apply(null,[q].concat(s))}else{var r=p.next();if(r){s.push(n(r))}else{s.push(m)}aB(p).apply(null,s)}})}n(ao.iterator(l))()};function aC(n,l,m){m=m||ad;var o=aj(l)?[]:{};n(l,function(r,q,p){r(aJ(function(t,s){if(s.length<=1){s=s[0]}o[q]=s;p(t)}))},function(p){m(p,o)})}ao.parallel=function(l,m){aC(ao.eachOf,l,m)};ao.parallelLimit=function(l,n,m){aC(al(n),l,m)};ao.series=function(l,m){aC(ao.eachOfSeries,l,m)};ao.iterator=function(l){function m(o){function n(){if(l.length){l[o].apply(null,arguments)}return n.next()}n.next=function(){return(o<l.length-1)?m(o+1):null};return n}return m(0)};ao.apply=aJ(function(l,m){return aJ(function(n){return l.apply(null,m.concat(n))})});function an(m,o,n,l){var p=[];m(o,function(r,q,s){n(r,function(u,t){p=p.concat(t||[]);s(u)})},function(q){l(q,p)})}ao.concat=at(an);ao.concatSeries=am(an);ao.whilst=function(l,n,m){m=m||ad;if(l()){var o=aJ(function(p,q){if(p){m(p)}else{if(l.apply(this,q)){n(o)}else{m(null)}}});n(o)}else{m(null)}};ao.doWhilst=function(n,l,m){var o=0;return ao.whilst(function(){return ++o<=1||l.apply(this,arguments)},n,m)};ao.until=function(l,n,m){return ao.whilst(function(){return !l.apply(this,arguments)},n,m)};ao.doUntil=function(n,l,m){return ao.doWhilst(n,function(){return !l.apply(this,arguments)},m)};ao.during=function(l,n,m){m=m||ad;var o=aJ(function(q,r){if(q){m(q)}else{r.push(p);l.apply(this,r)}});var p=function(q,r){if(q){m(q)}else{if(r){n(o)}else{m(null)}}};l(p)};ao.doDuring=function(n,l,m){var o=0;ao.during(function(p){if(o++<1){p(null,true)}else{l.apply(this,arguments)}},n,m)};function aM(l,o,m){if(o==null){o=1}else{if(o===0){throw new Error("Concurrency must not be zero")}}function r(v,s,t,u){if(u!=null&&typeof u!=="function"){throw new Error("task callback must be a function")}v.started=true;if(!ac(s)){s=[s]}if(s.length===0&&v.idle()){return ao.setImmediate(function(){v.drain()})}ae(s,function(x){var w={data:x,callback:u||ad};if(t){v.tasks.unshift(w)}else{v.tasks.push(w)}if(v.tasks.length===v.concurrency){v.saturated()}});ao.setImmediate(v.process)}function p(s,t){return function(){q-=1;var u=arguments;ae(t,function(v){v.callback.apply(v,u)});if(s.tasks.length+q===0){s.drain()}s.process()}}var q=0;var n={tasks:[],concurrency:o,payload:m,saturated:ad,empty:ad,drain:ad,started:false,paused:false,push:function(s,t){r(n,s,false,t)},kill:function(){n.drain=ad;n.tasks=[]},unshift:function(s,t){r(n,s,true,t)},process:function(){if(!n.paused&&q<n.concurrency&&n.tasks.length){while(q<n.concurrency&&n.tasks.length){var t=n.payload?n.tasks.splice(0,n.payload):n.tasks.splice(0,n.tasks.length);var u=ay(t,function(v){return v.data});if(n.tasks.length===0){n.empty()}q+=1;var s=aQ(p(n,t));l(u,s)}}},length:function(){return n.tasks.length},running:function(){return q},idle:function(){return n.tasks.length+q===0},pause:function(){n.paused=true},resume:function(){if(n.paused===false){return}n.paused=false;var t=Math.min(n.concurrency,n.tasks.length);for(var s=1;s<=t;s++){ao.setImmediate(n.process)}}};return n}ao.queue=function(l,n){var m=aM(function(o,p){l(o[0],p)},n,1);return m};ao.priorityQueue=function(l,n){function o(r,s){return r.priority-s.priority}function p(t,v,u){var w=-1,s=t.length-1;while(w<s){var r=w+((s-w+1)>>>1);if(u(v,t[r])>=0){w=r}else{s=r-1}}return w}function q(u,r,s,t){if(t!=null&&typeof t!=="function"){throw new Error("task callback must be a function")}u.started=true;if(!ac(r)){r=[r]}if(r.length===0){return ao.setImmediate(function(){u.drain()})}ae(r,function(w){var v={data:w,priority:s,callback:typeof t==="function"?t:ad};u.tasks.splice(p(u.tasks,v,o)+1,0,v);if(u.tasks.length===u.concurrency){u.saturated()}ao.setImmediate(u.process)})}var m=ao.queue(l,n);m.push=function(r,s,t){q(m,r,s,t)};delete m.unshift;return m};ao.cargo=function(l,m){return aM(l,1,m)};function j(l){return aJ(function(m,n){m.apply(null,n.concat([aJ(function(o,p){if(typeof console==="object"){if(o){if(console.error){}}else{if(console[l]){ae(p,function(q){console[l](q)})}}}})]))})}ao.log=j("log");ao.dir=j("dir");ao.memoize=function(l,n){var o={};var m={};n=n||ak;var p=aJ(function p(s){var q=s.pop();var r=n.apply(null,s);if(r in o){ao.nextTick(function(){q.apply(null,o[r])})}else{if(r in m){m[r].push(q)}else{m[r]=[q];l.apply(null,s.concat([aJ(function(v){o[r]=v;var t=m[r];delete m[r];for(var u=0,w=t.length;u<w;u++){t[u].apply(null,v)}})]))}}});p.memo=o;p.unmemoized=l;return p};ao.unmemoize=function(l){return function(){return(l.unmemoized||l).apply(null,arguments)}};function au(l){return function(n,o,m){l(aK(n),o,m)}}ao.times=au(ao.map);ao.timesSeries=au(ao.mapSeries);ao.timesLimit=function(m,o,n,l){return ao.mapLimit(aK(m),o,n,l)};ao.seq=function(){var l=arguments;return aJ(function(o){var n=this;var m=o[o.length-1];if(typeof m=="function"){o.pop()}else{m=ad}ao.reduce(l,o,function(q,p,r){p.apply(n,q.concat([aJ(function(t,s){r(t,s)})]))},function(p,q){m.apply(n,[p].concat(q))})})};ao.compose=function(){return ao.seq.apply(null,Array.prototype.reverse.call(arguments))};function aF(l){return aJ(function(n,o){var m=aJ(function(r){var q=this;var p=r.pop();return l(n,function(t,u,s){t.apply(q,r.concat([s]))},p)});if(o.length){return m.apply(this,o)}else{return m}})}ao.applyEach=aF(ao.eachOf);ao.applyEachSeries=aF(ao.eachOfSeries);ao.forever=function(m,l){var p=aQ(l||ad);var o=aB(m);function n(q){if(q){return p(q)}o(n)}n()};function aB(l){return aJ(function(o){var m=o.pop();o.push(function(){var p=arguments;if(n){ao.setImmediate(function(){m.apply(null,p)})}else{m.apply(null,p)}});var n=true;l.apply(this,o);n=false})}ao.ensureAsync=aB;ao.constant=aJ(function(m){var l=[null].concat(m);return function(n){return n.apply(this,l)}});ao.wrapSync=ao.asyncify=function aP(l){return aJ(function(o){var m=o.pop();var p;try{p=l.apply(this,o)}catch(n){return m(n)}if(aL(p)&&typeof p.then==="function"){p.then(function(q){m(null,q)})["catch"](function(q){m(q.message?q:new Error(q))})}else{m(null,p)}})};if(typeof a==="object"&&a.exports){a.exports=ao}else{if(typeof h==="function"&&h.amd){h([],function(){return ao})}else{aA.async=ao}}}())}).call(this,b("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:3}],2:[function(b,a,c){(function(s){function o(j,m){var n=0;for(var l=j.length-1;l>=0;l--){var k=j[l];if(k==="."){j.splice(l,1)}else{if(k===".."){j.splice(l,1);n++}else{if(n){j.splice(l,1);n--}}}}if(m){for(;n--;n){j.unshift("..")}}return j}var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var r=function(j){return p.exec(j).slice(1)};c.resolve=function(){var k="",m=false;for(var l=arguments.length-1;l>=-1&&!m;l--){var j=(l>=0)?arguments[l]:s.cwd();if(typeof j!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!j){continue}}k=j+"/"+k;m=j.charAt(0)==="/"}k=o(q(k.split("/"),function(n){return !!n}),!m).join("/");return((m?"/":"")+k)||"."};c.normalize=function(j){var k=c.isAbsolute(j),l=d(j,-1)==="/";j=o(q(j.split("/"),function(m){return !!m}),!k).join("/");if(!j&&!k){j="."}if(j&&l){j+="/"}return(k?"/":"")+j};c.isAbsolute=function(j){return j.charAt(0)==="/"};c.join=function(){var j=Array.prototype.slice.call(arguments,0);return c.normalize(q(j,function(k,l){if(typeof k!=="string"){throw new TypeError("Arguments to path.join must be strings")}return k}).join("/"))};c.relative=function(y,x){y=c.resolve(y).substr(1);x=c.resolve(x).substr(1);function k(t){var u=0;for(;u<t.length;u++){if(t[u]!==""){break}}var v=t.length-1;for(;v>=0;v--){if(t[v]!==""){break}}if(u>v){return[]}return t.slice(u,v-u+1)}var z=k(y.split("/"));var l=k(x.split("/"));var m=Math.min(z.length,l.length);var n=m;for(var A=0;A<m;A++){if(z[A]!==l[A]){n=A;break}}var j=[];for(var A=n;A<z.length;A++){j.push("..")}j=j.concat(l.slice(n));return j.join("/")};c.sep="/";c.delimiter=":";c.dirname=function(j){var m=r(j),l=m[0],k=m[1];if(!l&&!k){return"."}if(k){k=k.substr(0,k.length-1)}return l+k};c.basename=function(j,l){var k=r(j)[2];if(l&&k.substr(-1*l.length)===l){k=k.substr(0,k.length-l.length)}return k};c.extname=function(j){return r(j)[3]};function q(m,j){if(m.filter){return m.filter(j)}var k=[];for(var l=0;l<m.length;l++){if(j(m[l],l,m)){k.push(m[l])}}return k}var d="ab".substr(-1)==="b"?function(k,j,l){return k.substr(j,l)}:function(k,j,l){if(j<0){j=k.length+j}return k.substr(j,l)}}).call(this,b("_process"))},{_process:3}],3:[function(w,x,u){var y=x.exports={};var t=[];var c=false;var s;var r=-1;function d(){c=false;if(s.length){t=s.concat(t)}else{r=-1}if(t.length){a()}}function a(){if(c){return}var j=setTimeout(d);c=true;var k=t.length;while(k){s=t;t=[];while(++r<k){if(s){s[r].run()}}r=-1;k=t.length}s=null;c=false;clearTimeout(j)}y.nextTick=function(l){var k=new Array(arguments.length-1);if(arguments.length>1){for(var j=1;j<arguments.length;j++){k[j-1]=arguments[j]}}t.push(new v(l,k));if(t.length===1&&!c){setTimeout(a,0)}};function v(k,j){this.fun=k;this.array=j}v.prototype.run=function(){this.fun.apply(null,this.array)};y.title="browser";y.browser=true;y.env={};y.argv=[];y.version="";y.versions={};function b(){}y.on=b;y.addListener=b;y.once=b;y.off=b;y.removeListener=b;y.removeAllListeners=b;y.emit=b;y.binding=function(j){throw new Error("process.binding is not supported")};y.cwd=function(){return"/"};y.chdir=function(j){throw new Error("process.chdir is not supported")};y.umask=function(){return 0}},{}],4:[function(b,a,c){(function(d){
/*! https://mths.be/punycode v1.3.2 by @mathias */
(function(ab){var aa=typeof c=="object"&&c&&!c.nodeType&&c;var R=typeof a=="object"&&a&&!a.nodeType&&a;var ad=typeof d=="object"&&d;if(ad.global===ad||ad.window===ad||ad.self===ad){ab=ad}var av,ap=2147483647,ai=36,ae=1,Y=26,ao=38,ag=700,ac=72,aq=128,T="-",ak=/^xn--/,aw=/[^\x20-\x7E]/,az=/[\x2E\u3002\uFF0E\uFF61]/g,at={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ar=ai-ae,X=Math.floor,af=String.fromCharCode,S;function Z(j){throw RangeError(at[j])}function V(j,l){var k=j.length;var m=[];while(k--){m[k]=l(j[k])}return m}function ax(n,m){var k=n.split("@");var o="";if(k.length>1){o=k[0]+"@";n=k[1]}n=n.replace(az,"\x2E");var j=n.split(".");var l=V(j,m).join(".");return o+l}function aj(l){var m=[],n=0,k=l.length,j,o;while(n<k){j=l.charCodeAt(n++);if(j>=55296&&j<=56319&&n<k){o=l.charCodeAt(n++);if((o&64512)==56320){m.push(((j&1023)<<10)+(o&1023)+65536)}else{m.push(j);n--}}else{m.push(j)}}return m}function W(j){return V(j,function(k){var l="";if(k>65535){k-=65536;l+=af(k>>>10&1023|55296);k=56320|k&1023}l+=af(k);return l}).join("")}function au(j){if(j-48<10){return j-22}if(j-65<26){return j-65}if(j-97<26){return j-97}return ai}function ah(j,k){return j+22+75*(j<26)-((k!=0)<<5)}function ay(j,l,k){var m=0;j=k?X(j/ag):j>>1;j+=X(j/l);for(;j>ar*Y>>1;m+=ai){j=X(j/ar)}return X(m+(ar+1)*j/(j+ao))}function am(w){var q=[],n=w.length,l,k=0,r=aq,j=ac,o,m,y,s,v,p,x,t,u;o=w.lastIndexOf(T);if(o<0){o=0}for(m=0;m<o;++m){if(w.charCodeAt(m)>=128){Z("not-basic")}q.push(w.charCodeAt(m))}for(y=o>0?o+1:0;y<n;){for(s=k,v=1,p=ai;;p+=ai){if(y>=n){Z("invalid-input")}x=au(w.charCodeAt(y++));if(x>=ai||x>X((ap-k)/v)){Z("overflow")}k+=x*v;t=p<=j?ae:(p>=j+Y?Y:p-j);if(x<t){break}u=ai-t;if(v>X(ap/u)){Z("overflow")}v*=u}l=q.length+1;j=ay(k-s,l,s==0);if(X(k/l)>ap-r){Z("overflow")}r+=X(k/l);k%=l;q.splice(k++,0,r)}return W(q)}function al(x){var p,v,j,r,z,k,o,s,l,t,w,q=[],m,n,u,y;x=aj(x);m=x.length;p=aq;v=0;z=ac;for(k=0;k<m;++k){w=x[k];if(w<128){q.push(af(w))}}j=r=q.length;if(r){q.push(T)}while(j<m){for(o=ap,k=0;k<m;++k){w=x[k];if(w>=p&&w<o){o=w}}n=j+1;if(o-p>X((ap-v)/n)){Z("overflow")}v+=(o-p)*n;p=o;for(k=0;k<m;++k){w=x[k];if(w<p&&++v>ap){Z("overflow")}if(w==p){for(s=v,l=ai;;l+=ai){t=l<=z?ae:(l>=z+Y?Y:l-z);if(s<t){break}y=s-t;u=ai-t;q.push(af(ah(t+y%u,0)));s=X(y/u)}q.push(af(ah(s,0)));z=ay(v,n,j==r);v=0;++j}}++v;++p}return q.join("")}function an(j){return ax(j,function(k){return ak.test(k)?am(k.slice(4).toLowerCase()):k})}function U(j){return ax(j,function(k){return aw.test(k)?"xn--"+al(k):k})}av={version:"1.3.2",ucs2:{decode:aj,encode:W},decode:am,encode:al,toASCII:U,toUnicode:an};if(typeof h=="function"&&typeof h.amd=="object"&&h.amd){h("punycode",function(){return av})}else{if(aa&&R){if(a.exports==aa){R.exports=av}else{for(S in av){av.hasOwnProperty(S)&&(aa[S]=av[S])}}}else{ab.punycode=av}}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(c,b,d){function a(m,j){return Object.prototype.hasOwnProperty.call(m,j)}b.exports=function(v,E,I,x){E=E||"&";I=I||"=";var F={};if(typeof v!=="string"||v.length===0){return F}var C=/\+/g;v=v.split(E);var M=1000;if(x&&typeof x.maxKeys==="number"){M=x.maxKeys}var D=v.length;if(M>0&&D>M){D=M}for(var G=0;G<D;++G){var N=v[G].replace(C,"%20"),L=N.indexOf(I),j,J,H,K;if(L>=0){j=N.substr(0,L);J=N.substr(L+1)}else{j=N;J=""}H=decodeURIComponent(j);K=decodeURIComponent(J);if(!a(F,H)){F[H]=K}else{if(k(F[H])){F[H].push(K)}else{F[H]=[F[H],K]}}}return F};var k=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"}},{}],6:[function(d,c,m){var a=function(j){switch(typeof j){case"string":return j;case"boolean":return j?"true":"false";case"number":return isFinite(j)?j:"";default:return""}};c.exports=function(k,l,j,q){l=l||"&";j=j||"=";if(k===null){k=undefined}if(typeof k==="object"){return b(n(k),function(s){var p=encodeURIComponent(a(s))+j;if(o(k[s])){return b(k[s],function(r){return p+encodeURIComponent(a(r))}).join(l)}else{return p+encodeURIComponent(a(k[s]))}}).join(l)}if(!q){return""}return encodeURIComponent(a(q))+j+encodeURIComponent(a(k))};var o=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function b(j,k){if(j.map){return j.map(k)}var l=[];for(var q=0;q<j.length;q++){l.push(k(j[q],q))}return l}var n=Object.keys||function(k){var l=[];for(var j in k){if(Object.prototype.hasOwnProperty.call(k,j)){l.push(j)}}return l}},{}],7:[function(b,a,c){c.decode=c.parse=b("./decode");c.encode=c.stringify=b("./encode")},{"./decode":5,"./encode":6}],8:[function(Q,Z,K){var aa=Q("punycode");K.parse=P;K.resolve=L;K.resolveObject=U;K.format=H;K.Url=c;function c(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var W=/^([a-z0-9.+-]+:)/i,ac=/:[0-9]*$/,T=["<",">",'"',"`"," ","\r","\n","\t"],ab=["{","}","|","\\","^","`"].concat(T),O=["'"].concat(ab),M=["%","/","?",";","#"].concat(O),a=["/","?","#"],I=255,S=/^[a-z0-9A-Z_-]{0,63}$/,X=/^([a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:true,"javascript:":true},d={javascript:true,"javascript:":true},V={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},Y=Q("querystring");function P(l,j,k){if(l&&J(l)&&l instanceof c){return l}var m=new c;m.parse(l,j,k);return m}c.prototype.parse=function(x,an,aj){if(!G(x)){throw new TypeError("Parameter 'url' must be a string, not "+typeof x)}var r=x;r=r.trim();var m=W.exec(r);if(m){m=m[0];var ae=m.toLowerCase();this.protocol=ae;r=r.substr(m.length)}if(aj||m||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var z=r.substr(0,2)==="//";if(z&&!(m&&d[m])){r=r.substr(2);this.slashes=true}}if(!d[m]&&(z||(m&&!V[m]))){var B=-1;for(var am=0;am<a.length;am++){var ak=r.indexOf(a[am]);if(ak!==-1&&(B===-1||ak<B)){B=ak}}var t,p;if(B===-1){p=r.lastIndexOf("@")}else{p=r.lastIndexOf("@",B)}if(p!==-1){t=r.slice(0,p);r=r.slice(p+1);this.auth=decodeURIComponent(t)}B=-1;for(var am=0;am<M.length;am++){var ak=r.indexOf(M[am]);if(ak!==-1&&(B===-1||ak<B)){B=ak}}if(B===-1){B=r.length}this.host=r.slice(0,B);r=r.slice(B);this.parseHost();this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){var u=this.hostname.split(/\./);for(var am=0,k=u.length;am<k;am++){var l=u[am];if(!l){continue}if(!l.match(S)){var E="";for(var ao=0,j=l.length;ao<j;ao++){if(l.charCodeAt(ao)>127){E+="x"}else{E+=l[ao]}}if(!E.match(S)){var ap=u.slice(0,am);var v=u.slice(am+1);var s=l.match(X);if(s){ap.push(s[1]);v.unshift(s[2])}if(v.length){r="/"+v.join(".")+r}this.hostname=ap.join(".");break}}}}if(this.hostname.length>I){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!y){var w=this.hostname.split(".");var o=[];for(var am=0;am<w.length;++am){var q=w[am];o.push(q.match(/[^A-Za-z0-9_-]/)?"xn--"+aa.encode(q):q)}this.hostname=o.join(".")}var n=this.port?":"+this.port:"";var al=this.hostname||"";this.host=al+n;this.href+=this.host;if(y){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(r[0]!=="/"){r="/"+r}}}if(!b[ae]){for(var am=0,k=O.length;am<k;am++){var F=O[am];var D=encodeURIComponent(F);if(D===F){D=escape(F)}r=r.split(F).join(D)}}var C=r.indexOf("#");if(C!==-1){this.hash=r.substr(C);r=r.slice(0,C)}var A=r.indexOf("?");if(A!==-1){this.search=r.substr(A);this.query=r.substr(A+1);if(an){this.query=Y.parse(this.query)}r=r.slice(0,A)}else{if(an){this.search="";this.query={}}}if(r){this.pathname=r}if(V[ae]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var n=this.pathname||"";var q=this.search||"";this.path=n+q}this.href=this.format();return this};function H(j){if(G(j)){j=P(j)}if(!(j instanceof c)){return c.prototype.format.call(j)}return j.format()}c.prototype.format=function(){var m=this.auth||"";if(m){m=encodeURIComponent(m);m=m.replace(/%3A/i,":");m+="@"}var p=this.protocol||"",j=this.pathname||"",k=this.hash||"",n=false,l="";if(this.host){n=m+this.host}else{if(this.hostname){n=m+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){n+=":"+this.port}}}if(this.query&&J(this.query)&&Object.keys(this.query).length){l=Y.stringify(this.query)}var o=this.search||(l&&("?"+l))||"";if(p&&p.substr(-1)!==":"){p+=":"}if(this.slashes||(!p||V[p])&&n!==false){n="//"+(n||"");if(j&&j.charAt(0)!=="/"){j="/"+j}}else{if(!n){n=""}}if(k&&k.charAt(0)!=="#"){k="#"+k}if(o&&o.charAt(0)!=="?"){o="?"+o}j=j.replace(/[?#]/g,function(q){return encodeURIComponent(q)});o=o.replace("#","%23");return p+n+j+o+k};function L(j,k){return P(j,false,true).resolve(k)}c.prototype.resolve=function(j){return this.resolveObject(P(j,false,true)).format()};function U(j,k){if(!j){return k}return P(j,false,true).resolveObject(k)}c.prototype.resolveObject=function(k){if(G(k)){var y=new c();y.parse(k,false,true);k=y}var u=new c();Object.keys(this).forEach(function(B){u[B]=this[B]},this);u.hash=k.hash;if(k.href===""){u.href=u.format();return u}if(k.slashes&&!k.protocol){Object.keys(k).forEach(function(B){if(B!=="protocol"){u[B]=k[B]}});if(V[u.protocol]&&u.hostname&&!u.pathname){u.path=u.pathname="/"}u.href=u.format();return u}if(k.protocol&&k.protocol!==u.protocol){if(!V[k.protocol]){Object.keys(k).forEach(function(B){u[B]=k[B]});u.href=u.format();return u}u.protocol=k.protocol;if(!k.host&&!d[k.protocol]){var j=(k.pathname||"").split("/");while(j.length&&!(k.host=j.shift())){}if(!k.host){k.host=""}if(!k.hostname){k.hostname=""}if(j[0]!==""){j.unshift("")}if(j.length<2){j.unshift("")}u.pathname=j.join("/")}else{u.pathname=k.pathname}u.search=k.search;u.query=k.query;u.host=k.host||"";u.auth=k.auth;u.hostname=k.hostname||k.host;u.port=k.port;if(u.pathname||u.search){var q=u.pathname||"";var s=u.search||"";u.path=q+s}u.slashes=u.slashes||k.slashes;u.href=u.format();return u}var r=(u.pathname&&u.pathname.charAt(0)==="/"),n=(k.host||k.pathname&&k.pathname.charAt(0)==="/"),m=(n||r||(u.host&&k.pathname)),x=m,t=u.pathname&&u.pathname.split("/")||[],j=k.pathname&&k.pathname.split("/")||[],z=u.protocol&&!V[u.protocol];if(z){u.hostname="";u.port=null;if(u.host){if(t[0]===""){t[0]=u.host}else{t.unshift(u.host)}}u.host="";if(k.protocol){k.hostname=null;k.port=null;if(k.host){if(j[0]===""){j[0]=k.host}else{j.unshift(k.host)}}k.host=null}m=m&&(j[0]===""||t[0]==="")}if(n){u.host=(k.host||k.host==="")?k.host:u.host;u.hostname=(k.hostname||k.hostname==="")?k.hostname:u.hostname;u.search=k.search;u.query=k.query;t=j}else{if(j.length){if(!t){t=[]}t.pop();t=t.concat(j);u.search=k.search;u.query=k.query}else{if(!N(k.search)){if(z){u.hostname=u.host=t.shift();var o=u.host&&u.host.indexOf("@")>0?u.host.split("@"):false;if(o){u.auth=o.shift();u.host=u.hostname=o.shift()}}u.search=k.search;u.query=k.query;if(!R(u.pathname)||!R(u.search)){u.path=(u.pathname?u.pathname:"")+(u.search?u.search:"")}u.href=u.format();return u}}}if(!t.length){u.pathname=null;if(u.search){u.path="/"+u.search}else{u.path=null}u.href=u.format();return u}var w=t.slice(-1)[0];var A=((u.host||k.host)&&(w==="."||w==="..")||w==="");var v=0;for(var l=t.length;l>=0;l--){w=t[l];if(w=="."){t.splice(l,1)}else{if(w===".."){t.splice(l,1);v++}else{if(v){t.splice(l,1);v--}}}}if(!m&&!x){for(;v--;v){t.unshift("..")}}if(m&&t[0]!==""&&(!t[0]||t[0].charAt(0)!=="/")){t.unshift("")}if(A&&(t.join("/").substr(-1)!=="/")){t.push("")}var p=t[0]===""||(t[0]&&t[0].charAt(0)==="/");if(z){u.hostname=u.host=p?"":t.length?t.shift():"";var o=u.host&&u.host.indexOf("@")>0?u.host.split("@"):false;if(o){u.auth=o.shift();u.host=u.hostname=o.shift()}}m=m||(u.host&&t.length);if(m&&!p){t.unshift("")}if(!t.length){u.pathname=null;u.path=null}else{u.pathname=t.join("/")}if(!R(u.pathname)||!R(u.search)){u.path=(u.pathname?u.pathname:"")+(u.search?u.search:"")}u.auth=k.auth||u.auth;u.slashes=u.slashes||k.slashes;u.href=u.format();return u};c.prototype.parseHost=function(){var j=this.host;var k=ac.exec(j);if(k){k=k[0];if(k!==":"){this.port=k.substr(1)}j=j.substr(0,j.length-k.length)}if(j){this.hostname=j}};function G(j){return typeof j==="string"}function J(j){return typeof j==="object"&&j!==null}function R(j){return j===null}function N(j){return j==null}},{punycode:4,querystring:7}],9:[function(O,Z,H){Z.exports=T;function T(q,m,p){p=p||2;var o=m&&m.length,s=o?m[0]*p:q.length,n=d(q,N(q,0,s,p,true)),u=[];if(!n){return u}var t,v,w,x,k,l,j;if(o){n=b(q,m,n,p)}if(q.length>80*p){t=w=q[0];v=x=q[1];for(var r=p;r<s;r+=p){k=q[r];l=q[r+1];if(k<t){t=k}if(l<v){v=l}if(k>w){w=k}if(l>x){x=l}}j=Math.max(w-t,x-v)}aa(q,n,u,p,t,v,j);return u}function N(n,q,p,l,r){var k=0,m,o,j;for(m=q,o=p-l;m<p;m+=l){k+=(n[o]-n[m])*(n[m+1]+n[o+1]);o=m}if(r===(k>0)){for(m=q;m<p;m+=l){j=V(m,j)}}else{for(m=p-l;m>=q;m-=l){j=V(m,j)}}return j}function d(k,j,n){if(!n){n=j}var l=j,m;do{m=false;if(!l.steiner&&(K(k,l.i,l.next.i)||L(k,l.prev.i,l.i,l.next.i)===0)){l.prev.next=l.next;l.next.prev=l.prev;if(l.prevZ){l.prevZ.nextZ=l.nextZ}if(l.nextZ){l.nextZ.prevZ=l.prevZ}l=n=l.prev;if(l===l.next){return null}m=true}else{l=l.next}}while(m||l!==n);return n}function aa(o,s,q,m,p,t,j,k){if(!s){return}if(!k&&p!==undefined){Q(o,s,p,t,j)}var l=s,r,n;while(s.prev!==s.next){r=s.prev;n=s.next;if(a(o,s,p,t,j)){q.push(r.i/m);q.push(s.i/m);q.push(n.i/m);n.prev=r;r.next=n;if(s.prevZ){s.prevZ.nextZ=s.nextZ}if(s.nextZ){s.nextZ.prevZ=s.prevZ}s=n.next;l=n.next;continue}s=n;if(s===l){if(!k){aa(o,d(o,s),q,m,p,t,j,1)}else{if(k===1){s=G(o,s,q,m);aa(o,s,q,m,p,t,j,2)}else{if(k===2){I(o,s,q,m,p,t,j)}}}break}}}function a(E,u,an,aq,o){var F=u.prev.i,am=u.i,ap=u.next.i,t=E[F],w=E[F+1],au=E[am],ax=E[am+1],B=E[ap],C=E[ap+1],ao=t*ax-w*au,z=t*C-w*B,D=B*ax-C*au,n=ao-z-D;if(n<=0){return false}var A=C-w,av=t-B,x=w-ax,l=au-t,j,p,q,r,s,k,m;if(an!==undefined){var v=t<au?(t<B?t:B):(au<B?au:B),y=w<ax?(w<C?w:C):(ax<C?ax:C),aw=t>au?(t>B?t:B):(au>B?au:B),ay=w>ax?(w>C?w:C):(ax>C?ax:C),ar=ac(v,y,an,aq,o),at=ac(aw,ay,an,aq,o);m=u.nextZ;while(m&&m.z<=at){j=m.i;m=m.nextZ;if(j===F||j===ap){continue}p=E[j];q=E[j+1];r=A*p+av*q-z;if(r>=0){s=x*p+l*q+ao;if(s>=0){k=n-r-s;if((k>=0)&&((r&&s)||(r&&k)||(s&&k))){return false}}}}m=u.prevZ;while(m&&m.z>=ar){j=m.i;m=m.prevZ;if(j===F||j===ap){continue}p=E[j];q=E[j+1];r=A*p+av*q-z;if(r>=0){s=x*p+l*q+ao;if(s>=0){k=n-r-s;if((k>=0)&&((r&&s)||(r&&k)||(s&&k))){return false}}}}}else{m=u.next.next;while(m!==u.prev){j=m.i;m=m.next;p=E[j];q=E[j+1];r=A*p+av*q-z;if(r>=0){s=x*p+l*q+ao;if(s>=0){k=n-r-s;if((k>=0)&&((r&&s)||(r&&k)||(s&&k))){return false}}}}}return true}function G(o,r,p,n){var q=r;do{var k=q.prev,l=q.next.next;if(k.i!==l.i&&ab(o,k.i,q.i,q.next.i,l.i)&&P(o,k,l)&&P(o,l,k)){p.push(k.i/n);p.push(q.i/n);p.push(l.i/n);k.next=l;l.prev=k;var j=q.prevZ,m=q.nextZ&&q.nextZ.nextZ;if(j){j.nextZ=m}if(m){m.prevZ=j}q=r=l}q=q.next}while(q!==r);return q}function I(o,s,q,n,p,r,j){var k=s;do{var l=k.next.next;while(l!==k.prev){if(k.i!==l.i&&S(o,k,l)){var m=R(k,l);k=d(o,k,k.next);m=d(o,m,m.next);aa(o,k,q,n,p,r,j);aa(o,m,q,n,p,r,j);return}l=l.next}k=k.next}while(k!==s)}function b(q,j,n,o){var m=[],p,l,s,r,k;for(p=0,l=j.length;p<l;p++){s=j[p]*o;r=p<l-1?j[p+1]*o:q.length;k=N(q,s,r,o,false);if(k===k.next){k.steiner=true}k=d(q,k);if(k){m.push(U(q,k))}}m.sort(function(t,u){return q[t.i]-q[u.i]});for(p=0;p<m.length;p++){W(q,m[p],n);n=d(q,n,n.next)}return n}function W(j,k,l){l=M(j,k,l);if(l){var m=R(l,k);d(j,m,m.next)}}function M(D,y,w){var m=w,j=y.i,o=D[j],p=D[j+1],aj=-Infinity,B,E,ai;do{E=m.i;ai=m.next.i;if(p<=D[E+1]&&p>=D[ai+1]){var ah=D[E]+(p-D[E+1])*(D[ai]-D[E])/(D[ai+1]-D[E+1]);if(ah<=o&&ah>aj){aj=ah;B=D[E]<D[ai]?m:m.next}}m=m.next}while(m!==w);if(!B){return null}var al=D[B.i],am=D[B.i+1],A=o*am-p*al,s=o*p-p*aj,x=p-p,C=o-aj,k=p-am,an=al-o,n=A-s-(aj*am-p*al),F=n<=0?-1:1,l=B,v=Infinity,q,t,z,r,u,ak;m=B.next;while(m!==l){q=D[m.i];t=D[m.i+1];z=o-q;if(z>=0&&q>=al){r=(x*q+C*t-s)*F;if(r>=0){u=(k*q+an*t+A)*F;if(u>=0&&n*F-r-u>=0){ak=Math.abs(p-t)/z;if(ak<v&&P(D,m,y)){B=m;v=ak}}}}m=m.next}return B}function Q(l,j,o,k,n){var m=j;do{if(m.z===null){m.z=ac(l[m.i],l[m.i+1],o,k,n)}m.prevZ=m.prev;m.nextZ=m.next;m=m.next}while(m!==j);m.prevZ.nextZ=null;m.prevZ=null;X(m)}function X(m){var p,q,r,n,l,s,k,o,j=1;do{q=m;m=null;l=null;s=0;while(q){s++;r=q;k=0;for(p=0;p<j;p++){k++;r=r.nextZ;if(!r){break}}o=j;while(k>0||(o>0&&r)){if(k===0){n=r;r=r.nextZ;o--}else{if(o===0||!r){n=q;q=q.nextZ;k--}else{if(q.z<=r.z){n=q;q=q.nextZ;k--}else{n=r;r=r.nextZ;o--}}}if(l){l.nextZ=n}else{m=n}n.prevZ=l;l=n}q=r}l.nextZ=null;j*=2}while(s>1);return m}function ac(m,j,n,k,l){m=1000*(m-n)/l;m=(m|(m<<8))&16711935;m=(m|(m<<4))&252645135;m=(m|(m<<2))&858993459;m=(m|(m<<1))&1431655765;j=1000*(j-k)/l;j=(j|(j<<8))&16711935;j=(j|(j<<4))&252645135;j=(j|(j<<2))&858993459;j=(j|(j<<1))&1431655765;return m|(j<<1)}function U(k,j){var l=j,m=j;do{if(k[l.i]<k[m.i]){m=l}l=l.next}while(l!==j);return m}function S(j,k,l){return k.next.i!==l.i&&k.prev.i!==l.i&&!c(j,k,k.i,l.i)&&P(j,k,l)&&P(j,l,k)&&Y(j,k,k.i,l.i)}function L(l,k,m,n){var j=(l[m+1]-l[k+1])*(l[n]-l[m])-(l[m]-l[k])*(l[n+1]-l[m+1]);return j>0?1:j<0?-1:0}function K(l,j,k){return l[j]===l[k]&&l[j+1]===l[k+1]}function ab(m,k,n,l,j){return L(m,k,n,l)!==L(m,k,n,j)&&L(m,l,j,k)!==L(m,l,j,n)}function c(l,p,n,o){var m=p;do{var j=m.i,k=m.next.i;if(j!==n&&k!==n&&j!==o&&k!==o&&ab(l,j,k,n,o)){return true}m=m.next}while(m!==p);return false}function P(j,k,l){return L(j,k.prev.i,k.i,k.next.i)===-1?L(j,k.i,l.i,k.next.i)!==-1&&L(j,k.i,k.prev.i,l.i)!==-1:L(j,k.i,l.i,k.prev.i)===-1||L(j,k.i,k.next.i,l.i)===-1}function Y(p,s,m,o){var r=s,q=false,l=(p[m]+p[o])/2,n=(p[m+1]+p[o+1])/2;do{var j=r.i,k=r.next.i;if(((p[j+1]>n)!==(p[k+1]>n))&&(l<(p[k]-p[j])*(n-p[j+1])/(p[k+1]-p[j+1])+p[j])){q=!q}r=r.next}while(r!==s);return q}function R(m,n){var o=new J(m.i),l=new J(n.i),j=m.next,k=n.prev;m.next=n;n.prev=m;o.next=j;j.prev=o;l.next=o;o.prev=l;k.next=l;l.prev=k;return l}function V(l,j){var k=new J(l);if(!j){k.prev=k;k.next=k}else{k.next=j.next;k.prev=j;j.next.prev=k;j.next=k}return k}function J(j){this.i=j;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}},{}],10:[function(x,y,w){var u=typeof Object.create!=="function"?"~":false;function a(j,l,k){this.fn=j;this.context=l;this.once=k||false}function b(){}b.prototype._events=undefined;b.prototype.listeners=function s(j,k){var m=u?u+j:j,p=this._events&&this._events[m];if(k){return !!p}if(!p){return[]}if(p.fn){return[p.fn]}for(var l=0,n=p.length,o=new Array(n);l<n;l++){o[l]=p[l].fn}return o};b.prototype.emit=function d(G,r,F,I,H,j){var k=u?u+G:G;if(!this._events||!this._events[k]){return false}var l=this._events[k],n=arguments.length,m,o;if("function"===typeof l.fn){if(l.once){this.removeListener(G,l.fn,undefined,true)}switch(n){case 1:return l.fn.call(l.context),true;case 2:return l.fn.call(l.context,r),true;case 3:return l.fn.call(l.context,r,F),true;case 4:return l.fn.call(l.context,r,F,I),true;case 5:return l.fn.call(l.context,r,F,I,H),true;case 6:return l.fn.call(l.context,r,F,I,H,j),true}for(o=1,m=new Array(n-1);o<n;o++){m[o-1]=arguments[o]}l.fn.apply(l.context,m)}else{var q=l.length,p;for(o=0;o<q;o++){if(l[o].once){this.removeListener(G,l[o].fn,undefined,true)}switch(n){case 1:l[o].fn.call(l[o].context);break;case 2:l[o].fn.call(l[o].context,r);break;case 3:l[o].fn.call(l[o].context,r,F);break;default:if(!m){for(p=1,m=new Array(n-1);p<n;p++){m[p-1]=arguments[p]}}l[o].fn.apply(l[o].context,m)}}}return true};b.prototype.on=function t(k,l,m){var j=new a(l,m||this),n=u?u+k:k;if(!this._events){this._events=u?{}:Object.create(null)}if(!this._events[n]){this._events[n]=j}else{if(!this._events[n].fn){this._events[n].push(j)}else{this._events[n]=[this._events[n],j]}}return this};b.prototype.once=function z(k,l,m){var j=new a(l,m||this,true),n=u?u+k:k;if(!this._events){this._events=u?{}:Object.create(null)}if(!this._events[n]){this._events[n]=j}else{if(!this._events[n].fn){this._events[n].push(j)}else{this._events[n]=[this._events[n],j]}}return this};b.prototype.removeListener=function v(r,l,p,q){var k=u?u+r:r;if(!this._events||!this._events[k]){return this}var m=this._events[k],j=[];if(l){if(m.fn){if(m.fn!==l||(q&&!m.once)||(p&&m.context!==p)){j.push(m)}}else{for(var n=0,o=m.length;n<o;n++){if(m[n].fn!==l||(q&&!m[n].once)||(p&&m[n].context!==p)){j.push(m[n])}}}}if(j.length){this._events[k]=j.length===1?j[0]:j}else{delete this._events[k]}return this};b.prototype.removeAllListeners=function c(j){if(!this._events){return this}if(j){delete this._events[u?u+j:j]}else{this._events=u?{}:Object.create(null)}return this};b.prototype.off=b.prototype.removeListener;b.prototype.addListener=b.prototype.on;b.prototype.setMaxListeners=function A(){return this};b.prefixed=u;if("undefined"!==typeof y){y.exports=b}},{}],11:[function(d,c,m){var b=Object.prototype.hasOwnProperty;var l=Object.prototype.propertyIsEnumerable;function a(j){if(j===null||j===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(j)}c.exports=Object.assign||function(v,w){var s;var u=a(v);var k;for(var x=1;x<arguments.length;x++){s=Object(arguments[x]);for(var y in s){if(b.call(s,y)){u[y]=s[y]}}if(Object.getOwnPropertySymbols){k=Object.getOwnPropertySymbols(s);for(var j=0;j<k.length;j++){if(l.call(s,k[j])){u[k[j]]=s[k[j]]}}}}return u}},{}],12:[function(b,a,c){a.exports={name:"pixi.js",version:"3.0.8",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^1.4.2",brfs:"^1.4.1",earcut:"^2.0.2",eventemitter3:"^1.1.1","gulp-header":"^1.7.1","object-assign":"^4.0.1","resource-loader":"^1.6.2"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],13:[function(b,a,c){var d={VERSION:b("../../package.json").version,PI_2:Math.PI*2,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:0.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,roundPixels:false},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2000};a.exports=d},{"../../package.json":12}],14:[function(d,c,n){var b=d("../math"),o=d("./DisplayObject"),a=d("../textures/RenderTexture"),p=new b.Matrix();function q(){o.call(this);this.children=[]}q.prototype=Object.create(o.prototype);q.prototype.constructor=q;c.exports=q;Object.defineProperties(q.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(j){var k=this.getLocalBounds().width;if(k!==0){this.scale.x=j/k}else{this.scale.x=1}this._width=j}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(j){var k=this.getLocalBounds().height;if(k!==0){this.scale.y=j/k}else{this.scale.y=1}this._height=j}}});q.prototype.onChildrenChange=function(){};q.prototype.addChild=function(j){return this.addChildAt(j,this.children.length)};q.prototype.addChildAt=function(j,k){if(j===this){return j}if(k>=0&&k<=this.children.length){if(j.parent){j.parent.removeChild(j)}j.parent=this;this.children.splice(k,0,j);this.onChildrenChange(k);j.emit("added",this);return j}else{throw new Error(j+"addChildAt: The index "+k+" supplied is out of bounds "+this.children.length)}};q.prototype.swapChildren=function(j,m){if(j===m){return}var k=this.getChildIndex(j);var l=this.getChildIndex(m);if(k<0||l<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[k]=m;this.children[l]=j;this.onChildrenChange(k<l?k:l)};q.prototype.getChildIndex=function(j){var k=this.children.indexOf(j);if(k===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return k};q.prototype.setChildIndex=function(j,k){if(k<0||k>=this.children.length){throw new Error("The supplied index is out of bounds")}var l=this.getChildIndex(j);this.children.splice(l,1);this.children.splice(k,0,j);this.onChildrenChange(k)};q.prototype.getChildAt=function(j){if(j<0||j>=this.children.length){throw new Error("getChildAt: Supplied index "+j+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[j]};q.prototype.removeChild=function(j){var k=this.children.indexOf(j);if(k===-1){return}return this.removeChildAt(k)};q.prototype.removeChildAt=function(k){var j=this.getChildAt(k);j.parent=null;this.children.splice(k,1);this.onChildrenChange(k);j.emit("removed",this);return j};q.prototype.removeChildren=function(l,k){var m=l||0;var w=typeof k==="number"?k:this.children.length;var v=w-m;var j,u;if(v>0&&v<=w){j=this.children.splice(m,v);for(u=0;u<j.length;++u){j[u].parent=null}this.onChildrenChange(l);for(u=0;u<j.length;++u){j[u].emit("removed",this)}return j}else{if(v===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}}};q.prototype.generateTexture=function(j,m,l){var k=this.getLocalBounds();var s=new a(j,k.width|0,k.height|0,l,m);p.tx=-k.x;p.ty=-k.y;s.render(this,p);return s};q.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();for(var j=0,k=this.children.length;j<k;++j){this.children[j].updateTransform()}};q.prototype.containerUpdateTransform=q.prototype.updateTransform;q.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0){return b.Rectangle.EMPTY}var F=Infinity;var G=Infinity;var l=-Infinity;var m=-Infinity;var E;var A;var B;var k=false;for(var C=0,D=this.children.length;C<D;++C){var j=this.children[C];if(!j.visible){continue}k=true;E=this.children[C].getBounds();F=F<E.x?F:E.x;G=G<E.y?G:E.y;A=E.width+E.x;B=E.height+E.y;l=l>A?l:A;m=m>B?m:B}if(!k){return b.Rectangle.EMPTY}var z=this._bounds;z.x=F;z.y=G;z.width=l-F;z.height=m-G;this._currentBounds=z}return this._currentBounds};q.prototype.containerGetBounds=q.prototype.getBounds;q.prototype.getLocalBounds=function(){var l=this.worldTransform;this.worldTransform=b.Matrix.IDENTITY;for(var j=0,k=this.children.length;j<k;++j){this.children[j].updateTransform()}this.worldTransform=l;this._currentBounds=null;return this.getBounds(b.Matrix.IDENTITY)};q.prototype.renderWebGL=function(j){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var k,l;if(this._mask||this._filters){j.currentRenderer.flush();if(this._filters&&this._filters.length){j.filterManager.pushFilter(this,this._filters)}if(this._mask){j.maskManager.pushMask(this,this._mask)}j.currentRenderer.start();this._renderWebGL(j);for(k=0,l=this.children.length;k<l;k++){this.children[k].renderWebGL(j)}j.currentRenderer.flush();if(this._mask){j.maskManager.popMask(this,this._mask)}if(this._filters){j.filterManager.popFilter()}j.currentRenderer.start()}else{this._renderWebGL(j);for(k=0,l=this.children.length;k<l;++k){this.children[k].renderWebGL(j)}}};q.prototype._renderWebGL=function(j){};q.prototype._renderCanvas=function(j){};q.prototype.renderCanvas=function(j){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){j.maskManager.pushMask(this._mask,j)}this._renderCanvas(j);for(var k=0,l=this.children.length;k<l;++k){this.children[k].renderCanvas(j)}if(this._mask){j.maskManager.popMask(j)}};q.prototype.destroy=function(j){o.prototype.destroy.call(this);if(j){for(var k=0,l=this.children.length;k<l;++k){this.children[k].destroy(j)}}this.removeChildren();this.children=null}},{"../math":23,"../textures/RenderTexture":61,"./DisplayObject":15}],15:[function(s,t,r){var c=s("../math"),p=s("../textures/RenderTexture"),b=s("eventemitter3"),a=s("../const"),d=new c.Matrix(),u={worldTransform:new c.Matrix(),worldAlpha:1,children:[]};function q(){b.call(this);this.position=new c.Point();this.scale=new c.Point(1,1);this.pivot=new c.Point(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.worldTransform=new c.Matrix();this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new c.Rectangle(0,0,1,1);this._currentBounds=null;this._mask=null}q.prototype=Object.create(b.prototype);q.prototype.constructor=q;t.exports=q;Object.defineProperties(q.prototype,{x:{get:function(){return this.position.x},set:function(j){this.position.x=j}},y:{get:function(){return this.position.y},set:function(j){this.position.y=j}},worldVisible:{get:function(){var j=this;do{if(!j.visible){return false}j=j.parent}while(j);return true}},mask:{get:function(){return this._mask},set:function(j){if(this._mask){this._mask.renderable=true}this._mask=j;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(j){this._filters=j&&j.slice()}}});q.prototype.updateTransform=function(){var l=this.parent.worldTransform;var o=this.worldTransform;var m,x,j,k,n,y;if(this.rotation%a.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}m=this._cr*this.scale.x;x=this._sr*this.scale.x;j=-this._sr*this.scale.y;k=this._cr*this.scale.y;n=this.position.x;y=this.position.y;if(this.pivot.x||this.pivot.y){n-=this.pivot.x*m+this.pivot.y*j;y-=this.pivot.x*x+this.pivot.y*k}o.a=m*l.a+x*l.c;o.b=m*l.b+x*l.d;o.c=j*l.a+k*l.c;o.d=j*l.b+k*l.d;o.tx=n*l.a+y*l.c+l.tx;o.ty=n*l.b+y*l.d+l.ty}else{m=this.scale.x;k=this.scale.y;n=this.position.x-this.pivot.x*m;y=this.position.y-this.pivot.y*k;o.a=m*l.a;o.b=m*l.b;o.c=k*l.c;o.d=k*l.d;o.tx=n*l.a+y*l.c+l.tx;o.ty=n*l.b+y*l.d+l.ty}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};q.prototype.displayObjectUpdateTransform=q.prototype.updateTransform;q.prototype.getBounds=function(j){return c.Rectangle.EMPTY};q.prototype.getLocalBounds=function(){return this.getBounds(c.Matrix.IDENTITY)};q.prototype.toGlobal=function(j){if(!this.parent){this.parent=u;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.apply(j)};q.prototype.toLocal=function(k,j){if(j){k=j.toGlobal(k)}if(!this.parent){this.parent=u;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.applyInverse(k)};q.prototype.renderWebGL=function(j){};q.prototype.renderCanvas=function(j){};q.prototype.generateTexture=function(j,l,m){var k=this.getLocalBounds();var n=new p(j,k.width|0,k.height|0,l,m);d.tx=-k.x;d.ty=-k.y;n.render(this,d);return n};q.prototype.setParent=function(j){if(!j||!j.addChild){throw new Error("setParent: Argument must be a Container")}j.addChild(this);return j};q.prototype.destroy=function(){this.position=null;this.scale=null;this.pivot=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.worldTransform=null;this.filterArea=null}},{"../const":13,"../math":23,"../textures/RenderTexture":61,eventemitter3:10}],16:[function(w,x,t){var v=w("../display/Container"),u=w("../textures/Texture"),r=w("../renderers/canvas/utils/CanvasBuffer"),b=w("../renderers/canvas/utils/CanvasGraphics"),d=w("./GraphicsData"),c=w("../math"),a=w("../const"),y=new c.Point();function s(){v.call(this);this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this._prevTint=16777215;this.blendMode=a.BLEND_MODES.NORMAL;this.currentPath=null;this._webGL={};this.isMask=false;this.boundsPadding=0;this._localBounds=new c.Rectangle(0,0,1,1);this.dirty=true;this.glDirty=false;this.boundsDirty=true;this.cachedSpriteDirty=false}s.prototype=Object.create(v.prototype);s.prototype.constructor=s;x.exports=s;s.prototype.clone=function(){var j=new s();j.renderable=this.renderable;j.fillAlpha=this.fillAlpha;j.lineWidth=this.lineWidth;j.lineColor=this.lineColor;j.tint=this.tint;j.blendMode=this.blendMode;j.isMask=this.isMask;j.boundsPadding=this.boundsPadding;j.dirty=true;j.glDirty=true;j.cachedSpriteDirty=this.cachedSpriteDirty;for(var k=0;k<this.graphicsData.length;++k){j.graphicsData.push(this.graphicsData[k].clone())}j.currentPath=j.graphicsData[j.graphicsData.length-1];j.updateLocalBounds();return j};s.prototype.lineStyle=function(m,k,j){this.lineWidth=m||0;this.lineColor=k||0;this.lineAlpha=(j===undefined)?1:j;if(this.currentPath){if(this.currentPath.shape.points.length){var l=new c.Polygon(this.currentPath.shape.points.slice(-2));l.closed=false;this.drawShape(l)}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};s.prototype.moveTo=function(l,j){var k=new c.Polygon([l,j]);k.closed=false;this.drawShape(k);return this};s.prototype.lineTo=function(k,j){this.currentPath.shape.points.push(k,j);this.dirty=true;return this};s.prototype.quadraticCurveTo=function(n,D,l,o){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var j,q,G=20,k=this.currentPath.shape.points;if(k.length===0){this.moveTo(0,0)}var m=k[k.length-2];var p=k[k.length-1];var F=0;for(var E=1;E<=G;++E){F=E/G;j=m+((n-m)*F);q=p+((D-p)*F);k.push(j+(((n+((l-n)*F))-j)*F),q+(((D+((o-D)*F))-q)*F))}this.dirty=this.boundsDirty=true;return this};s.prototype.bezierCurveTo=function(P,n,k,I,L,l){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var M=20,Q,O,j,o,p,K=this.currentPath.shape.points;var N=K[K.length-2];var m=K[K.length-1];var J=0;for(var q=1;q<=M;++q){J=q/M;Q=(1-J);O=Q*Q;j=O*Q;o=J*J;p=o*J;K.push(j*N+3*O*J*P+3*Q*o*k+p*L,j*m+3*O*J*n+3*Q*o*I+p*l)}this.dirty=this.boundsDirty=true;return this};s.prototype.arcTo=function(o,Y,p,ac,W){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(o,Y)}}else{this.moveTo(o,Y)}var T=this.currentPath.shape.points,ae=T[T.length-2],ai=T[T.length-1],j=ai-Y,am=ae-o,k=ac-Y,U=p-o,q=Math.abs(j*U-am*k);if(q<1e-8||W===0){if(T[T.length-2]!==o||T[T.length-1]!==Y){T.push(o,Y)}}else{var l=j*j+am*am,aa=k*k+U*U,ah=j*k+am*U,ak=W*Math.sqrt(l)/q,al=W*Math.sqrt(aa)/q,ag=ak*ah/l,aj=al*ah/aa,Z=ak*U+al*am,ad=ak*k+al*j,ab=am*(al+ag),af=j*(al+ag),m=U*(ak+aj),n=k*(ak+aj),V=Math.atan2(af-ad,ab-Z),X=Math.atan2(n-ad,m-Z);this.arc(Z+o,ad+Y,W,V,X,am*k>U*j)}this.dirty=this.boundsDirty=true;return this};s.prototype.arc=function(U,W,S,T,X,Z){Z=Z||false;if(T===X){return this}if(!Z&&X<=T){X+=Math.PI*2}else{if(Z&&T<=X){T+=Math.PI*2}}var n=Z?(T-X)*-1:(X-T);var Y=Math.ceil(Math.abs(n)/(Math.PI*2))*40;if(n===0){return this}var l=U+Math.cos(T)*S;var p=W+Math.sin(T)*S;if(this.currentPath){this.currentPath.shape.points.push(l,p)}else{this.moveTo(l,p)}var q=this.currentPath.shape.points;var Q=n/(Y*2);var aa=Q*2;var V=Math.cos(Q);var R=Math.sin(Q);var j=Y-1;var O=(j%1)/j;for(var P=0;P<=j;P++){var ab=P+O*P;var m=((Q)+T+(aa*ab));var k=Math.cos(m);var o=-Math.sin(m);q.push(((V*k)+(R*o))*S+U,((V*-o)+(R*k))*S+W)}this.dirty=this.boundsDirty=true;return this};s.prototype.beginFill=function(k,j){this.filling=true;this.fillColor=k||0;this.fillAlpha=(j===undefined)?1:j;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};s.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};s.prototype.drawRect=function(l,j,k,m){this.drawShape(new c.Rectangle(l,j,k,m));return this};s.prototype.drawRoundedRect=function(l,j,k,m,n){this.drawShape(new c.RoundedRectangle(l,j,k,m,n));return this};s.prototype.drawCircle=function(k,j,l){this.drawShape(new c.Circle(k,j,l));return this};s.prototype.drawEllipse=function(l,j,k,m){this.drawShape(new c.Ellipse(l,j,k,m));return this};s.prototype.drawPolygon=function(j){var k=j;var m=true;if(k instanceof c.Polygon){m=k.closed;k=k.points}if(!Array.isArray(k)){k=new Array(arguments.length);for(var l=0;l<k.length;++l){k[l]=arguments[l]}}var n=new c.Polygon(k);n.closed=m;this.drawShape(n);return this};s.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this.clearDirty=true;this.graphicsData=[];return this};s.prototype.generateTexture=function(j,o,m){o=o||1;var k=this.getLocalBounds();var n=new r(k.width*o,k.height*o);var l=u.fromCanvas(n.canvas,m);l.baseTexture.resolution=o;n.context.scale(o,o);n.context.translate(-k.x,-k.y);b.renderGraphics(this,n.context);return l};s.prototype._renderWebGL=function(j){if(this.glDirty){this.dirty=true;this.glDirty=false}j.setObjectRenderer(j.plugins.graphics);j.plugins.graphics.render(this)};s.prototype._renderCanvas=function(j){if(this.isMask===true){return}if(this._prevTint!==this.tint){this.dirty=true}var l=j.context;var m=this.worldTransform;var k=j.blendModes[this.blendMode];if(k!==l.globalCompositeOperation){l.globalCompositeOperation=k}var n=j.resolution;l.setTransform(m.a*n,m.b*n,m.c*n,m.d*n,m.tx*n,m.ty*n);b.renderGraphics(this,l)};s.prototype.getBounds=function(ae){if(!this._currentBounds){if(!this.renderable){return c.Rectangle.EMPTY}if(this.boundsDirty){this.updateLocalBounds();this.glDirty=true;this.cachedSpriteDirty=true;this.boundsDirty=false}var W=this._localBounds;var p=W.x;var Q=W.width+W.x;var S=W.y;var U=W.height+W.y;var ag=ae||this.worldTransform;var k=ag.a;var m=ag.b;var n=ag.c;var q=ag.d;var j=ag.tx;var l=ag.ty;var X=k*Q+n*U+j;var Y=q*U+m*Q+l;var Z=k*p+n*U+j;var aa=q*U+m*p+l;var ac=k*p+n*S+j;var ab=q*S+m*p+l;var af=k*Q+n*S+j;var ad=q*S+m*Q+l;var R=X;var V=Y;var o=X;var T=Y;o=Z<o?Z:o;o=ac<o?ac:o;o=af<o?af:o;T=aa<T?aa:T;T=ab<T?ab:T;T=ad<T?ad:T;R=Z>R?Z:R;R=ac>R?ac:R;R=af>R?af:R;V=aa>V?aa:V;V=ab>V?ab:V;V=ad>V?ad:V;this._bounds.x=o;this._bounds.width=R-o;this._bounds.y=T;this._bounds.height=V-T;this._currentBounds=this._bounds}return this._currentBounds};s.prototype.containsPoint=function(m){this.worldTransform.applyInverse(m,y);var j=this.graphicsData;for(var l=0;l<j.length;l++){var k=j[l];if(!k.fill){continue}if(k.shape){if(k.shape.contains(y.x,y.y)){return true}}}return false};s.prototype.updateLocalBounds=function(){var N=Infinity;var R=-Infinity;var P=Infinity;var k=-Infinity;if(this.graphicsData.length){var j,p,L,O,q,m;for(var n=0;n<this.graphicsData.length;n++){var o=this.graphicsData[n];var Q=o.type;var l=o.lineWidth;j=o.shape;if(Q===a.SHAPES.RECT||Q===a.SHAPES.RREC){L=j.x-l/2;O=j.y-l/2;q=j.width+l;m=j.height+l;N=L<N?L:N;R=L+q>R?L+q:R;P=O<P?O:P;k=O+m>k?O+m:k}else{if(Q===a.SHAPES.CIRC){L=j.x;O=j.y;q=j.radius+l/2;m=j.radius+l/2;N=L-q<N?L-q:N;R=L+q>R?L+q:R;P=O-m<P?O-m:P;k=O+m>k?O+m:k}else{if(Q===a.SHAPES.ELIP){L=j.x;O=j.y;q=j.width+l/2;m=j.height+l/2;N=L-q<N?L-q:N;R=L+q>R?L+q:R;P=O-m<P?O-m:P;k=O+m>k?O+m:k}else{p=j.points;for(var K=0;K<p.length;K+=2){L=p[K];O=p[K+1];N=L-l<N?L-l:N;R=L+l>R?L+l:R;P=O-l<P?O-l:P;k=O+l>k?O+l:k}}}}}}else{N=0;R=0;P=0;k=0}var M=this.boundsPadding;this._localBounds.x=N-M;this._localBounds.width=(R-N)+M*2;this._localBounds.y=P-M;this._localBounds.height=(k-P)+M*2};s.prototype.drawShape=function(k){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var j=new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,k);this.graphicsData.push(j);if(j.type===a.SHAPES.POLY){j.shape.closed=j.shape.closed||this.filling;this.currentPath=j}this.dirty=this.boundsDirty=true;return j};s.prototype.destroy=function(){v.prototype.destroy.apply(this,arguments);for(var k=0;k<this.graphicsData.length;++k){this.graphicsData[k].destroy()}for(var j in this._webgl){for(var l=0;l<this._webgl[j].data.length;++l){this._webgl[j].data[l].destroy()}}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null}},{"../const":13,"../display/Container":14,"../math":23,"../renderers/canvas/utils/CanvasBuffer":35,"../renderers/canvas/utils/CanvasGraphics":36,"../textures/Texture":62,"./GraphicsData":17}],17:[function(c,b,d){function a(t,v,r,u,q,w,s){this.lineWidth=t;this.lineColor=v;this.lineAlpha=r;this._lineTint=v;this.fillColor=u;this.fillAlpha=q;this._fillTint=u;this.fill=w;this.shape=s;this.type=s.type}a.prototype.constructor=a;b.exports=a;a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};a.prototype.destroy=function(){this.shape=null}},{}],18:[function(u,v,t){var c=u("../../utils"),q=u("../../math"),a=u("../../const"),b=u("../../renderers/webgl/utils/ObjectRenderer"),d=u("../../renderers/webgl/WebGLRenderer"),w=u("./WebGLGraphicsData"),r=u("earcut");function s(j){b.call(this,j);this.graphicsDataPool=[];this.primitiveShader=null;this.complexPrimitiveShader=null;this.maximumSimplePolySize=200}s.prototype=Object.create(b.prototype);s.prototype.constructor=s;v.exports=s;d.registerPlugin("graphics",s);s.prototype.onContextChange=function(){};s.prototype.destroy=function(){b.prototype.destroy.call(this);for(var j=0;j<this.graphicsDataPool.length;++j){this.graphicsDataPool[j].destroy()}this.graphicsDataPool=null};s.prototype.render=function(y){var m=this.renderer;var k=m.gl;var o=m.shaderManager.plugins.primitiveShader,l;if(y.dirty){this.updateGraphics(y)}var n=y._webGL[k.id];m.blendModeManager.setBlendMode(y.blendMode);for(var p=0,j=n.data.length;p<j;p++){l=n.data[p];if(n.data[p].mode===1){m.stencilManager.pushStencil(y,l);k.uniform1f(m.shaderManager.complexPrimitiveShader.uniforms.alpha._location,y.worldAlpha*l.alpha);k.drawElements(k.TRIANGLE_FAN,4,k.UNSIGNED_SHORT,(l.indices.length-4)*2);m.stencilManager.popStencil(y,l)}else{o=m.shaderManager.primitiveShader;m.shaderManager.setShader(o);k.uniformMatrix3fv(o.uniforms.translationMatrix._location,false,y.worldTransform.toArray(true));k.uniformMatrix3fv(o.uniforms.projectionMatrix._location,false,m.currentRenderTarget.projectionMatrix.toArray(true));k.uniform3fv(o.uniforms.tint._location,c.hex2rgb(y.tint));k.uniform1f(o.uniforms.alpha._location,y.worldAlpha);k.bindBuffer(k.ARRAY_BUFFER,l.buffer);k.vertexAttribPointer(o.attributes.aVertexPosition,2,k.FLOAT,false,4*6,0);k.vertexAttribPointer(o.attributes.aColor,4,k.FLOAT,false,4*6,2*4);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,l.indexBuffer);k.drawElements(k.TRIANGLE_STRIP,l.indices.length,k.UNSIGNED_SHORT,0)}m.drawCount++}};s.prototype.updateGraphics=function(y){var k=this.renderer.gl;var m=y._webGL[k.id];if(!m){m=y._webGL[k.id]={lastIndex:0,data:[],gl:k}}y.dirty=false;var p;if(y.clearDirty){y.clearDirty=false;for(p=0;p<m.data.length;p++){var j=m.data[p];j.reset();this.graphicsDataPool.push(j)}m.data=[];m.lastIndex=0}var l;for(p=m.lastIndex;p<y.graphicsData.length;p++){var n=y.graphicsData[p];if(n.type===a.SHAPES.POLY){n.points=n.shape.points.slice();if(n.shape.closed){if(n.points[0]!==n.points[n.points.length-2]||n.points[1]!==n.points[n.points.length-1]){n.points.push(n.points[0],n.points[1])}}if(n.fill){if(n.points.length>=6){if(n.points.length<this.maximumSimplePolySize*2){l=this.switchMode(m,0);var o=this.buildPoly(n,l);if(!o){l=this.switchMode(m,1);this.buildComplexPoly(n,l)}}else{l=this.switchMode(m,1);this.buildComplexPoly(n,l)}}}if(n.lineWidth>0){l=this.switchMode(m,0);this.buildLine(n,l)}}else{l=this.switchMode(m,0);if(n.type===a.SHAPES.RECT){this.buildRectangle(n,l)}else{if(n.type===a.SHAPES.CIRC||n.type===a.SHAPES.ELIP){this.buildCircle(n,l)}else{if(n.type===a.SHAPES.RREC){this.buildRoundedRectangle(n,l)}}}}m.lastIndex++}for(p=0;p<m.data.length;p++){l=m.data[p];if(l.dirty){l.upload()}}};s.prototype.switchMode=function(k,l){var j;if(!k.data.length){j=this.graphicsDataPool.pop()||new w(k.gl);j.mode=l;k.data.push(j)}else{j=k.data[k.data.length-1];if((j.points.length>320000)||j.mode!==l||l===1){j=this.graphicsDataPool.pop()||new w(k.gl);j.mode=l;k.data.push(j)}}j.dirty=true;return j};s.prototype.buildRectangle=function(p,x){var L=p.shape;var O=L.x;var j=L.y;var P=L.width;var y=L.height;if(p.fill){var J=c.hex2rgb(p.fillColor);var N=p.fillAlpha;var l=J[0]*N;var o=J[1]*N;var k=J[2]*N;var M=x.points;var K=x.indices;var m=M.length/6;M.push(O,j);M.push(l,o,k,N);M.push(O+P,j);M.push(l,o,k,N);M.push(O,j+y);M.push(l,o,k,N);M.push(O+P,j+y);M.push(l,o,k,N);K.push(m,m,m+1,m+2,m+3,m+3)}if(p.lineWidth){var n=p.points;p.points=[O,j,O+P,j,O+P,j+y,O,j+y,O,j];this.buildLine(p,x);p.points=n}};s.prototype.buildRoundedRectangle=function(V,j){var W=V.shape;var X=W.x;var m=W.y;var O=W.width;var Q=W.height;var R=W.radius;var U=[];U.push(X,m+R);this.quadraticBezierCurve(X,m+Q-R,X,m+Q,X+R,m+Q,U);this.quadraticBezierCurve(X+O-R,m+Q,X+O,m+Q,X+O,m+Q-R,U);this.quadraticBezierCurve(X+O,m+R,X+O,m,X+O-R,m,U);this.quadraticBezierCurve(X+R,m,X,m,X,m+R+1e-10,U);if(V.fill){var x=c.hex2rgb(V.fillColor);var P=V.fillAlpha;var T=x[0]*P;var n=x[1]*P;var l=x[2]*P;var k=j.points;var N=j.indices;var S=k.length/6;var y=r(U,null,2);var o=0;for(o=0;o<y.length;o+=3){N.push(y[o]+S);N.push(y[o]+S);N.push(y[o+1]+S);N.push(y[o+2]+S);N.push(y[o+2]+S)}for(o=0;o<U.length;o++){k.push(U[o],U[++o],T,n,l,P)}}if(V.lineWidth){var p=V.points;V.points=U;this.buildLine(V,j);V.points=p}};s.prototype.quadraticBezierCurve=function(Q,j,R,k,M,P,m){var l,y,x,L,n,p,O=20,o=m||[];function S(B,C,A){var z=C-B;return B+(z*A)}var N=0;for(var K=0;K<=O;K++){N=K/O;l=S(Q,R,N);y=S(j,k,N);x=S(R,M,N);L=S(k,P,N);n=S(l,x,N);p=S(y,L,N);o.push(n,p)}return o};s.prototype.buildCircle=function(l,j){var o=l.shape;var p=o.x;var y=o.y;var R;var S;if(l.type===a.SHAPES.CIRC){R=o.radius;S=o.radius}else{R=o.width;S=o.height}var V=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height));var n=(Math.PI*2)/V;var N=0;if(l.fill){var O=c.hex2rgb(l.fillColor);var Q=l.fillAlpha;var U=O[0]*Q;var x=O[1]*Q;var m=O[2]*Q;var k=j.points;var P=j.indices;var T=k.length/6;P.push(T);for(N=0;N<V+1;N++){k.push(p,y,U,x,m,Q);k.push(p+Math.sin(n*N)*R,y+Math.cos(n*N)*S,U,x,m,Q);P.push(T++,T++)}P.push(T-1)}if(l.lineWidth){var M=l.points;l.points=[];for(N=0;N<V+1;N++){l.points.push(p+Math.sin(n*N)*R,y+Math.cos(n*N)*S)}this.buildLine(l,j);l.points=M}};s.prototype.buildLine=function(az,al){var aH=0;var ai=az.points;if(ai.length===0){return}var aw=new q.Point(ai[0],ai[1]);var aJ=new q.Point(ai[ai.length-2],ai[ai.length-1]);if(aw.x===aJ.x&&aw.y===aJ.y){ai=ai.slice();ai.pop();ai.pop();aJ=new q.Point(ai[ai.length-2],ai[ai.length-1]);var at=aJ.x+(aw.x-aJ.x)*0.5;var ay=aJ.y+(aw.y-aJ.y)*0.5;ai.unshift(at,ay);ai.push(at,ay)}var aG=al.points;var aL=al.indices;var au=ai.length/2;var aA=ai.length;var aB=aG.length/6;var aQ=az.lineWidth/2;var aj=c.hex2rgb(az.lineColor);var j=az.lineAlpha;var m=aj[0]*j;var aD=aj[1]*j;var ax=aj[2]*j;var aC,aE,p,ah,ao,ap,aM,aN;var n,o,aq,ar,aO,aP;var k,ak,aF,l,am,aI;var av,an,aK;p=ai[0];ah=ai[1];ao=ai[2];ap=ai[3];n=-(ah-ap);o=p-ao;aK=Math.sqrt(n*n+o*o);n/=aK;o/=aK;n*=aQ;o*=aQ;aG.push(p-n,ah-o,m,aD,ax,j);aG.push(p+n,ah+o,m,aD,ax,j);for(aH=1;aH<au-1;aH++){p=ai[(aH-1)*2];ah=ai[(aH-1)*2+1];ao=ai[(aH)*2];ap=ai[(aH)*2+1];aM=ai[(aH+1)*2];aN=ai[(aH+1)*2+1];n=-(ah-ap);o=p-ao;aK=Math.sqrt(n*n+o*o);n/=aK;o/=aK;n*=aQ;o*=aQ;aq=-(ap-aN);ar=ao-aM;aK=Math.sqrt(aq*aq+ar*ar);aq/=aK;ar/=aK;aq*=aQ;ar*=aQ;k=(-o+ah)-(-o+ap);ak=(-n+ao)-(-n+p);aF=(-n+p)*(-o+ap)-(-n+ao)*(-o+ah);l=(-ar+aN)-(-ar+ap);am=(-aq+ao)-(-aq+aM);aI=(-aq+aM)*(-ar+ap)-(-aq+ao)*(-ar+aN);av=k*am-l*ak;if(Math.abs(av)<0.1){av+=10.1;aG.push(ao-n,ap-o,m,aD,ax,j);aG.push(ao+n,ap+o,m,aD,ax,j);continue}aC=(ak*aI-am*aF)/av;aE=(l*aF-k*aI)/av;an=(aC-ao)*(aC-ao)+(aE-ap)+(aE-ap);if(an>140*140){aO=n-aq;aP=o-ar;aK=Math.sqrt(aO*aO+aP*aP);aO/=aK;aP/=aK;aO*=aQ;aP*=aQ;aG.push(ao-aO,ap-aP);aG.push(m,aD,ax,j);aG.push(ao+aO,ap+aP);aG.push(m,aD,ax,j);aG.push(ao-aO,ap-aP);aG.push(m,aD,ax,j);aA++}else{aG.push(aC,aE);aG.push(m,aD,ax,j);aG.push(ao-(aC-ao),ap-(aE-ap));aG.push(m,aD,ax,j)}}p=ai[(au-2)*2];ah=ai[(au-2)*2+1];ao=ai[(au-1)*2];ap=ai[(au-1)*2+1];n=-(ah-ap);o=p-ao;aK=Math.sqrt(n*n+o*o);n/=aK;o/=aK;n*=aQ;o*=aQ;aG.push(ao-n,ap-o);aG.push(m,aD,ax,j);aG.push(ao+n,ap+o);aG.push(m,aD,ax,j);aL.push(aB);for(aH=0;aH<aA;aH++){aL.push(aB++)}aL.push(aB-1)};s.prototype.buildComplexPoly=function(j,x){var n=j.points.slice();if(n.length<6){return}var l=x.indices;x.points=n;x.alpha=j.fillAlpha;x.color=c.hex2rgb(j.fillColor);var E=Infinity;var k=-Infinity;var F=Infinity;var m=-Infinity;var o,p;for(var y=0;y<n.length;y+=2){o=n[y];p=n[y+1];E=o<E?o:E;k=o>k?o:k;F=p<F?p:F;m=p>m?p:m}n.push(E,F,k,F,k,m,E,m);var G=n.length/2;for(y=0;y<G;y++){l.push(y)}};s.prototype.buildPoly=function(K,F){var l=K.points;if(l.length<6){return}var m=F.points;var j=F.indices;var L=l.length/2;var H=c.hex2rgb(K.fillColor);var I=K.fillAlpha;var k=H[0]*I;var p=H[1]*I;var n=H[2]*I;var J=r(l,null,2);if(!J){return false}var o=m.length/6;var G=0;for(G=0;G<J.length;G+=3){j.push(J[G]+o);j.push(J[G]+o);j.push(J[G+1]+o);j.push(J[G+2]+o);j.push(J[G+2]+o)}for(G=0;G<L;G++){m.push(l[G*2],l[G*2+1],k,p,n,I)}return true}},{"../../const":13,"../../math":23,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/utils/ObjectRenderer":53,"../../utils":67,"./WebGLGraphicsData":19,earcut:9}],19:[function(b,a,c){function d(k){this.gl=k;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=k.createBuffer();this.indexBuffer=k.createBuffer();this.mode=1;this.alpha=1;this.dirty=true;this.glPoints=null;this.glIndices=null}d.prototype.constructor=d;a.exports=d;d.prototype.reset=function(){this.points.length=0;this.indices.length=0};d.prototype.upload=function(){var k=this.gl;this.glPoints=new Float32Array(this.points);k.bindBuffer(k.ARRAY_BUFFER,this.buffer);k.bufferData(k.ARRAY_BUFFER,this.glPoints,k.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,this.indexBuffer);k.bufferData(k.ELEMENT_ARRAY_BUFFER,this.glIndices,k.STATIC_DRAW);this.dirty=false};d.prototype.destroy=function(){this.color=null;this.points=null;this.indices=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null}},{}],20:[function(b,a,c){var d=a.exports=Object.assign(b("./const"),b("./math"),{utils:b("./utils"),ticker:b("./ticker"),DisplayObject:b("./display/DisplayObject"),Container:b("./display/Container"),Sprite:b("./sprites/Sprite"),ParticleContainer:b("./particles/ParticleContainer"),SpriteRenderer:b("./sprites/webgl/SpriteRenderer"),ParticleRenderer:b("./particles/webgl/ParticleRenderer"),Text:b("./text/Text"),Graphics:b("./graphics/Graphics"),GraphicsData:b("./graphics/GraphicsData"),GraphicsRenderer:b("./graphics/webgl/GraphicsRenderer"),Texture:b("./textures/Texture"),BaseTexture:b("./textures/BaseTexture"),RenderTexture:b("./textures/RenderTexture"),VideoBaseTexture:b("./textures/VideoBaseTexture"),TextureUvs:b("./textures/TextureUvs"),CanvasRenderer:b("./renderers/canvas/CanvasRenderer"),CanvasGraphics:b("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:b("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:b("./renderers/webgl/WebGLRenderer"),ShaderManager:b("./renderers/webgl/managers/ShaderManager"),Shader:b("./renderers/webgl/shaders/Shader"),ObjectRenderer:b("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:b("./renderers/webgl/utils/RenderTarget"),AbstractFilter:b("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:b("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:b("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(n,q,p,o){n=n||800;q=q||600;if(!o&&d.utils.isWebGLSupported()){return new d.WebGLRenderer(n,q,p)}return new d.CanvasRenderer(n,q,p)}})},{"./const":13,"./display/Container":14,"./display/DisplayObject":15,"./graphics/Graphics":16,"./graphics/GraphicsData":17,"./graphics/webgl/GraphicsRenderer":18,"./math":23,"./particles/ParticleContainer":29,"./particles/webgl/ParticleRenderer":31,"./renderers/canvas/CanvasRenderer":34,"./renderers/canvas/utils/CanvasBuffer":35,"./renderers/canvas/utils/CanvasGraphics":36,"./renderers/webgl/WebGLRenderer":39,"./renderers/webgl/filters/AbstractFilter":40,"./renderers/webgl/filters/FXAAFilter":41,"./renderers/webgl/filters/SpriteMaskFilter":42,"./renderers/webgl/managers/ShaderManager":46,"./renderers/webgl/shaders/Shader":51,"./renderers/webgl/utils/ObjectRenderer":53,"./renderers/webgl/utils/RenderTarget":55,"./sprites/Sprite":57,"./sprites/webgl/SpriteRenderer":58,"./text/Text":59,"./textures/BaseTexture":60,"./textures/RenderTexture":61,"./textures/Texture":62,"./textures/TextureUvs":63,"./textures/VideoBaseTexture":64,"./ticker":66,"./utils":67}],21:[function(c,b,d){var a=c("./Point");function k(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}k.prototype.constructor=k;b.exports=k;k.prototype.fromArray=function(j){this.a=j[0];this.b=j[1];this.c=j[3];this.d=j[4];this.tx=j[2];this.ty=j[5]};k.prototype.toArray=function(n,o){if(!this.array){this.array=new Float32Array(9)}var j=o||this.array;if(n){j[0]=this.a;j[1]=this.b;j[2]=0;j[3]=this.c;j[4]=this.d;j[5]=0;j[6]=this.tx;j[7]=this.ty;j[8]=1}else{j[0]=this.a;j[1]=this.c;j[2]=this.tx;j[3]=this.b;j[4]=this.d;j[5]=this.ty;j[6]=0;j[7]=0;j[8]=1}return j};k.prototype.apply=function(q,o){o=o||new a();var p=q.x;var j=q.y;o.x=this.a*p+this.c*j+this.tx;o.y=this.b*p+this.d*j+this.ty;return o};k.prototype.applyInverse=function(r,p){p=p||new a();var s=1/(this.a*this.d+this.c*-this.b);var q=r.x;var j=r.y;p.x=this.d*s*q+-this.c*s*j+(this.ty*this.c-this.tx*this.d)*s;p.y=this.a*s*j+-this.b*s*q+(-this.ty*this.a+this.tx*this.b)*s;return p};k.prototype.translate=function(m,j){this.tx+=m;this.ty+=j;return this};k.prototype.scale=function(m,j){this.a*=m;this.d*=j;this.c*=m;this.b*=j;this.tx*=m;this.ty*=j;return this};k.prototype.rotate=function(s){var t=Math.cos(s);var j=Math.sin(s);var q=this.a;var u=this.c;var r=this.tx;this.a=q*t-this.b*j;this.b=q*j+this.b*t;this.c=u*t-this.d*j;this.d=u*j+this.d*t;this.tx=r*t-this.ty*j;this.ty=r*j+this.ty*t;return this};k.prototype.append=function(p){var q=this.a;var j=this.b;var s=this.c;var r=this.d;this.a=p.a*q+p.b*s;this.b=p.a*j+p.b*r;this.c=p.c*q+p.d*s;this.d=p.c*j+p.d*r;this.tx=p.tx*q+p.ty*s+this.tx;this.ty=p.tx*j+p.ty*r+this.ty;return this};k.prototype.prepend=function(j){var o=this.tx;if(j.a!==1||j.b!==0||j.c!==0||j.d!==1){var p=this.a;var q=this.c;this.a=p*j.a+this.b*j.c;this.b=p*j.b+this.b*j.d;this.c=q*j.a+this.d*j.c;this.d=q*j.b+this.d*j.d}this.tx=o*j.a+this.ty*j.c+j.tx;this.ty=o*j.b+this.ty*j.d+j.ty;return this};k.prototype.invert=function(){var n=this.a;var j=this.b;var u=this.c;var t=this.d;var r=this.tx;var s=n*t-j*u;this.a=t/s;this.b=-j/s;this.c=-u/s;this.d=n/s;this.tx=(u*this.ty-t*r)/s;this.ty=-(n*this.ty-j*r)/s;return this};k.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};k.prototype.clone=function(){var j=new k();j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};k.prototype.copy=function(j){j.a=this.a;j.b=this.b;j.c=this.c;j.d=this.d;j.tx=this.tx;j.ty=this.ty;return j};k.IDENTITY=new k();k.TEMP_MATRIX=new k()},{"./Point":22}],22:[function(c,b,d){function a(m,l){this.x=m||0;this.y=l||0}a.prototype.constructor=a;b.exports=a;a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.copy=function(k){this.set(k.x,k.y)};a.prototype.equals=function(k){return(k.x===this.x)&&(k.y===this.y)};a.prototype.set=function(m,l){this.x=m||0;this.y=l||((l!==0)?this.x:0)}},{}],23:[function(b,a,c){a.exports={Point:b("./Point"),Matrix:b("./Matrix"),Circle:b("./shapes/Circle"),Ellipse:b("./shapes/Ellipse"),Polygon:b("./shapes/Polygon"),Rectangle:b("./shapes/Rectangle"),RoundedRectangle:b("./shapes/RoundedRectangle")}},{"./Matrix":21,"./Point":22,"./shapes/Circle":24,"./shapes/Ellipse":25,"./shapes/Polygon":26,"./shapes/Rectangle":27,"./shapes/RoundedRectangle":28}],24:[function(d,b,l){var c=d("./Rectangle"),m=d("../../const");function a(j,o,k){this.x=j||0;this.y=o||0;this.radius=k||0;this.type=m.SHAPES.CIRC}a.prototype.constructor=a;b.exports=a;a.prototype.clone=function(){return new a(this.x,this.y,this.radius)};a.prototype.contains=function(k,q){if(this.radius<=0){return false}var r=(this.x-k),s=(this.y-q),j=this.radius*this.radius;r*=r;s*=s;return(r+s<=j)};a.prototype.getBounds=function(){return new c(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}},{"../../const":13,"./Rectangle":27}],25:[function(d,a,l){var b=d("./Rectangle"),m=d("../../const");function c(j,p,q,k){this.x=j||0;this.y=p||0;this.width=q||0;this.height=k||0;this.type=m.SHAPES.ELIP}c.prototype.constructor=c;a.exports=c;c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)};c.prototype.contains=function(j,p){if(this.width<=0||this.height<=0){return false}var q=((j-this.x)/this.width),k=((p-this.y)/this.height);q*=q;k*=k;return(q+k<=1)};c.prototype.getBounds=function(){return new b(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":13,"./Rectangle":27}],26:[function(c,b,d){var a=c("../Point"),m=c("../../const");function l(j){var s=j;if(!Array.isArray(s)){s=new Array(arguments.length);for(var k=0;k<s.length;++k){s[k]=arguments[k]}}if(s[0] instanceof a){var p=[];for(var t=0,u=s.length;t<u;t++){p.push(s[t].x,s[t].y)}s=p}this.closed=true;this.points=s;this.type=m.SHAPES.POLY}l.prototype.constructor=l;b.exports=l;l.prototype.clone=function(){return new l(this.points.slice())};l.prototype.contains=function(B,C){var x=false;var A=this.points.length/2;for(var j=0,k=A-1;j<A;k=j++){var D=this.points[j*2],w=this.points[j*2+1],E=this.points[k*2],y=this.points[k*2+1],z=((w>C)!==(y>C))&&(B<(E-D)*(C-w)/(y-w)+D);if(z){x=!x}}return x}},{"../../const":13,"../Point":22}],27:[function(c,a,d){var k=c("../../const");function b(o,q,j,p){this.x=o||0;this.y=q||0;this.width=j||0;this.height=p||0;this.type=k.SHAPES.RECT}b.prototype.constructor=b;a.exports=b;b.EMPTY=new b(0,0,0,0);b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)};b.prototype.contains=function(m,j){if(this.width<=0||this.height<=0){return false}if(m>=this.x&&m<this.x+this.width){if(j>=this.y&&j<this.y+this.height){return true}}return false}},{"../../const":13}],28:[function(c,b,d){var k=c("../../const");function a(j,r,s,p,q){this.x=j||0;this.y=r||0;this.width=s||0;this.height=p||0;this.radius=q||20;this.type=k.SHAPES.RREC}a.prototype.constructor=a;b.exports=a;a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)};a.prototype.contains=function(m,j){if(this.width<=0||this.height<=0){return false}if(m>=this.x&&m<=this.x+this.width){if(j>=this.y&&j<=this.y+this.height){return true}}return false}},{"../../const":13}],29:[function(c,b,d){var l=c("../display/Container"),m=c("../const");function a(p,q,j){l.call(this);j=j||15000;p=p||15000;var k=16384;if(j>k){j=k}if(j>p){j=p}this._properties=[false,true,false,false,false];this._maxSize=p;this._batchSize=j;this._buffers=null;this._bufferToUpdate=0;this.interactiveChildren=false;this.blendMode=m.BLEND_MODES.NORMAL;this.roundPixels=true;this.setProperties(q)}a.prototype=Object.create(l.prototype);a.prototype.constructor=a;b.exports=a;a.prototype.setProperties=function(j){if(j){this._properties[0]="scale" in j?!!j.scale:this._properties[0];this._properties[1]="position" in j?!!j.position:this._properties[1];this._properties[2]="rotation" in j?!!j.rotation:this._properties[2];this._properties[3]="uvs" in j?!!j.uvs:this._properties[3];this._properties[4]="alpha" in j?!!j.alpha:this._properties[4]}};a.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};a.prototype.renderWebGL=function(j){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}j.setObjectRenderer(j.plugins.particle);j.plugins.particle.render(this)};a.prototype.onChildrenChange=function(j){var k=Math.floor(j/this._batchSize);if(k<this._bufferToUpdate){this._bufferToUpdate=k}};a.prototype.renderCanvas=function(D){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var B=D.context;var x=this.worldTransform;var C=true;var E=0;var F=0;var k=0;var y=0;B.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){var z=this.children[j];if(!z.visible){continue}var A=z.texture.frame;B.globalAlpha=this.worldAlpha*z.alpha;if(z.rotation%(Math.PI*2)===0){if(C){B.setTransform(x.a,x.b,x.c,x.d,x.tx,x.ty);C=false}E=((z.anchor.x)*(-A.width*z.scale.x)+z.position.x+0.5);F=((z.anchor.y)*(-A.height*z.scale.y)+z.position.y+0.5);k=A.width*z.scale.x;y=A.height*z.scale.y}else{if(!C){C=true}z.displayObjectUpdateTransform();var G=z.worldTransform;if(D.roundPixels){B.setTransform(G.a,G.b,G.c,G.d,G.tx|0,G.ty|0)}else{B.setTransform(G.a,G.b,G.c,G.d,G.tx,G.ty)}E=((z.anchor.x)*(-A.width)+0.5);F=((z.anchor.y)*(-A.height)+0.5);k=A.width;y=A.height}B.drawImage(z.texture.baseTexture.source,A.x,A.y,A.width,A.height,E,F,k,y)}};a.prototype.destroy=function(){l.prototype.destroy.apply(this,arguments);if(this._buffers){for(var j=0;j<this._buffers.length;++j){this._buffers[j].destroy()}}this._properties=null;this._buffers=null}},{"../const":13,"../display/Container":14}],30:[function(c,b,d){function a(t,q,u,r){this.gl=t;this.vertSize=2;this.vertByteSize=this.vertSize*4;this.size=r;this.dynamicProperties=[];this.staticProperties=[];for(var s=0;s<q.length;s++){var p=q[s];if(u[s]){this.dynamicProperties.push(p)}else{this.staticProperties.push(p)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.initBuffers()}a.prototype.constructor=a;b.exports=a;a.prototype.initBuffers=function(){var s=this.gl;var r;var p;var o=0;this.dynamicStride=0;for(r=0;r<this.dynamicProperties.length;r++){p=this.dynamicProperties[r];p.offset=o;o+=p.size;this.dynamicStride+=p.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,this.dynamicBuffer);s.bufferData(s.ARRAY_BUFFER,this.dynamicData,s.DYNAMIC_DRAW);var q=0;this.staticStride=0;for(r=0;r<this.staticProperties.length;r++){p=this.staticProperties[r];p.offset=q;q+=p.size;this.staticStride+=p.size}this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,this.staticBuffer);s.bufferData(s.ARRAY_BUFFER,this.staticData,s.DYNAMIC_DRAW)};a.prototype.uploadDynamic=function(q,t,r){var u=this.gl;for(var s=0;s<this.dynamicProperties.length;s++){var p=this.dynamicProperties[s];p.uploadFunction(q,t,r,this.dynamicData,this.dynamicStride,p.offset)}u.bindBuffer(u.ARRAY_BUFFER,this.dynamicBuffer);u.bufferSubData(u.ARRAY_BUFFER,0,this.dynamicData)};a.prototype.uploadStatic=function(q,t,r){var u=this.gl;for(var s=0;s<this.staticProperties.length;s++){var p=this.staticProperties[s];p.uploadFunction(q,t,r,this.staticData,this.staticStride,p.offset)}u.bindBuffer(u.ARRAY_BUFFER,this.staticBuffer);u.bufferSubData(u.ARRAY_BUFFER,0,this.staticData)};a.prototype.bind=function(){var m=this.gl;var o,n;m.bindBuffer(m.ARRAY_BUFFER,this.dynamicBuffer);for(o=0;o<this.dynamicProperties.length;o++){n=this.dynamicProperties[o];m.vertexAttribPointer(n.attribute,n.size,m.FLOAT,false,this.dynamicStride*4,n.offset*4)}m.bindBuffer(m.ARRAY_BUFFER,this.staticBuffer);for(o=0;o<this.staticProperties.length;o++){n=this.staticProperties[o];m.vertexAttribPointer(n.attribute,n.size,m.FLOAT,false,this.staticStride*4,n.offset*4)}};a.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicData=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticProperties=null;this.staticData=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],31:[function(p,q,d){var a=p("../../renderers/webgl/utils/ObjectRenderer"),b=p("../../renderers/webgl/WebGLRenderer"),o=p("./ParticleShader"),r=p("./ParticleBuffer"),c=p("../../math");function s(k){a.call(this,k);var j=98304;this.indices=new Uint16Array(j);for(var l=0,m=0;l<j;l+=6,m+=4){this.indices[l+0]=m+0;this.indices[l+1]=m+1;this.indices[l+2]=m+2;this.indices[l+3]=m+0;this.indices[l+4]=m+2;this.indices[l+5]=m+3}this.shader=null;this.indexBuffer=null;this.properties=null;this.tempMatrix=new c.Matrix()}s.prototype=Object.create(a.prototype);s.prototype.constructor=s;q.exports=s;b.registerPlugin("particle",s);s.prototype.onContextChange=function(){var j=this.renderer.gl;this.shader=new o(this.renderer.shaderManager);this.indexBuffer=j.createBuffer();j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,this.indexBuffer);j.bufferData(j.ELEMENT_ARRAY_BUFFER,this.indices,j.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};s.prototype.start=function(){var j=this.renderer.gl;j.activeTexture(j.TEXTURE0);j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var k=this.shader;this.renderer.shaderManager.setShader(k)};s.prototype.render=function(l){var k=l.children,A=k.length,n=l._maxSize,B=l._batchSize;if(A===0){return}else{if(A>n){A=n}}if(!l._buffers){l._buffers=this.generateBuffers(l)}this.renderer.blendModeManager.setBlendMode(l.blendMode);var C=this.renderer.gl;var j=l.worldTransform.copy(this.tempMatrix);j.prepend(this.renderer.currentRenderTarget.projectionMatrix);C.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,false,j.toArray(true));C.uniform1f(this.shader.uniforms.uAlpha._location,l.worldAlpha);var m=k[0]._texture.baseTexture;if(!m._glTextures[C.id]){if(!this.renderer.updateTexture(m)){return}if(!l._properties[0]||!l._properties[3]){l._bufferToUpdate=0}}else{C.bindTexture(C.TEXTURE_2D,m._glTextures[C.id])}for(var E=0,F=0;E<A;E+=B,F+=1){var D=(A-E);if(D>B){D=B}var G=l._buffers[F];G.uploadDynamic(k,E,D);if(l._bufferToUpdate===F){G.uploadStatic(k,E,D);l._bufferToUpdate=F+1}G.bind(this.shader);C.drawElements(C.TRIANGLES,D*6,C.UNSIGNED_SHORT,0);this.renderer.drawCount++}};s.prototype.generateBuffers=function(v){var j=this.renderer.gl,w=[],l=v._maxSize,m=v._batchSize,k=v._properties,n;for(n=0;n<l;n+=m){w.push(new r(j,this.properties,k,m))}return w};s.prototype.uploadVertices=function(E,m,M,K,G,k){var j,J,l,n,F,L,N,H,I;for(var O=0;O<M;O++){j=E[m+O];J=j._texture;n=j.scale.x;F=j.scale.y;if(J.trim){l=J.trim;N=l.x-j.anchor.x*l.width;L=N+J.crop.width;I=l.y-j.anchor.y*l.height;H=I+J.crop.height}else{L=(J._frame.width)*(1-j.anchor.x);N=(J._frame.width)*-j.anchor.x;H=J._frame.height*(1-j.anchor.y);I=J._frame.height*-j.anchor.y}K[k]=N*n;K[k+1]=I*F;K[k+G]=L*n;K[k+G+1]=I*F;K[k+G*2]=L*n;K[k+G*2+1]=H*F;K[k+G*3]=N*n;K[k+G*3+1]=H*F;k+=G*4}};s.prototype.uploadPosition=function(w,k,x,j,m,l){for(var y=0;y<x;y++){var n=w[k+y].position;j[l]=n.x;j[l+1]=n.y;j[l+m]=n.x;j[l+m+1]=n.y;j[l+m*2]=n.x;j[l+m*2+1]=n.y;j[l+m*3]=n.x;j[l+m*3+1]=n.y;l+=m*4}};s.prototype.uploadRotation=function(n,k,w,j,m,l){for(var x=0;x<w;x++){var y=n[k+x].rotation;j[l]=y;j[l+m]=y;j[l+m*2]=y;j[l+m*3]=y;l+=m*4}};s.prototype.uploadUvs=function(n,k,w,j,m,l){for(var x=0;x<w;x++){var y=n[k+x]._texture._uvs;if(y){j[l]=y.x0;j[l+1]=y.y0;j[l+m]=y.x1;j[l+m+1]=y.y1;j[l+m*2]=y.x2;j[l+m*2+1]=y.y2;j[l+m*3]=y.x3;j[l+m*3+1]=y.y3;l+=m*4}else{j[l]=0;j[l+1]=0;j[l+m]=0;j[l+m+1]=0;j[l+m*2]=0;j[l+m*2+1]=0;j[l+m*3]=0;j[l+m*3+1]=0;l+=m*4}}};s.prototype.uploadAlpha=function(w,k,x,j,m,l){for(var y=0;y<x;y++){var n=w[k+y].alpha;j[l]=n;j[l+m]=n;j[l+m*2]=n;j[l+m*3]=n;l+=m*4}};s.prototype.destroy=function(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}a.prototype.destroy.apply(this,arguments);this.shader.destroy();this.indices=null;this.tempMatrix=null}},{"../../math":23,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/utils/ObjectRenderer":53,"./ParticleBuffer":30,"./ParticleShader":32}],32:[function(b,a,d){var c=b("../../renderers/webgl/shaders/TextureShader");function k(j){c.call(this,j,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}k.prototype=Object.create(c.prototype);k.prototype.constructor=k;a.exports=k},{"../../renderers/webgl/shaders/TextureShader":52}],33:[function(d,c,n){var o=d("../utils"),a=d("../math"),q=d("../const"),b=d("eventemitter3");function p(j,k,s,m){b.call(this);o.sayHello(j);if(m){for(var l in q.DEFAULT_RENDER_OPTIONS){if(typeof m[l]==="undefined"){m[l]=q.DEFAULT_RENDER_OPTIONS[l]}}}else{m=q.DEFAULT_RENDER_OPTIONS}this.type=q.RENDERER_TYPE.UNKNOWN;this.width=k||800;this.height=s||600;this.view=m.view||document.createElement("canvas");this.resolution=m.resolution;this.transparent=m.transparent;this.autoResize=m.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=m.preserveDrawingBuffer;this.clearBeforeRender=m.clearBeforeRender;this.roundPixels=m.roundPixels;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=m.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent={worldTransform:new a.Matrix(),worldAlpha:1,children:[]};this._lastObjectRendered=this._tempDisplayObjectParent}p.prototype=Object.create(b.prototype);p.prototype.constructor=p;c.exports=p;Object.defineProperties(p.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(j){this._backgroundColor=j;this._backgroundColorString=o.hex2string(j);o.hex2rgb(j,this._backgroundColorRgb)}}});p.prototype.resize=function(j,k){this.width=j*this.resolution;this.height=k*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};p.prototype.destroy=function(j){if(j&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}this.type=q.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this.roundPixels=false;this._backgroundColor=0;this._backgroundColorRgb=null;this._backgroundColorString=null}},{"../const":13,"../math":23,"../utils":67,eventemitter3:10}],34:[function(q,r,p){var b=q("../SystemRenderer"),s=q("./utils/CanvasMaskManager"),c=q("../../utils"),d=q("../../math"),a=q("../../const");function o(j,l,k){k=k||{};b.call(this,"Canvas",j,l,k);this.type=a.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=true;this.maskManager=new s();this.smoothProperty="imageSmoothingEnabled";if(!this.context.imageSmoothingEnabled){if(this.context.webkitImageSmoothingEnabled){this.smoothProperty="webkitImageSmoothingEnabled"}else{if(this.context.mozImageSmoothingEnabled){this.smoothProperty="mozImageSmoothingEnabled"}else{if(this.context.oImageSmoothingEnabled){this.smoothProperty="oImageSmoothingEnabled"}else{if(this.context.msImageSmoothingEnabled){this.smoothProperty="msImageSmoothingEnabled"}}}}}this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new d.Matrix(),worldAlpha:1};this.resize(j,l)}o.prototype=Object.create(b.prototype);o.prototype.constructor=o;r.exports=o;c.pluginTarget.mixin(o);o.prototype.render=function(k){var j=k.parent;this._lastObjectRendered=k;k.parent=this._tempDisplayObjectParent;k.updateTransform();k.parent=j;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.context.globalCompositeOperation=this.blendModes[a.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){this.context.fillStyle="black";this.context.clear()}if(this.clearBeforeRender){if(this.transparent){this.context.clearRect(0,0,this.width,this.height)}else{this.context.fillStyle=this._backgroundColorString;this.context.fillRect(0,0,this.width,this.height)}}this.renderDisplayObject(k,this.context)};o.prototype.destroy=function(j){this.destroyPlugins();b.prototype.destroy.call(this,j);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.smoothProperty=null};o.prototype.renderDisplayObject=function(j,k){var l=this.context;this.context=k;j.renderCanvas(this);this.context=l};o.prototype.resize=function(k,j){b.prototype.resize.call(this,k,j);if(this.smoothProperty){this.context[this.smoothProperty]=(a.SCALE_MODES.DEFAULT===a.SCALE_MODES.LINEAR)}};o.prototype._mapBlendModes=function(){if(!this.blendModes){this.blendModes={};if(c.canUseNewCanvasBlendModes()){this.blendModes[a.BLEND_MODES.NORMAL]="source-over";this.blendModes[a.BLEND_MODES.ADD]="lighter";this.blendModes[a.BLEND_MODES.MULTIPLY]="multiply";this.blendModes[a.BLEND_MODES.SCREEN]="screen";this.blendModes[a.BLEND_MODES.OVERLAY]="overlay";this.blendModes[a.BLEND_MODES.DARKEN]="darken";this.blendModes[a.BLEND_MODES.LIGHTEN]="lighten";this.blendModes[a.BLEND_MODES.COLOR_DODGE]="color-dodge";this.blendModes[a.BLEND_MODES.COLOR_BURN]="color-burn";this.blendModes[a.BLEND_MODES.HARD_LIGHT]="hard-light";this.blendModes[a.BLEND_MODES.SOFT_LIGHT]="soft-light";this.blendModes[a.BLEND_MODES.DIFFERENCE]="difference";this.blendModes[a.BLEND_MODES.EXCLUSION]="exclusion";this.blendModes[a.BLEND_MODES.HUE]="hue";this.blendModes[a.BLEND_MODES.SATURATION]="saturate";this.blendModes[a.BLEND_MODES.COLOR]="color";this.blendModes[a.BLEND_MODES.LUMINOSITY]="luminosity"}else{this.blendModes[a.BLEND_MODES.NORMAL]="source-over";this.blendModes[a.BLEND_MODES.ADD]="lighter";this.blendModes[a.BLEND_MODES.MULTIPLY]="source-over";this.blendModes[a.BLEND_MODES.SCREEN]="source-over";this.blendModes[a.BLEND_MODES.OVERLAY]="source-over";this.blendModes[a.BLEND_MODES.DARKEN]="source-over";this.blendModes[a.BLEND_MODES.LIGHTEN]="source-over";this.blendModes[a.BLEND_MODES.COLOR_DODGE]="source-over";this.blendModes[a.BLEND_MODES.COLOR_BURN]="source-over";this.blendModes[a.BLEND_MODES.HARD_LIGHT]="source-over";this.blendModes[a.BLEND_MODES.SOFT_LIGHT]="source-over";this.blendModes[a.BLEND_MODES.DIFFERENCE]="source-over";this.blendModes[a.BLEND_MODES.EXCLUSION]="source-over";this.blendModes[a.BLEND_MODES.HUE]="source-over";this.blendModes[a.BLEND_MODES.SATURATION]="source-over";this.blendModes[a.BLEND_MODES.COLOR]="source-over";this.blendModes[a.BLEND_MODES.LUMINOSITY]="source-over"}}}},{"../../const":13,"../../math":23,"../../utils":67,"../SystemRenderer":33,"./utils/CanvasMaskManager":37}],35:[function(c,a,d){function b(l,m){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=l;this.canvas.height=m}b.prototype.constructor=b;a.exports=b;Object.defineProperties(b.prototype,{width:{get:function(){return this.canvas.width},set:function(k){this.canvas.width=k}},height:{get:function(){return this.canvas.height},set:function(k){this.canvas.height=k}}});b.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};b.prototype.resize=function(l,m){this.canvas.width=l;this.canvas.height=m};b.prototype.destroy=function(){this.context=null;this.canvas=null}},{}],36:[function(c,b,d){var k=c("../../../const");var a={};b.exports=a;a.renderGraphics=function(x,ah){var S=x.worldAlpha;if(x.dirty){this.updateGraphicsTint(x);x.dirty=false}for(var P=0;P<x.graphicsData.length;P++){var j=x.graphicsData[P];var ai=j.shape;var Z=j._fillTint;var aj=j._lineTint;ah.lineWidth=j.lineWidth;if(j.type===k.SHAPES.POLY){ah.beginPath();var Q=ai.points;ah.moveTo(Q[0],Q[1]);for(var R=1;R<Q.length/2;R++){ah.lineTo(Q[R*2],Q[R*2+1])}if(ai.closed){ah.lineTo(Q[0],Q[1])}if(Q[0]===Q[Q.length-2]&&Q[1]===Q[Q.length-1]){ah.closePath()}if(j.fill){ah.globalAlpha=j.fillAlpha*S;ah.fillStyle="#"+("00000"+(Z|0).toString(16)).substr(-6);ah.fill()}if(j.lineWidth){ah.globalAlpha=j.lineAlpha*S;ah.strokeStyle="#"+("00000"+(aj|0).toString(16)).substr(-6);ah.stroke()}}else{if(j.type===k.SHAPES.RECT){if(j.fillColor||j.fillColor===0){ah.globalAlpha=j.fillAlpha*S;ah.fillStyle="#"+("00000"+(Z|0).toString(16)).substr(-6);ah.fillRect(ai.x,ai.y,ai.width,ai.height)}if(j.lineWidth){ah.globalAlpha=j.lineAlpha*S;ah.strokeStyle="#"+("00000"+(aj|0).toString(16)).substr(-6);ah.strokeRect(ai.x,ai.y,ai.width,ai.height)}}else{if(j.type===k.SHAPES.CIRC){ah.beginPath();ah.arc(ai.x,ai.y,ai.radius,0,2*Math.PI);ah.closePath();if(j.fill){ah.globalAlpha=j.fillAlpha*S;ah.fillStyle="#"+("00000"+(Z|0).toString(16)).substr(-6);ah.fill()}if(j.lineWidth){ah.globalAlpha=j.lineAlpha*S;ah.strokeStyle="#"+("00000"+(aj|0).toString(16)).substr(-6);ah.stroke()}}else{if(j.type===k.SHAPES.ELIP){var ae=ai.width*2;var y=ai.height*2;var O=ai.x-ae/2;var T=ai.y-y/2;ah.beginPath();var ad=0.5522848,ab=(ae/2)*ad,af=(y/2)*ad,V=O+ae,ak=T+y,aa=O+ae/2,w=T+y/2;ah.moveTo(O,w);ah.bezierCurveTo(O,w-af,aa-ab,T,aa,T);ah.bezierCurveTo(aa+ab,T,V,w-af,V,w);ah.bezierCurveTo(V,w+af,aa+ab,ak,aa,ak);ah.bezierCurveTo(aa-ab,ak,O,w+af,O,w);ah.closePath();if(j.fill){ah.globalAlpha=j.fillAlpha*S;ah.fillStyle="#"+("00000"+(Z|0).toString(16)).substr(-6);ah.fill()}if(j.lineWidth){ah.globalAlpha=j.lineAlpha*S;ah.strokeStyle="#"+("00000"+(aj|0).toString(16)).substr(-6);ah.stroke()}}else{if(j.type===k.SHAPES.RREC){var X=ai.x;var ac=ai.y;var W=ai.width;var Y=ai.height;var ag=ai.radius;var U=Math.min(W,Y)/2|0;ag=ag>U?U:ag;ah.beginPath();ah.moveTo(X,ac+ag);ah.lineTo(X,ac+Y-ag);ah.quadraticCurveTo(X,ac+Y,X+ag,ac+Y);ah.lineTo(X+W-ag,ac+Y);ah.quadraticCurveTo(X+W,ac+Y,X+W,ac+Y-ag);ah.lineTo(X+W,ac+ag);ah.quadraticCurveTo(X+W,ac,X+W-ag,ac);ah.lineTo(X+ag,ac);ah.quadraticCurveTo(X,ac,X,ac+ag);ah.closePath();if(j.fillColor||j.fillColor===0){ah.globalAlpha=j.fillAlpha*S;ah.fillStyle="#"+("00000"+(Z|0).toString(16)).substr(-6);ah.fill()}if(j.lineWidth){ah.globalAlpha=j.lineAlpha*S;ah.strokeStyle="#"+("00000"+(aj|0).toString(16)).substr(-6);ah.stroke()}}}}}}}};a.renderGraphicsMask=function(y,ae){var N=y.graphicsData.length;if(N===0){return}ae.beginPath();for(var O=0;O<N;O++){var j=y.graphicsData[O];var af=j.shape;if(j.type===k.SHAPES.POLY){var Q=af.points;ae.moveTo(Q[0],Q[1]);for(var S=1;S<Q.length/2;S++){ae.lineTo(Q[S*2],Q[S*2+1])}if(Q[0]===Q[Q.length-2]&&Q[1]===Q[Q.length-1]){ae.closePath()}}else{if(j.type===k.SHAPES.RECT){ae.rect(af.x,af.y,af.width,af.height);ae.closePath()}else{if(j.type===k.SHAPES.CIRC){ae.arc(af.x,af.y,af.radius,0,2*Math.PI);ae.closePath()}else{if(j.type===k.SHAPES.ELIP){var P=af.width*2;var M=af.height*2;var R=af.x-P/2;var T=af.y-M/2;var x=0.5522848,Z=(P/2)*x,ac=(M/2)*x,V=R+P,ag=T+M,ab=R+P/2,w=T+M/2;ae.moveTo(R,w);ae.bezierCurveTo(R,w-ac,ab-Z,T,ab,T);ae.bezierCurveTo(ab+Z,T,V,w-ac,V,w);ae.bezierCurveTo(V,w+ac,ab+Z,ag,ab,ag);ae.bezierCurveTo(ab-Z,ag,R,w+ac,R,w);ae.closePath()}else{if(j.type===k.SHAPES.RREC){var X=af.x;var aa=af.y;var W=af.width;var Y=af.height;var ad=af.radius;var U=Math.min(W,Y)/2|0;ad=ad>U?U:ad;ae.moveTo(X,aa+ad);ae.lineTo(X,aa+Y-ad);ae.quadraticCurveTo(X,aa+Y,X+ad,aa+Y);ae.lineTo(X+W-ad,aa+Y);ae.quadraticCurveTo(X+W,aa+Y,X+W,aa+Y-ad);ae.lineTo(X+W,aa+ad);ae.quadraticCurveTo(X+W,aa,X+W-ad,aa);ae.lineTo(X+ad,aa);ae.quadraticCurveTo(X,aa,X,aa+ad);ae.closePath()}}}}}}};a.updateGraphicsTint=function(j){if(j.tint===16777215&&j._prevTint===j.tint){return}j._prevTint=j.tint;var s=(j.tint>>16&255)/255;var t=(j.tint>>8&255)/255;var w=(j.tint&255)/255;for(var y=0;y<j.graphicsData.length;y++){var x=j.graphicsData[y];var u=x.fillColor|0;var v=x.lineColor|0;x._fillTint=(((u>>16&255)/255*s*255<<16)+((u>>8&255)/255*t*255<<8)+(u&255)/255*w*255);x._lineTint=(((v>>16&255)/255*s*255<<16)+((v>>8&255)/255*t*255<<8)+(v&255)/255*w*255)}}},{"../../../const":13}],37:[function(d,c,k){var a=d("./CanvasGraphics");function b(){}b.prototype.constructor=b;c.exports=b;b.prototype.pushMask=function(r,s){s.context.save();var q=r.alpha;var j=r.worldTransform;var p=s.resolution;s.context.setTransform(j.a*p,j.b*p,j.c*p,j.d*p,j.tx*p,j.ty*p);if(!r.texture){a.renderGraphicsMask(r,s.context);s.context.clip()}r.worldAlpha=q};b.prototype.popMask=function(j){j.context.restore()};b.prototype.destroy=function(){}},{"./CanvasGraphics":36}],38:[function(c,b,d){var k=c("../../../utils");var a={};b.exports=a;a.getTintedTexture=function(u,r){var s=u.texture;r=a.roundColor(r);var t="#"+("00000"+(r|0).toString(16)).substr(-6);s.tintCache=s.tintCache||{};if(s.tintCache[t]){return s.tintCache[t]}var q=a.canvas||document.createElement("canvas");a.tintMethod(s,r,q);if(a.convertTintToImage){var j=new Image();j.src=q.toDataURL();s.tintCache[t]=j}else{s.tintCache[t]=q;a.canvas=null}return q};a.tintWithMultiply=function(s,r,j){var u=j.getContext("2d");var q=s.baseTexture.resolution;var t=s.crop.clone();t.x*=q;t.y*=q;t.width*=q;t.height*=q;j.width=t.width;j.height=t.height;u.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);u.fillRect(0,0,t.width,t.height);u.globalCompositeOperation="multiply";u.drawImage(s.baseTexture.source,t.x,t.y,t.width,t.height,0,0,t.width,t.height);u.globalCompositeOperation="destination-atop";u.drawImage(s.baseTexture.source,t.x,t.y,t.width,t.height,0,0,t.width,t.height)};a.tintWithOverlay=function(s,r,j){var u=j.getContext("2d");var q=s.baseTexture.resolution;var t=s.crop.clone();t.x*=q;t.y*=q;t.width*=q;t.height*=q;j.width=t.width;j.height=t.height;u.globalCompositeOperation="copy";u.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6);u.fillRect(0,0,t.width,t.height);u.globalCompositeOperation="destination-atop";u.drawImage(s.baseTexture.source,t.x,t.y,t.width,t.height,0,0,t.width,t.height)};a.tintWithPerPixel=function(F,j,z){var A=z.getContext("2d");var r=F.baseTexture.resolution;var H=F.crop.clone();H.x*=r;H.y*=r;H.width*=r;H.height*=r;z.width=H.width;z.height=H.height;A.globalCompositeOperation="copy";A.drawImage(F.baseTexture.source,H.x,H.y,H.width,H.height,0,0,H.width,H.height);var B=k.hex2rgb(j);var C=B[0],G=B[1],E=B[2];var D=A.getImageData(0,0,H.width,H.height);var y=D.data;for(var I=0;I<y.length;I+=4){y[I+0]*=C;y[I+1]*=G;y[I+2]*=E}A.putImageData(D,0,0)};a.roundColor=function(o){var n=a.cacheStepsPerColorChannel;var j=k.hex2rgb(o);j[0]=Math.min(255,(j[0]/n)*n);j[1]=Math.min(255,(j[1]/n)*n);j[2]=Math.min(255,(j[2]/n)*n);return k.rgb2hex(j)};a.cacheStepsPerColorChannel=8;a.convertTintToImage=false;a.canUseMultiply=k.canUseNewCanvasBlendModes();a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel},{"../../../utils":67}],39:[function(z,A,y){var E=z("../SystemRenderer"),u=z("./managers/ShaderManager"),C=z("./managers/MaskManager"),v=z("./managers/StencilManager"),x=z("./managers/FilterManager"),w=z("./managers/BlendModeManager"),B=z("./utils/RenderTarget"),a=z("./utils/ObjectRenderer"),c=z("./filters/FXAAFilter"),b=z("../../utils"),D=z("../../const");function d(j,l,k){k=k||{};E.call(this,"WebGL",j,l,k);this.type=D.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,false);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,false);this._useFXAA=!!k.forceFXAA&&k.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:k.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:k.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new u(this);this.maskManager=new C(this);this.stencilManager=new v(this);this.filterManager=new x(this);this.blendModeManager=new w(this);this.currentRenderTarget=null;this.currentRenderer=new a(this);this.initPlugins();this._createContext();this._initContext();this._mapGlModes();this._renderTargetStack=[]}d.prototype=Object.create(E.prototype);d.prototype.constructor=d;A.exports=d;b.pluginTarget.mixin(d);d.glContextId=0;d.prototype._createContext=function(){var j=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=j;if(!j){throw new Error("This browser does not support webGL. Try using the canvas renderer")}this.glContextId=d.glContextId++;j.id=this.glContextId;j.renderer=this};d.prototype._initContext=function(){var j=this.gl;j.disable(j.DEPTH_TEST);j.disable(j.CULL_FACE);j.enable(j.BLEND);this.renderTarget=new B(j,this.width,this.height,null,this.resolution,true);this.setRenderTarget(this.renderTarget);this.emit("context",j);this.resize(this.width,this.height);if(!this._useFXAA){this._useFXAA=(this._contextOptions.antialias&&!j.getContextAttributes().antialias)}if(this._useFXAA){this._FXAAFilter=[new c()]}};d.prototype.render=function(l){if(this.gl.isContextLost()){return}this.drawCount=0;this._lastObjectRendered=l;if(this._useFXAA){this._FXAAFilter[0].uniforms.resolution.value.x=this.width;this._FXAAFilter[0].uniforms.resolution.value.y=this.height;l.filterArea=this.renderTarget.size;l.filters=this._FXAAFilter}var k=l.parent;l.parent=this._tempDisplayObjectParent;l.updateTransform();l.parent=k;var j=this.gl;this.setRenderTarget(this.renderTarget);if(this.clearBeforeRender){if(this.transparent){j.clearColor(0,0,0,0)}else{j.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1)}j.clear(j.COLOR_BUFFER_BIT)}this.renderDisplayObject(l,this.renderTarget)};d.prototype.renderDisplayObject=function(j,k,l){this.setRenderTarget(k);if(l){k.clear()}this.filterManager.setFilterStack(k.filterStack);j.renderWebGL(this);this.currentRenderer.flush()};d.prototype.setObjectRenderer=function(j){if(this.currentRenderer===j){return}this.currentRenderer.stop();this.currentRenderer=j;this.currentRenderer.start()};d.prototype.setRenderTarget=function(j){if(this.currentRenderTarget===j){return}this.currentRenderTarget=j;this.currentRenderTarget.activate();this.stencilManager.setMaskStack(j.stencilMaskStack)};d.prototype.resize=function(j,k){E.prototype.resize.call(this,j,k);this.filterManager.resize(j,k);this.renderTarget.resize(j,k);if(this.currentRenderTarget===this.renderTarget){this.renderTarget.activate();this.gl.viewport(0,0,this.width,this.height)}};d.prototype.updateTexture=function(k){k=k.baseTexture||k;if(!k.hasLoaded){return}var j=this.gl;if(!k._glTextures[j.id]){k._glTextures[j.id]=j.createTexture();k.on("update",this.updateTexture,this);k.on("dispose",this.destroyTexture,this)}j.bindTexture(j.TEXTURE_2D,k._glTextures[j.id]);j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultipliedAlpha);j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,k.source);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,k.scaleMode===D.SCALE_MODES.LINEAR?j.LINEAR:j.NEAREST);if(k.mipmap&&k.isPowerOfTwo){j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,k.scaleMode===D.SCALE_MODES.LINEAR?j.LINEAR_MIPMAP_LINEAR:j.NEAREST_MIPMAP_NEAREST);j.generateMipmap(j.TEXTURE_2D)}else{j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,k.scaleMode===D.SCALE_MODES.LINEAR?j.LINEAR:j.NEAREST)}if(!k.isPowerOfTwo){j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE)}else{j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.REPEAT);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.REPEAT)}return k._glTextures[j.id]};d.prototype.destroyTexture=function(j){j=j.baseTexture||j;if(!j.hasLoaded){return}if(j._glTextures[this.gl.id]){this.gl.deleteTexture(j._glTextures[this.gl.id])}};d.prototype.handleContextLost=function(j){j.preventDefault()};d.prototype.handleContextRestored=function(){this._initContext();for(var j in b.BaseTextureCache){b.BaseTextureCache[j]._glTextures.length=0}};d.prototype.destroy=function(k){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var l in b.BaseTextureCache){var j=b.BaseTextureCache[l];j.off("update",this.updateTexture,this);j.off("dispose",this.destroyTexture,this)}E.prototype.destroy.call(this,k);this.uid=0;this.shaderManager.destroy();this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.blendModeManager.destroy();this.shaderManager=null;this.maskManager=null;this.filterManager=null;this.blendModeManager=null;this.currentRenderer=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.drawCount=0;this.gl.useProgram(null);this.gl=null};d.prototype._mapGlModes=function(){var j=this.gl;if(!this.blendModes){this.blendModes={};this.blendModes[D.BLEND_MODES.NORMAL]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.ADD]=[j.SRC_ALPHA,j.DST_ALPHA];this.blendModes[D.BLEND_MODES.MULTIPLY]=[j.DST_COLOR,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.SCREEN]=[j.SRC_ALPHA,j.ONE];this.blendModes[D.BLEND_MODES.OVERLAY]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.DARKEN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.LIGHTEN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.COLOR_DODGE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.COLOR_BURN]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.HARD_LIGHT]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.SOFT_LIGHT]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.DIFFERENCE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.EXCLUSION]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.HUE]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.SATURATION]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.COLOR]=[j.ONE,j.ONE_MINUS_SRC_ALPHA];this.blendModes[D.BLEND_MODES.LUMINOSITY]=[j.ONE,j.ONE_MINUS_SRC_ALPHA]}if(!this.drawModes){this.drawModes={};this.drawModes[D.DRAW_MODES.POINTS]=j.POINTS;this.drawModes[D.DRAW_MODES.LINES]=j.LINES;this.drawModes[D.DRAW_MODES.LINE_LOOP]=j.LINE_LOOP;this.drawModes[D.DRAW_MODES.LINE_STRIP]=j.LINE_STRIP;this.drawModes[D.DRAW_MODES.TRIANGLES]=j.TRIANGLES;this.drawModes[D.DRAW_MODES.TRIANGLE_STRIP]=j.TRIANGLE_STRIP;this.drawModes[D.DRAW_MODES.TRIANGLE_FAN]=j.TRIANGLE_FAN}}},{"../../const":13,"../../utils":67,"../SystemRenderer":33,"./filters/FXAAFilter":41,"./managers/BlendModeManager":43,"./managers/FilterManager":44,"./managers/MaskManager":45,"./managers/ShaderManager":46,"./managers/StencilManager":47,"./utils/ObjectRenderer":53,"./utils/RenderTarget":55}],40:[function(d,c,k){var a=d("../shaders/TextureShader");function b(n,j,o){this.shaders=[];this.padding=0;this.uniforms=o||{};this.vertexSrc=n||a.defaultVertexSrc;this.fragmentSrc=j||a.defaultFragmentSrc}b.prototype.constructor=b;c.exports=b;b.prototype.getShader=function(n){var j=n.gl;var o=this.shaders[j.id];if(!o){o=new a(n.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes);this.shaders[j.id]=o}return o};b.prototype.applyFilter=function(r,j,p,q){var s=this.getShader(r);r.filterManager.applyFilter(s,j,p,q)};b.prototype.syncUniform=function(o){for(var j=0,n=this.shaders.length;j<n;++j){this.shaders[j].syncUniform(o)}}},{"../shaders/TextureShader":52}],41:[function(d,c,k){var b=d("./AbstractFilter");function a(){b.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.applyFilter=function(r,j,p){var q=r.filterManager;var s=this.getShader(r);q.applyFilter(s,j,p)}},{"./AbstractFilter":40}],42:[function(d,c,l){var b=d("./AbstractFilter"),a=d("../../../math");function m(k){var j=new a.Matrix();b.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:k._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:j.toArray(true)}});this.maskSprite=k;this.maskMatrix=j}m.prototype=Object.create(b.prototype);m.prototype.constructor=m;c.exports=m;m.prototype.applyFilter=function(q,s,j){var k=q.filterManager;this.uniforms.mask.value=this.maskSprite._texture;k.calculateMappedMatrix(s.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.alpha.value=this.maskSprite.worldAlpha;var r=this.getShader(q);k.applyFilter(r,s,j)};Object.defineProperties(m.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(j){this.uniforms.mask.value=j}},offset:{get:function(){return this.uniforms.offset.value},set:function(j){this.uniforms.offset.value=j}}})},{"../../../math":23,"./AbstractFilter":40}],43:[function(c,b,d){var a=c("./WebGLManager");function k(j){a.call(this,j);this.currentBlendMode=99999}k.prototype=Object.create(a.prototype);k.prototype.constructor=k;b.exports=k;k.prototype.setBlendMode=function(m){if(this.currentBlendMode===m){return false}this.currentBlendMode=m;var j=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(j[0],j[1]);return true}},{"./WebGLManager":48}],44:[function(p,r,o){var b=p("./WebGLManager"),s=p("../utils/RenderTarget"),a=p("../../../const"),q=p("../utils/Quad"),c=p("../../../math");function d(j){b.call(this,j);this.filterStack=[];this.filterStack.push({renderTarget:j.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new c.Rectangle(0,0,j.width,j.height);this.currentFrame=null}d.prototype=Object.create(b.prototype);d.prototype.constructor=d;r.exports=d;d.prototype.onContextChange=function(){this.texturePool.length=0;var j=this.renderer.gl;this.quad=new q(j)};d.prototype.setFilterStack=function(j){this.filterStack=j};d.prototype.pushFilter=function(j,l){var m=j.filterArea?j.filterArea.clone():j.getBounds();m.x=m.x|0;m.y=m.y|0;m.width=m.width|0;m.height=m.height|0;var k=l[0].padding|0;m.x-=k;m.y-=k;m.width+=k*2;m.height+=k*2;if(this.renderer.currentRenderTarget.transform){var u=this.renderer.currentRenderTarget.transform;m.x+=u.tx;m.y+=u.ty;this.capFilterArea(m);m.x-=u.tx;m.y-=u.ty}else{this.capFilterArea(m)}if(m.width>0&&m.height>0){this.currentFrame=m;var n=this.getRenderTarget();this.renderer.setRenderTarget(n);n.clear();this.filterStack.push({renderTarget:n,filter:l})}else{this.filterStack.push({renderTarget:null,filter:l})}};d.prototype.popFilter=function(){var B=this.filterStack.pop();var C=this.filterStack[this.filterStack.length-1];var A=B.renderTarget;if(!B.renderTarget){return}var k=C.renderTarget;var D=this.renderer.gl;this.currentFrame=A.frame;this.quad.map(this.textureSize,A.frame);D.bindBuffer(D.ARRAY_BUFFER,this.quad.vertexBuffer);D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var l=B.filter;D.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,D.FLOAT,false,0,0);D.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,D.FLOAT,false,0,2*4*4);D.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,D.FLOAT,false,0,4*4*4);this.renderer.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL);if(l.length===1){if(l[0].uniforms.dimensions){l[0].uniforms.dimensions.value[0]=this.renderer.width;l[0].uniforms.dimensions.value[1]=this.renderer.height;l[0].uniforms.dimensions.value[2]=this.quad.vertices[0];l[0].uniforms.dimensions.value[3]=this.quad.vertices[5]}l[0].applyFilter(this.renderer,A,k);this.returnRenderTarget(A)}else{var j=A;var z=this.getRenderTarget(true);for(var E=0;E<l.length-1;E++){var m=l[E];if(m.uniforms.dimensions){m.uniforms.dimensions.value[0]=this.renderer.width;m.uniforms.dimensions.value[1]=this.renderer.height;m.uniforms.dimensions.value[2]=this.quad.vertices[0];m.uniforms.dimensions.value[3]=this.quad.vertices[5]}m.applyFilter(this.renderer,j,z);var n=j;j=z;z=n}l[l.length-1].applyFilter(this.renderer,j,k);this.returnRenderTarget(j);this.returnRenderTarget(z)}return B.filter};d.prototype.getRenderTarget=function(k){var j=this.texturePool.pop()||new s(this.renderer.gl,this.textureSize.width,this.textureSize.height,a.SCALE_MODES.LINEAR,this.renderer.resolution*a.FILTER_RESOLUTION);j.frame=this.currentFrame;if(k){j.clear(true)}return j};d.prototype.returnRenderTarget=function(j){this.texturePool.push(j)};d.prototype.applyFilter=function(l,m,j,n){var k=this.renderer.gl;this.renderer.setRenderTarget(j);if(n){j.clear()}this.renderer.shaderManager.setShader(l);l.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);l.syncUniforms();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,m.texture);k.drawElements(k.TRIANGLES,6,k.UNSIGNED_SHORT,0);this.renderer.drawCount++};d.prototype.calculateMappedMatrix=function(j,n,A){var m=n.worldTransform.copy(c.Matrix.TEMP_MATRIX),z=n._texture.baseTexture;var x=A.identity();var y=this.textureSize.height/this.textureSize.width;x.translate(j.x/this.textureSize.width,j.y/this.textureSize.height);x.scale(1,y);var k=(this.textureSize.width/z.width);var l=(this.textureSize.height/z.height);m.tx/=z.width*k;m.ty/=z.width*k;m.invert();x.prepend(m);x.scale(1,1/y);x.scale(k,l);x.translate(n.anchor.x,n.anchor.y);return x};d.prototype.capFilterArea=function(j){if(j.x<0){j.width+=j.x;j.x=0}if(j.y<0){j.height+=j.y;j.y=0}if(j.x+j.width>this.textureSize.width){j.width=this.textureSize.width-j.x}if(j.y+j.height>this.textureSize.height){j.height=this.textureSize.height-j.y}};d.prototype.resize=function(j,l){this.textureSize.width=j;this.textureSize.height=l;for(var k=0;k<this.texturePool.length;k++){this.texturePool[k].resize(j,l)}};d.prototype.destroy=function(){this.quad.destroy();b.prototype.destroy.call(this);this.filterStack=null;this.offsetY=0;for(var j=0;j<this.texturePool.length;j++){this.texturePool[j].destroy()}this.texturePool=null}},{"../../../const":13,"../../../math":23,"../utils/Quad":54,"../utils/RenderTarget":55,"./WebGLManager":48}],45:[function(l,c,m){var b=l("./WebGLManager"),d=l("../filters/SpriteMaskFilter");function a(j){b.call(this,j);this.stencilStack=[];this.reverse=true;this.count=0;this.alphaMaskPool=[]}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.pushMask=function(j,k){if(k.texture){this.pushSpriteMask(j,k)}else{this.pushStencilMask(j,k)}};a.prototype.popMask=function(j,k){if(k.texture){this.popSpriteMask(j,k)}else{this.popStencilMask(j,k)}};a.prototype.pushSpriteMask=function(o,j){var k=this.alphaMaskPool.pop();if(!k){k=[new d(j)]}k[0].maskSprite=j;this.renderer.filterManager.pushFilter(o,k)};a.prototype.popSpriteMask=function(){var j=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(j)};a.prototype.pushStencilMask=function(j,k){this.renderer.stencilManager.pushMask(k)};a.prototype.popStencilMask=function(j,k){this.renderer.stencilManager.popMask(k)}},{"../filters/SpriteMaskFilter":42,"./WebGLManager":48}],46:[function(r,s,q){var c=r("./WebGLManager"),p=r("../shaders/TextureShader"),a=r("../shaders/ComplexPrimitiveShader"),d=r("../shaders/PrimitiveShader"),b=r("../../../utils");function o(j){c.call(this,j);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(var k=0;k<this.maxAttibs;k++){this.attribState[k]=false}this.stack=[];this._currentId=-1;this.currentShader=null}o.prototype=Object.create(c.prototype);o.prototype.constructor=o;b.pluginTarget.mixin(o);s.exports=o;o.prototype.onContextChange=function(){this.initPlugins();var j=this.renderer.gl;this.maxAttibs=j.getParameter(j.MAX_VERTEX_ATTRIBS);this.attribState=[];for(var k=0;k<this.maxAttibs;k++){this.attribState[k]=false}this.defaultShader=new p(this);this.primitiveShader=new d(this);this.complexPrimitiveShader=new a(this)};o.prototype.setAttribs=function(j){var l;for(l=0;l<this.tempAttribState.length;l++){this.tempAttribState[l]=false}for(var m in j){this.tempAttribState[j[m]]=true}var k=this.renderer.gl;for(l=0;l<this.attribState.length;l++){if(this.attribState[l]!==this.tempAttribState[l]){this.attribState[l]=this.tempAttribState[l];if(this.attribState[l]){k.enableVertexAttribArray(l)}else{k.disableVertexAttribArray(l)}}}};o.prototype.setShader=function(j){if(this._currentId===j.uid){return false}this._currentId=j.uid;this.currentShader=j;this.renderer.gl.useProgram(j.program);this.setAttribs(j.attributes);return true};o.prototype.destroy=function(){this.primitiveShader.destroy();this.complexPrimitiveShader.destroy();c.prototype.destroy.call(this);this.destroyPlugins();this.attribState=null;this.tempAttribState=null}},{"../../../utils":67,"../shaders/ComplexPrimitiveShader":49,"../shaders/PrimitiveShader":50,"../shaders/TextureShader":52,"./WebGLManager":48}],47:[function(d,c,l){var b=d("./WebGLManager"),m=d("../../../utils");function a(j){b.call(this,j);this.stencilMaskStack=null}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.setMaskStack=function(j){this.stencilMaskStack=j;var k=this.renderer.gl;if(j.stencilStack.length===0){k.disable(k.STENCIL_TEST)}else{k.enable(k.STENCIL_TEST)}};a.prototype.pushStencil=function(k,r){this.renderer.currentRenderTarget.attachStencilBuffer();var s=this.renderer.gl,j=this.stencilMaskStack;this.bindGraphics(k,r);if(j.stencilStack.length===0){s.enable(s.STENCIL_TEST);s.clear(s.STENCIL_BUFFER_BIT);j.reverse=true;j.count=0}j.stencilStack.push(r);var q=j.count;s.colorMask(false,false,false,false);s.stencilFunc(s.ALWAYS,0,255);s.stencilOp(s.KEEP,s.KEEP,s.INVERT);if(r.mode===1){s.drawElements(s.TRIANGLE_FAN,r.indices.length-4,s.UNSIGNED_SHORT,0);if(j.reverse){s.stencilFunc(s.EQUAL,255-q,255);s.stencilOp(s.KEEP,s.KEEP,s.DECR)}else{s.stencilFunc(s.EQUAL,q,255);s.stencilOp(s.KEEP,s.KEEP,s.INCR)}s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,(r.indices.length-4)*2);if(j.reverse){s.stencilFunc(s.EQUAL,255-(q+1),255)}else{s.stencilFunc(s.EQUAL,q+1,255)}j.reverse=!j.reverse}else{if(!j.reverse){s.stencilFunc(s.EQUAL,255-q,255);s.stencilOp(s.KEEP,s.KEEP,s.DECR)}else{s.stencilFunc(s.EQUAL,q,255);s.stencilOp(s.KEEP,s.KEEP,s.INCR)}s.drawElements(s.TRIANGLE_STRIP,r.indices.length,s.UNSIGNED_SHORT,0);if(!j.reverse){s.stencilFunc(s.EQUAL,255-(q+1),255)}else{s.stencilFunc(s.EQUAL,q+1,255)}}s.colorMask(true,true,true,true);s.stencilOp(s.KEEP,s.KEEP,s.KEEP);j.count++};a.prototype.bindGraphics=function(k,p){var q=this.renderer.gl;var j;if(p.mode===1){j=this.renderer.shaderManager.complexPrimitiveShader;this.renderer.shaderManager.setShader(j);q.uniformMatrix3fv(j.uniforms.translationMatrix._location,false,k.worldTransform.toArray(true));q.uniformMatrix3fv(j.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));q.uniform3fv(j.uniforms.tint._location,m.hex2rgb(k.tint));q.uniform3fv(j.uniforms.color._location,p.color);q.uniform1f(j.uniforms.alpha._location,k.worldAlpha);q.bindBuffer(q.ARRAY_BUFFER,p.buffer);q.vertexAttribPointer(j.attributes.aVertexPosition,2,q.FLOAT,false,4*2,0);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,p.indexBuffer)}else{j=this.renderer.shaderManager.primitiveShader;this.renderer.shaderManager.setShader(j);q.uniformMatrix3fv(j.uniforms.translationMatrix._location,false,k.worldTransform.toArray(true));q.uniformMatrix3fv(j.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));q.uniform3fv(j.uniforms.tint._location,m.hex2rgb(k.tint));q.uniform1f(j.uniforms.alpha._location,k.worldAlpha);q.bindBuffer(q.ARRAY_BUFFER,p.buffer);q.vertexAttribPointer(j.attributes.aVertexPosition,2,q.FLOAT,false,4*6,0);q.vertexAttribPointer(j.attributes.aColor,4,q.FLOAT,false,4*6,2*4);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,p.indexBuffer)}};a.prototype.popStencil=function(k,r){var s=this.renderer.gl,j=this.stencilMaskStack;j.stencilStack.pop();j.count--;if(j.stencilStack.length===0){s.disable(s.STENCIL_TEST)}else{var q=j.count;this.bindGraphics(k,r);s.colorMask(false,false,false,false);if(r.mode===1){j.reverse=!j.reverse;if(j.reverse){s.stencilFunc(s.EQUAL,255-(q+1),255);s.stencilOp(s.KEEP,s.KEEP,s.INCR)}else{s.stencilFunc(s.EQUAL,q+1,255);s.stencilOp(s.KEEP,s.KEEP,s.DECR)}s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,(r.indices.length-4)*2);s.stencilFunc(s.ALWAYS,0,255);s.stencilOp(s.KEEP,s.KEEP,s.INVERT);s.drawElements(s.TRIANGLE_FAN,r.indices.length-4,s.UNSIGNED_SHORT,0);this.renderer.drawCount+=2;if(!j.reverse){s.stencilFunc(s.EQUAL,255-(q),255)}else{s.stencilFunc(s.EQUAL,q,255)}}else{if(!j.reverse){s.stencilFunc(s.EQUAL,255-(q+1),255);s.stencilOp(s.KEEP,s.KEEP,s.INCR)}else{s.stencilFunc(s.EQUAL,q+1,255);s.stencilOp(s.KEEP,s.KEEP,s.DECR)}s.drawElements(s.TRIANGLE_STRIP,r.indices.length,s.UNSIGNED_SHORT,0);this.renderer.drawCount++;if(!j.reverse){s.stencilFunc(s.EQUAL,255-(q),255)}else{s.stencilFunc(s.EQUAL,q,255)}}s.colorMask(true,true,true,true);s.stencilOp(s.KEEP,s.KEEP,s.KEEP)}};a.prototype.destroy=function(){b.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};a.prototype.pushMask=function(j){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);if(j.dirty){this.renderer.plugins.graphics.updateGraphics(j,this.renderer.gl)}if(!j._webGL[this.renderer.gl.id].data.length){return}this.pushStencil(j,j._webGL[this.renderer.gl.id].data[0])};a.prototype.popMask=function(j){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.popStencil(j,j._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":67,"./WebGLManager":48}],48:[function(c,b,d){function a(k){this.renderer=k;this.renderer.on("context",this.onContextChange,this)}a.prototype.constructor=a;b.exports=a;a.prototype.onContextChange=function(){};a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],49:[function(d,c,k){var b=d("./Shader");function a(j){b.call(this,j,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a},{"./Shader":51}],50:[function(c,b,d){var a=c("./Shader");function k(j){a.call(this,j,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}k.prototype=Object.create(a.prototype);k.prototype.constructor=k;b.exports=k},{"./Shader":51}],51:[function(c,b,d){var k=c("../../../utils");function a(r,p,s,q,j){if(!p||!s){throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc")}this.uid=k.uid();this.gl=r.renderer.gl;this.shaderManager=r;this.program=null;this.uniforms=q||{};this.attributes=j||{};this.textureCount=1;this.vertexSrc=p;this.fragmentSrc=s;this.init()}a.prototype.constructor=a;b.exports=a;a.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};a.prototype.cacheUniformLocations=function(j){for(var m=0;m<j.length;++m){this.uniforms[j[m]]._location=this.gl.getUniformLocation(this.program,j[m])}};a.prototype.cacheAttributeLocations=function(j){for(var m=0;m<j.length;++m){this.attributes[j[m]]=this.gl.getAttribLocation(this.program,j[m])}};a.prototype.compile=function(){var q=this.gl;var o=this._glCompile(q.VERTEX_SHADER,this.vertexSrc);var j=this._glCompile(q.FRAGMENT_SHADER,this.fragmentSrc);var p=q.createProgram();q.attachShader(p,o);q.attachShader(p,j);q.linkProgram(p);if(!q.getProgramParameter(p,q.LINK_STATUS)){if(q.getProgramInfoLog(p)!==""){}q.deleteProgram(p);p=null}q.deleteShader(o);q.deleteShader(j);return(this.program=p)};a.prototype.syncUniform=function(s){var r=s._location,u=s.value,t=this.gl,w,j;switch(s.type){case"b":case"bool":case"boolean":t.uniform1i(r,u?1:0);break;case"i":case"1i":t.uniform1i(r,u);break;case"f":case"1f":t.uniform1f(r,u);break;case"2f":t.uniform2f(r,u[0],u[1]);break;case"3f":t.uniform3f(r,u[0],u[1],u[2]);break;case"4f":t.uniform4f(r,u[0],u[1],u[2],u[3]);break;case"v2":t.uniform2f(r,u.x,u.y);break;case"v3":t.uniform3f(r,u.x,u.y,u.z);break;case"v4":t.uniform4f(r,u.x,u.y,u.z,u.w);break;case"1iv":t.uniform1iv(r,u);break;case"2iv":t.uniform2iv(r,u);break;case"3iv":t.uniform3iv(r,u);break;case"4iv":t.uniform4iv(r,u);break;case"1fv":t.uniform1fv(r,u);break;case"2fv":t.uniform2fv(r,u);break;case"3fv":t.uniform3fv(r,u);break;case"4fv":t.uniform4fv(r,u);break;case"m2":case"mat2":case"Matrix2fv":t.uniformMatrix2fv(r,s.transpose,u);break;case"m3":case"mat3":case"Matrix3fv":t.uniformMatrix3fv(r,s.transpose,u);break;case"m4":case"mat4":case"Matrix4fv":t.uniformMatrix4fv(r,s.transpose,u);break;case"c":if(typeof u==="number"){u=k.hex2rgb(u)}t.uniform3f(r,u[0],u[1],u[2]);break;case"iv1":t.uniform1iv(r,u);break;case"iv":t.uniform3iv(r,u);break;case"fv1":t.uniform1fv(r,u);break;case"fv":t.uniform3fv(r,u);break;case"v2v":if(!s._array){s._array=new Float32Array(2*u.length)}for(w=0,j=u.length;w<j;++w){s._array[w*2]=u[w].x;s._array[w*2+1]=u[w].y}t.uniform2fv(r,s._array);break;case"v3v":if(!s._array){s._array=new Float32Array(3*u.length)}for(w=0,j=u.length;w<j;++w){s._array[w*3]=u[w].x;s._array[w*3+1]=u[w].y;s._array[w*3+2]=u[w].z}t.uniform3fv(r,s._array);break;case"v4v":if(!s._array){s._array=new Float32Array(4*u.length)}for(w=0,j=u.length;w<j;++w){s._array[w*4]=u[w].x;s._array[w*4+1]=u[w].y;s._array[w*4+2]=u[w].z;s._array[w*4+3]=u[w].w}t.uniform4fv(r,s._array);break;case"t":case"sampler2D":if(!s.value||!s.value.baseTexture.hasLoaded){break}t.activeTexture(t["TEXTURE"+this.textureCount]);var v=s.value.baseTexture._glTextures[t.id];if(!v){this.initSampler2D(s);v=s.value.baseTexture._glTextures[t.id]}t.bindTexture(t.TEXTURE_2D,v);t.uniform1i(s._location,this.textureCount);this.textureCount++;break;default:}};a.prototype.syncUniforms=function(){this.textureCount=1;for(var j in this.uniforms){this.syncUniform(this.uniforms[j])}};a.prototype.initSampler2D=function(p){var q=this.gl;var o=p.value.baseTexture;if(!o.hasLoaded){return}if(p.textureData){var j=p.textureData;o._glTextures[q.id]=q.createTexture();q.bindTexture(q.TEXTURE_2D,o._glTextures[q.id]);q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultipliedAlpha);q.texImage2D(q.TEXTURE_2D,0,j.luminance?q.LUMINANCE:q.RGBA,q.RGBA,q.UNSIGNED_BYTE,o.source);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,j.magFilter?j.magFilter:q.LINEAR);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,j.wrapS?j.wrapS:q.CLAMP_TO_EDGE);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,j.wrapS?j.wrapS:q.CLAMP_TO_EDGE);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,j.wrapT?j.wrapT:q.CLAMP_TO_EDGE)}else{this.shaderManager.renderer.updateTexture(o)}};a.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.gl=null;this.uniforms=null;this.attributes=null;this.vertexSrc=null;this.fragmentSrc=null};a.prototype._glCompile=function(o,j){var n=this.gl.createShader(o);this.gl.shaderSource(n,j);this.gl.compileShader(n);if(!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)){return null}return n}},{"../../../utils":67}],52:[function(c,b,k){var a=c("./Shader");function d(w,x,A,z,u){var t={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(z){for(var j in z){t[j]=z[j]}}var y={aVertexPosition:0,aTextureCoord:0,aColor:0};if(u){for(var v in u){y[v]=u[v]}}x=x||d.defaultVertexSrc;A=A||d.defaultFragmentSrc;a.call(this,w,x,A,t,y)}d.prototype=Object.create(a.prototype);d.prototype.constructor=d;b.exports=d;d.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n");d.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":51}],53:[function(d,c,k){var b=d("../managers/WebGLManager");function a(j){b.call(this,j)}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.start=function(){};a.prototype.stop=function(){this.flush()};a.prototype.flush=function(){};a.prototype.render=function(j){}},{"../managers/WebGLManager":48}],54:[function(c,b,d){function a(k){this.gl=k;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=k.createBuffer();this.indexBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,this.vertexBuffer);k.bufferData(k.ARRAY_BUFFER,(8+8+16)*4,k.DYNAMIC_DRAW);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,this.indexBuffer);k.bufferData(k.ELEMENT_ARRAY_BUFFER,this.indices,k.STATIC_DRAW);this.upload()}a.prototype.constructor=a;a.prototype.map=function(o,p){var q=0;var n=0;this.uvs[0]=q;this.uvs[1]=n;this.uvs[2]=q+p.width/o.width;this.uvs[3]=n;this.uvs[4]=q+p.width/o.width;this.uvs[5]=n+p.height/o.height;this.uvs[6]=q;this.uvs[7]=n+p.height/o.height;q=p.x;n=p.y;this.vertices[0]=q;this.vertices[1]=n;this.vertices[2]=q+p.width;this.vertices[3]=n;this.vertices[4]=q+p.width;this.vertices[5]=n+p.height;this.vertices[6]=q;this.vertices[7]=n+p.height;this.upload()};a.prototype.upload=function(){var k=this.gl;k.bindBuffer(k.ARRAY_BUFFER,this.vertexBuffer);k.bufferSubData(k.ARRAY_BUFFER,0,this.vertices);k.bufferSubData(k.ARRAY_BUFFER,8*4,this.uvs);k.bufferSubData(k.ARRAY_BUFFER,(8+8)*4,this.colors)};a.prototype.destroy=function(){var k=this.gl;k.deleteBuffer(this.vertexBuffer);k.deleteBuffer(this.indexBuffer)};b.exports=a},{}],55:[function(d,c,o){var b=d("../../../math"),p=d("../../../utils"),q=d("../../../const"),n=d("./StencilMaskStack");var a=function(j,k,w,l,m,u){this.gl=j;this.frameBuffer=null;this.texture=null;this.size=new b.Rectangle(0,0,1,1);this.resolution=m||q.RESOLUTION;this.projectionMatrix=new b.Matrix();this.transform=null;this.frame=null;this.stencilBuffer=null;this.stencilMaskStack=new n();this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=l||q.SCALE_MODES.DEFAULT;this.root=u;if(!this.root){this.frameBuffer=j.createFramebuffer();this.texture=j.createTexture();j.bindTexture(j.TEXTURE_2D,this.texture);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,l===q.SCALE_MODES.LINEAR?j.LINEAR:j.NEAREST);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,l===q.SCALE_MODES.LINEAR?j.LINEAR:j.NEAREST);var v=p.isPowerOfTwo(k,w);if(!v){j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE)}else{j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.REPEAT);j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.REPEAT)}j.bindFramebuffer(j.FRAMEBUFFER,this.frameBuffer);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,this.texture,0)}this.resize(k,w)};a.prototype.constructor=a;c.exports=a;a.prototype.clear=function(j){var k=this.gl;if(j){k.bindFramebuffer(k.FRAMEBUFFER,this.frameBuffer)}k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT)};a.prototype.attachStencilBuffer=function(){if(this.stencilBuffer){return}if(!this.root){var j=this.gl;this.stencilBuffer=j.createRenderbuffer();j.bindRenderbuffer(j.RENDERBUFFER,this.stencilBuffer);j.framebufferRenderbuffer(j.FRAMEBUFFER,j.DEPTH_STENCIL_ATTACHMENT,j.RENDERBUFFER,this.stencilBuffer);j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};a.prototype.activate=function(){var j=this.gl;j.bindFramebuffer(j.FRAMEBUFFER,this.frameBuffer);var k=this.frame||this.size;this.calculateProjection(k);if(this.transform){this.projectionMatrix.append(this.transform)}j.viewport(0,0,k.width*this.resolution,k.height*this.resolution)};a.prototype.calculateProjection=function(k){var j=this.projectionMatrix;j.identity();if(!this.root){j.a=1/k.width*2;j.d=1/k.height*2;j.tx=-1-k.x*j.a;j.ty=-1-k.y*j.d}else{j.a=1/k.width*2;j.d=-1/k.height*2;j.tx=-1-k.x*j.a;j.ty=1-k.y*j.d}};a.prototype.resize=function(k,m){k=k|0;m=m|0;if(this.size.width===k&&this.size.height===m){return}this.size.width=k;this.size.height=m;if(!this.root){var j=this.gl;j.bindTexture(j.TEXTURE_2D,this.texture);j.texImage2D(j.TEXTURE_2D,0,j.RGBA,k*this.resolution,m*this.resolution,0,j.RGBA,j.UNSIGNED_BYTE,null);if(this.stencilBuffer){j.bindRenderbuffer(j.RENDERBUFFER,this.stencilBuffer);j.renderbufferStorage(j.RENDERBUFFER,j.DEPTH_STENCIL,k*this.resolution,m*this.resolution)}}var l=this.frame||this.size;this.calculateProjection(l)};a.prototype.destroy=function(){var j=this.gl;j.deleteRenderbuffer(this.stencilBuffer);j.deleteFramebuffer(this.frameBuffer);j.deleteTexture(this.texture);this.frameBuffer=null;this.texture=null}},{"../../../const":13,"../../../math":23,"../../../utils":67,"./StencilMaskStack":56}],56:[function(b,a,d){function c(){this.stencilStack=[];this.reverse=true;this.count=0}c.prototype.constructor=c;a.exports=c},{}],57:[function(s,t,d){var c=s("../math"),q=s("../textures/Texture"),r=s("../display/Container"),v=s("../renderers/canvas/utils/CanvasTinter"),b=s("../utils"),a=s("../const"),w=new c.Point();function u(j){r.call(this);this.anchor=new c.Point();this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=a.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=j||q.EMPTY}u.prototype=Object.create(r.prototype);u.prototype.constructor=u;t.exports=u;Object.defineProperties(u.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(j){this.scale.x=b.sign(this.scale.x)*j/this.texture._frame.width;this._width=j}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(j){this.scale.y=b.sign(this.scale.y)*j/this.texture._frame.height;this._height=j}},texture:{get:function(){return this._texture},set:function(j){if(this._texture===j){return}this._texture=j;this.cachedTint=16777215;if(j){if(j.baseTexture.hasLoaded){this._onTextureUpdate()}else{j.once("update",this._onTextureUpdate,this)}}}}});u.prototype._onTextureUpdate=function(){if(this._width){this.scale.x=b.sign(this.scale.x)*this._width/this.texture.frame.width}if(this._height){this.scale.y=b.sign(this.scale.y)*this._height/this.texture.frame.height}};u.prototype._renderWebGL=function(j){j.setObjectRenderer(j.plugins.sprite);j.plugins.sprite.render(this)};u.prototype.getBounds=function(ah){if(!this._currentBounds){var am=this._texture._frame.width;var T=this._texture._frame.height;var V=am*(1-this.anchor.x);var X=am*-this.anchor.x;var Z=T*(1-this.anchor.y);var ab=T*-this.anchor.y;var al=ah||this.worldTransform;var k=al.a;var m=al.b;var o=al.c;var U=al.d;var j=al.tx;var l=al.ty;var n,p,S,Y;if(m===0&&o===0){if(k<0){k*=-1}if(U<0){U*=-1}n=k*X+j;p=k*V+j;S=U*ab+l;Y=U*Z+l}else{var aa=k*X+o*ab+j;var af=U*ab+m*X+l;var ad=k*V+o*ab+j;var ag=U*ab+m*V+l;var ae=k*V+o*Z+j;var aj=U*Z+m*V+l;var ai=k*X+o*Z+j;var ak=U*Z+m*X+l;n=aa;n=ad<n?ad:n;n=ae<n?ae:n;n=ai<n?ai:n;S=af;S=ag<S?ag:S;S=aj<S?aj:S;S=ak<S?ak:S;p=aa;p=ad>p?ad:p;p=ae>p?ae:p;p=ai>p?ai:p;Y=af;Y=ag>Y?ag:Y;Y=aj>Y?aj:Y;Y=ak>Y?ak:Y}if(this.children.length){var W=this.containerGetBounds();V=W.x;X=W.x+W.width;Z=W.y;ab=W.y+W.height;n=(n<V)?n:V;S=(S<Z)?S:Z;p=(p>X)?p:X;Y=(Y>ab)?Y:ab}var ac=this._bounds;ac.x=n;ac.width=p-n;ac.y=S;ac.height=Y-S;this._currentBounds=ac}return this._currentBounds};u.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};u.prototype.containsPoint=function(m){this.worldTransform.applyInverse(m,w);var j=this._texture._frame.width;var n=this._texture._frame.height;var l=-j*this.anchor.x;var k;if(w.x>l&&w.x<l+j){k=-n*this.anchor.y;if(w.y>k&&w.y<k+n){return true}}return false};u.prototype._renderCanvas=function(E){if(this.texture.crop.width<=0||this.texture.crop.height<=0){return}var G=E.blendModes[this.blendMode];if(G!==E.context.globalCompositeOperation){E.context.globalCompositeOperation=G}if(this.texture.valid){var D=this._texture,F=this.worldTransform,l,m,k,n;E.context.globalAlpha=this.worldAlpha;var o=D.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;if(E.smoothProperty&&E.context[E.smoothProperty]!==o){E.context[E.smoothProperty]=o}if(D.rotate){var p=F.a;var C=F.b;F.a=-F.c;F.b=-F.d;F.c=p;F.d=C;k=D.crop.height;n=D.crop.width;l=(D.trim)?D.trim.y-this.anchor.y*D.trim.height:this.anchor.y*-D._frame.height;m=(D.trim)?D.trim.x-this.anchor.x*D.trim.width:this.anchor.x*-D._frame.width}else{k=D.crop.width;n=D.crop.height;l=(D.trim)?D.trim.x-this.anchor.x*D.trim.width:this.anchor.x*-D._frame.width;m=(D.trim)?D.trim.y-this.anchor.y*D.trim.height:this.anchor.y*-D._frame.height}if(E.roundPixels){E.context.setTransform(F.a,F.b,F.c,F.d,(F.tx*E.resolution)|0,(F.ty*E.resolution)|0);l=l|0;m=m|0}else{E.context.setTransform(F.a,F.b,F.c,F.d,F.tx*E.resolution,F.ty*E.resolution)}var j=D.baseTexture.resolution;if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=v.getTintedTexture(this,this.tint)}E.context.drawImage(this.tintedTexture,0,0,k*j,n*j,l*E.resolution,m*E.resolution,k*E.resolution,n*E.resolution)}else{E.context.drawImage(D.baseTexture.source,D.crop.x*j,D.crop.y*j,k*j,n*j,l*E.resolution,m*E.resolution,k*E.resolution,n*E.resolution)}}};u.prototype.destroy=function(k,j){r.prototype.destroy.call(this);this.anchor=null;if(k){this._texture.destroy(j)}this._texture=null;this.shader=null};u.fromFrame=function(j){var k=b.TextureCache[j];if(!k){throw new Error('The frameId "'+j+'" does not exist in the texture cache')}return new u(k)};u.fromImage=function(k,l,j){return new u(q.fromImage(k,l,j))}},{"../const":13,"../display/Container":14,"../math":23,"../renderers/canvas/utils/CanvasTinter":38,"../textures/Texture":62,"../utils":67}],58:[function(d,c,m){var a=d("../../renderers/webgl/utils/ObjectRenderer"),n=d("../../renderers/webgl/WebGLRenderer"),o=d("../../const");function b(l){a.call(this,l);this.vertSize=5;this.vertByteSize=this.vertSize*4;this.size=o.SPRITE_BATCH_SIZE;var j=(this.size*4)*this.vertByteSize;var k=this.size*6;this.vertices=new ArrayBuffer(j);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(k);for(var r=0,s=0;r<k;r+=6,s+=4){this.indices[r+0]=s+0;this.indices[r+1]=s+1;this.indices[r+2]=s+2;this.indices[r+3]=s+0;this.indices[r+4]=s+2;this.indices[r+5]=s+3}this.currentBatchSize=0;this.sprites=[];this.shader=null}b.prototype=Object.create(a.prototype);b.prototype.constructor=b;c.exports=b;n.registerPlugin("sprite",b);b.prototype.onContextChange=function(){var j=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;this.vertexBuffer=j.createBuffer();this.indexBuffer=j.createBuffer();j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,this.indexBuffer);j.bufferData(j.ELEMENT_ARRAY_BUFFER,this.indices,j.STATIC_DRAW);j.bindBuffer(j.ARRAY_BUFFER,this.vertexBuffer);j.bufferData(j.ARRAY_BUFFER,this.vertices,j.DYNAMIC_DRAW);this.currentBlendMode=99999};b.prototype.render=function(k){var l=k._texture;if(this.currentBatchSize>=this.size){this.flush()}var L=l._uvs;if(!L){return}var X=k.anchor.x;var Y=k.anchor.y;var H,J,P,R;if(l.trim&&k.tileScale===undefined){var V=l.trim;J=V.x-X*V.width;H=J+l.crop.width;R=V.y-Y*V.height;P=R+l.crop.height}else{H=(l._frame.width)*(1-X);J=(l._frame.width)*-X;P=l._frame.height*(1-Y);R=l._frame.height*-Y}var W=this.currentBatchSize*this.vertByteSize;var j=k.worldTransform;var K=j.a;var N=j.b;var Q=j.c;var T=j.d;var I=j.tx;var O=j.ty;var M=this.colors;var S=this.positions;if(this.renderer.roundPixels){S[W]=K*J+Q*R+I|0;S[W+1]=T*R+N*J+O|0;S[W+5]=K*H+Q*R+I|0;S[W+6]=T*R+N*H+O|0;S[W+10]=K*H+Q*P+I|0;S[W+11]=T*P+N*H+O|0;S[W+15]=K*J+Q*P+I|0;S[W+16]=T*P+N*J+O|0}else{S[W]=K*J+Q*R+I;S[W+1]=T*R+N*J+O;S[W+5]=K*H+Q*R+I;S[W+6]=T*R+N*H+O;S[W+10]=K*H+Q*P+I;S[W+11]=T*P+N*H+O;S[W+15]=K*J+Q*P+I;S[W+16]=T*P+N*J+O}S[W+2]=L.x0;S[W+3]=L.y0;S[W+7]=L.x1;S[W+8]=L.y1;S[W+12]=L.x2;S[W+13]=L.y2;S[W+17]=L.x3;S[W+18]=L.y3;var U=k.tint;M[W+4]=M[W+9]=M[W+14]=M[W+19]=(U>>16)+(U&65280)+((U&255)<<16)+(k.worldAlpha*255<<24);this.sprites[this.currentBatchSize++]=k};b.prototype.flush=function(){if(this.currentBatchSize===0){return}var M=this.renderer.gl;var K;if(this.currentBatchSize>(this.size*0.5)){M.bufferSubData(M.ARRAY_BUFFER,0,this.vertices)}else{var I=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);M.bufferSubData(M.ARRAY_BUFFER,0,I)}var C,k,G;var J=0;var E=0;var L=null;var l=this.renderer.blendModeManager.currentBlendMode;var F=null;var N=false;var H=false;var D;for(var O=0,j=this.currentBatchSize;O<j;O++){D=this.sprites[O];C=D._texture.baseTexture;k=D.blendMode;G=D.shader||this.shader;N=l!==k;H=F!==G;if(L!==C||N||H){this.renderBatch(L,J,E);E=O;J=0;L=C;if(N){l=k;this.renderer.blendModeManager.setBlendMode(l)}if(H){F=G;K=F.shaders?F.shaders[M.id]:F;if(!K){K=F.getShader(this.renderer)}this.renderer.shaderManager.setShader(K);K.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);K.syncUniforms();M.activeTexture(M.TEXTURE0)}}J++}this.renderBatch(L,J,E);this.currentBatchSize=0};b.prototype.renderBatch=function(q,j,k){if(j===0){return}var l=this.renderer.gl;if(!q._glTextures[l.id]){this.renderer.updateTexture(q)}else{l.bindTexture(l.TEXTURE_2D,q._glTextures[l.id])}l.drawElements(l.TRIANGLES,j*6,l.UNSIGNED_SHORT,k*6*2);this.renderer.drawCount++};b.prototype.start=function(){var k=this.renderer.gl;k.bindBuffer(k.ARRAY_BUFFER,this.vertexBuffer);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var j=this.vertByteSize;k.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,k.FLOAT,false,j,0);k.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,k.FLOAT,false,j,2*4);k.vertexAttribPointer(this.shader.attributes.aColor,4,k.UNSIGNED_BYTE,true,j,4*4)};b.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);this.renderer.gl.deleteBuffer(this.indexBuffer);a.prototype.destroy.call(this);this.shader.destroy();this.renderer=null;this.vertices=null;this.positions=null;this.colors=null;this.indices=null;this.vertexBuffer=null;this.indexBuffer=null;this.sprites=null;this.shader=null}},{"../../const":13,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/utils/ObjectRenderer":53}],59:[function(p,r,d){var s=p("../sprites/Sprite"),o=p("../textures/Texture"),c=p("../math"),b=p("../utils"),a=p("../const");function q(j,l,m){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=m||a.RESOLUTION;this._text=null;this._style=null;var k=o.fromCanvas(this.canvas);k.trim=new c.Rectangle();s.call(this,k);this.text=j;this.style=l}q.prototype=Object.create(s.prototype);q.prototype.constructor=q;r.exports=q;q.fontPropertiesCache={};q.fontPropertiesCanvas=document.createElement("canvas");q.fontPropertiesContext=q.fontPropertiesCanvas.getContext("2d");Object.defineProperties(q.prototype,{width:{get:function(){if(this.dirty){this.updateText()}return this.scale.x*this._texture._frame.width},set:function(j){this.scale.x=j/this._texture._frame.width;this._width=j}},height:{get:function(){if(this.dirty){this.updateText()}return this.scale.y*this._texture._frame.height},set:function(j){this.scale.y=j/this._texture._frame.height;this._height=j}},style:{get:function(){return this._style},set:function(j){j=j||{};if(typeof j.fill==="number"){j.fill=b.hex2string(j.fill)}if(typeof j.stroke==="number"){j.stroke=b.hex2string(j.stroke)}if(typeof j.dropShadowColor==="number"){j.dropShadowColor=b.hex2string(j.dropShadowColor)}j.font=j.font||"bold 20pt Arial";j.fill=j.fill||"black";j.align=j.align||"left";j.stroke=j.stroke||"black";j.strokeThickness=j.strokeThickness||0;j.wordWrap=j.wordWrap||false;j.wordWrapWidth=j.wordWrapWidth||100;j.dropShadow=j.dropShadow||false;j.dropShadowColor=j.dropShadowColor||"#000000";j.dropShadowAngle=j.dropShadowAngle||Math.PI/6;j.dropShadowDistance=j.dropShadowDistance||5;j.padding=j.padding||0;j.textBaseline=j.textBaseline||"alphabetic";j.lineJoin=j.lineJoin||"miter";j.miterLimit=j.miterLimit||10;this._style=j;this.dirty=true},configurable:true},text:{get:function(){return this._text},set:function(j){j=j.toString()||" ";if(this._text===j){return}this._text=j;this.dirty=true}}});q.prototype.updateText=function(){var n=this._style;this.context.font=n.font;var J=n.wordWrap?this.wordWrap(this._text):this._text;var m=J.split(/(?:\r\n|\r|\n)/);var K=new Array(m.length);var l=0;var M=this.determineFontProperties(n.font);for(var I=0;I<m.length;I++){var H=this.context.measureText(m[I]).width;K[I]=H;l=Math.max(l,H)}var j=l+n.strokeThickness;if(n.dropShadow){j+=n.dropShadowDistance}this.canvas.width=(j+this.context.lineWidth)*this.resolution;var F=this.style.lineHeight||M.fontSize+n.strokeThickness;var E=F*m.length;if(n.dropShadow){E+=n.dropShadowDistance}this.canvas.height=(E+this._style.padding*2)*this.resolution;this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=n.font;this.context.strokeStyle=n.stroke;this.context.lineWidth=n.strokeThickness;this.context.textBaseline=n.textBaseline;this.context.lineJoin=n.lineJoin;this.context.miterLimit=n.miterLimit;var L;var k;if(n.dropShadow){this.context.fillStyle=n.dropShadowColor;var G=Math.cos(n.dropShadowAngle)*n.dropShadowDistance;var D=Math.sin(n.dropShadowAngle)*n.dropShadowDistance;for(I=0;I<m.length;I++){L=n.strokeThickness/2;k=(n.strokeThickness/2+I*F)+M.ascent;if(n.align==="right"){L+=l-K[I]}else{if(n.align==="center"){L+=(l-K[I])/2}}if(n.fill){this.context.fillText(m[I],L+G,k+D+this._style.padding)}}}this.context.fillStyle=n.fill;for(I=0;I<m.length;I++){L=n.strokeThickness/2;k=(n.strokeThickness/2+I*F)+M.ascent;if(n.align==="right"){L+=l-K[I]}else{if(n.align==="center"){L+=(l-K[I])/2}}if(n.stroke&&n.strokeThickness){this.context.strokeText(m[I],L,k+this._style.padding)}if(n.fill){this.context.fillText(m[I],L,k+this._style.padding)}}this.updateTexture()};q.prototype.updateTexture=function(){var j=this._texture;j.baseTexture.hasLoaded=true;j.baseTexture.resolution=this.resolution;j.baseTexture.width=this.canvas.width/this.resolution;j.baseTexture.height=this.canvas.height/this.resolution;j.crop.width=j._frame.width=this.canvas.width/this.resolution;j.crop.height=j._frame.height=this.canvas.height/this.resolution;j.trim.x=0;j.trim.y=-this._style.padding;j.trim.width=j._frame.width;j.trim.height=j._frame.height-this._style.padding*2;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;j.baseTexture.emit("update",j.baseTexture);this.dirty=false};q.prototype.renderWebGL=function(j){if(this.dirty){this.updateText()}s.prototype.renderWebGL.call(this,j)};q.prototype._renderCanvas=function(j){if(this.dirty){this.updateText()}s.prototype._renderCanvas.call(this,j)};q.prototype.determineFontProperties=function(J){var G=q.fontPropertiesCache[J];if(!G){G={};var k=q.fontPropertiesCanvas;var m=q.fontPropertiesContext;m.font=J;var n=Math.ceil(m.measureText("|Mq").width);var H=Math.ceil(m.measureText("M").width);var C=2*H;H=H*1.4|0;k.width=n;k.height=C;m.fillStyle="#f00";m.fillRect(0,0,n,C);m.font=J;m.textBaseline="alphabetic";m.fillStyle="#000";m.fillText("|Mq",0,H);var F=m.getImageData(0,0,n,C).data;var j=F.length;var l=n*4;var I,K;var D=0;var E=false;for(I=0;I<H;I++){for(K=0;K<l;K+=4){if(F[D+K]!==255){E=true;break}}if(!E){D+=l}else{break}}G.ascent=H-I;D=j-l;E=false;for(I=C;I>H;I--){for(K=0;K<l;K+=4){if(F[D+K]!==255){E=true;break}}if(!E){D-=l}else{break}}G.descent=I-H;G.fontSize=G.ascent+G.descent;q.fontPropertiesCache[J]=G}return G};q.prototype.wordWrap=function(A){var n="";var y=A.split("\n");var m=this._style.wordWrapWidth;for(var j=0;j<y.length;j++){var k=m;var B=y[j].split(" ");for(var l=0;l<B.length;l++){var z=this.context.measureText(B[l]).width;var C=z+this.context.measureText(" ").width;if(l===0||C>k){if(l>0){n+="\n"}n+=B[l];k=m-z}else{k-=C;n+=" "+B[l]}}if(j<y.length-1){n+="\n"}}return n};q.prototype.getBounds=function(j){if(this.dirty){this.updateText()}return s.prototype.getBounds.call(this,j)};q.prototype.destroy=function(j){this.context=null;this.canvas=null;this._style=null;this._texture.destroy(j===undefined?true:j)}},{"../const":13,"../math":23,"../sprites/Sprite":57,"../textures/Texture":62,"../utils":67}],60:[function(d,c,m){var n=d("../utils"),o=d("../const"),b=d("eventemitter3");function a(k,l,j){b.call(this);this.uid=n.uid();this.resolution=j||1;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=l||o.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=false;this._glTextures=[];if(k){this.loadSource(k)}}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=n.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};a.prototype.loadSource=function(k){var l=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(l&&this.source){this.source.onload=null;this.source.onerror=null}this.source=k;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else{if(!k.getContext){this.isLoading=true;var j=this;k.onload=function(){k.onload=null;k.onerror=null;if(!j.isLoading){return}j.isLoading=false;j._sourceLoaded();j.emit("loaded",j)};k.onerror=function(){k.onload=null;k.onerror=null;if(!j.isLoading){return}j.isLoading=false;j.emit("error",j)};if(k.complete&&k.src){this.isLoading=false;k.onload=null;k.onerror=null;if(k.width&&k.height){this._sourceLoaded();if(l){this.emit("loaded",this)}}else{if(l){this.emit("error",this)}}}}}};a.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};a.prototype.destroy=function(){if(this.imageUrl){delete n.BaseTextureCache[this.imageUrl];delete n.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else{if(this.source&&this.source._pixiId){delete n.BaseTextureCache[this.source._pixiId]}}this.source=null;this.dispose()};a.prototype.dispose=function(){this.emit("dispose",this);this._glTextures.length=0};a.prototype.updateSourceImage=function(j){this.source.src=j;this.loadSource(this.source)};a.fromImage=function(s,j,r){var l=n.BaseTextureCache[s];if(j===undefined&&s.indexOf("data:")!==0){j=true}if(!l){var k=new Image();if(j){k.crossOrigin=""}l=new a(k,r);l.imageUrl=s;k.src=s;n.BaseTextureCache[s]=l;l.resolution=n.getResolutionOfUrl(s)}return l};a.fromCanvas=function(j,l){if(!j._pixiId){j._pixiId="canvas_"+n.uid()}var k=n.BaseTextureCache[j._pixiId];if(!k){k=new a(j,l);n.BaseTextureCache[j._pixiId]=k}return k}},{"../const":13,"../utils":67,eventemitter3:10}],61:[function(w,x,u){var s=w("./BaseTexture"),v=w("./Texture"),y=w("../renderers/webgl/utils/RenderTarget"),r=w("../renderers/webgl/managers/FilterManager"),c=w("../renderers/canvas/utils/CanvasBuffer"),b=w("../math"),a=w("../const"),d=new b.Matrix();function t(k,m,p,n,o){if(!k){throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.")}m=m||100;p=p||100;o=o||a.RESOLUTION;var l=new s();l.width=m;l.height=p;l.resolution=o;l.scaleMode=n||a.SCALE_MODES.DEFAULT;l.hasLoaded=true;v.call(this,l,new b.Rectangle(0,0,m,p));this.width=m;this.height=p;this.resolution=o;this.render=null;this.renderer=k;if(this.renderer.type===a.RENDERER_TYPE.WEBGL){var j=this.renderer.gl;this.textureBuffer=new y(j,this.width,this.height,l.scaleMode,this.resolution);this.baseTexture._glTextures[j.id]=this.textureBuffer.texture;this.filterManager=new r(this.renderer);this.filterManager.onContextChange();this.filterManager.resize(m,p);this.render=this.renderWebGL;this.renderer.currentRenderer.start();this.renderer.currentRenderTarget.activate()}else{this.render=this.renderCanvas;this.textureBuffer=new c(this.width*this.resolution,this.height*this.resolution);this.baseTexture.source=this.textureBuffer.canvas}this.valid=true;this._updateUvs()}t.prototype=Object.create(v.prototype);t.prototype.constructor=t;x.exports=t;t.prototype.resize=function(j,l,k){if(j===this.width&&l===this.height){return}this.valid=(j>0&&l>0);this.width=this._frame.width=this.crop.width=j;this.height=this._frame.height=this.crop.height=l;if(k){this.baseTexture.width=this.width;this.baseTexture.height=this.height}if(!this.valid){return}this.textureBuffer.resize(this.width,this.height);if(this.filterManager){this.filterManager.resize(this.width,this.height)}};t.prototype.clear=function(){if(!this.valid){return}if(this.renderer.type===a.RENDERER_TYPE.WEBGL){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer)}this.textureBuffer.clear()};t.prototype.renderWebGL=function(q,n,p,j){if(!this.valid){return}j=(j!==undefined)?j:true;this.textureBuffer.transform=n;this.textureBuffer.activate();q.worldAlpha=1;if(j){q.worldTransform.identity();q.currentBounds=null;var k=q.children;var l,m;for(l=0,m=k.length;l<m;++l){k[l].updateTransform()}}var o=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(q,this.textureBuffer,p);this.renderer.filterManager=o};t.prototype.renderCanvas=function(m,k,o,C){if(!this.valid){return}C=!!C;var n=d;n.identity();if(k){n.append(k)}m.worldTransform=n;var E=m.worldTransform;m.worldAlpha=1;var D=m.children;var p,q;for(p=0,q=D.length;p<q;++p){D[p].updateTransform()}if(o){this.textureBuffer.clear()}var j=this.textureBuffer.context;var l=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(m,j);this.renderer.resolution=l;m.worldTransform=E};t.prototype.destroy=function(){v.prototype.destroy.call(this,true);this.textureBuffer.destroy();if(this.filterManager){this.filterManager.destroy()}this.renderer=null};t.prototype.getImage=function(){var j=new Image();j.src=this.getBase64();return j};t.prototype.getBase64=function(){return this.getCanvas().toDataURL()};t.prototype.getCanvas=function(){if(this.renderer.type===a.RENDERER_TYPE.WEBGL){var j=this.renderer.gl;var l=this.textureBuffer.size.width;var o=this.textureBuffer.size.height;var n=new Uint8Array(4*l*o);j.bindFramebuffer(j.FRAMEBUFFER,this.textureBuffer.frameBuffer);j.readPixels(0,0,l,o,j.RGBA,j.UNSIGNED_BYTE,n);j.bindFramebuffer(j.FRAMEBUFFER,null);var k=new c(l,o);var m=k.context.getImageData(0,0,l,o);m.data.set(n);k.context.putImageData(m,0,0);return k.canvas}else{return this.textureBuffer.canvas}};t.prototype.getPixels=function(){var k,m;if(this.renderer.type===a.RENDERER_TYPE.WEBGL){var j=this.renderer.gl;k=this.textureBuffer.size.width;m=this.textureBuffer.size.height;var l=new Uint8Array(4*k*m);j.bindFramebuffer(j.FRAMEBUFFER,this.textureBuffer.frameBuffer);j.readPixels(0,0,k,m,j.RGBA,j.UNSIGNED_BYTE,l);j.bindFramebuffer(j.FRAMEBUFFER,null);return l}else{k=this.textureBuffer.canvas.width;m=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,k,m).data}};t.prototype.getPixel=function(m,j){if(this.renderer.type===a.RENDERER_TYPE.WEBGL){var k=this.renderer.gl;var l=new Uint8Array(4);k.bindFramebuffer(k.FRAMEBUFFER,this.textureBuffer.frameBuffer);k.readPixels(m,j,1,1,k.RGBA,k.UNSIGNED_BYTE,l);k.bindFramebuffer(k.FRAMEBUFFER,null);return l}else{return this.textureBuffer.canvas.getContext("2d").getImageData(m,j,1,1).data}}},{"../const":13,"../math":23,"../renderers/canvas/utils/CanvasBuffer":35,"../renderers/webgl/managers/FilterManager":44,"../renderers/webgl/utils/RenderTarget":55,"./BaseTexture":60,"./Texture":62}],62:[function(t,u,r){var q=t("./BaseTexture"),b=t("./VideoBaseTexture"),p=t("./TextureUvs"),a=t("eventemitter3"),d=t("../math"),c=t("../utils");function s(k,j,l,n,m){a.call(this);this.noFrame=false;if(!j){this.noFrame=true;j=new d.Rectangle(0,0,1,1)}if(k instanceof s){k=k.baseTexture}this.baseTexture=k;this._frame=j;this.trim=n;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.width=0;this.height=0;this.crop=l||j;this.rotate=!!m;if(k.hasLoaded){if(this.noFrame){j=new d.Rectangle(0,0,k.width,k.height);k.on("update",this.onBaseTextureUpdated,this)}this.frame=j}else{k.once("loaded",this.onBaseTextureLoaded,this)}}s.prototype=Object.create(a.prototype);s.prototype.constructor=s;u.exports=s;Object.defineProperties(s.prototype,{frame:{get:function(){return this._frame},set:function(j){this._frame=j;this.noFrame=false;this.width=j.width;this.height=j.height;if(!this.trim&&!this.rotate&&(j.x+j.width>this.baseTexture.width||j.y+j.height>this.baseTexture.height)){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=j&&j.width&&j.height&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this._frame.width=this.trim.width;this._frame.height=this.trim.height}else{this.crop=j}if(this.valid){this._updateUvs()}}}});s.prototype.update=function(){this.baseTexture.update()};s.prototype.onBaseTextureLoaded=function(j){if(this.noFrame){this.frame=new d.Rectangle(0,0,j.width,j.height)}else{this.frame=this._frame}this.emit("update",this)};s.prototype.onBaseTextureUpdated=function(j){this._frame.width=j.width;this._frame.height=j.height;this.emit("update",this)};s.prototype.destroy=function(j){if(this.baseTexture){if(j){this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.crop=null;this.valid=false;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};s.prototype.clone=function(){return new s(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};s.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new p()}this._uvs.set(this.crop,this.baseTexture,this.rotate)};s.fromImage=function(l,m,k){var j=c.TextureCache[l];if(!j){j=new s(q.fromImage(l,m,k));c.TextureCache[l]=j}return j};s.fromFrame=function(j){var k=c.TextureCache[j];if(!k){throw new Error('The frameId "'+j+'" does not exist in the texture cache')}return k};s.fromCanvas=function(k,j){return new s(q.fromCanvas(k,j))};s.fromVideo=function(j,k){if(typeof j==="string"){return s.fromVideoUrl(j,k)}else{return new s(b.fromVideo(j,k))}};s.fromVideoUrl=function(j,k){return new s(b.fromUrl(j,k))};s.addTextureToCache=function(k,j){c.TextureCache[j]=k};s.removeTextureFromCache=function(j){var k=c.TextureCache[j];delete c.TextureCache[j];delete c.BaseTextureCache[j];return k};s.EMPTY=new s(new q())},{"../math":23,"../utils":67,"./BaseTexture":60,"./TextureUvs":63,"./VideoBaseTexture":64,eventemitter3:10}],63:[function(c,b,d){function a(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1}b.exports=a;a.prototype.set=function(s,o,q){var r=o.width;var p=o.height;if(q){this.x0=(s.x+s.height)/r;this.y0=s.y/p;this.x1=(s.x+s.height)/r;this.y1=(s.y+s.width)/p;this.x2=s.x/r;this.y2=(s.y+s.width)/p;this.x3=s.x/r;this.y3=s.y/p}else{this.x0=s.x/r;this.y0=s.y/p;this.x1=(s.x+s.width)/r;this.y1=s.y/p;this.x2=(s.x+s.width)/r;this.y2=(s.y+s.height)/p;this.x3=s.x/r;this.y3=(s.y+s.height)/p}}},{}],64:[function(d,c,m){var a=d("./BaseTexture"),n=d("../utils");function o(k,j){if(!k){throw new Error("No video source element specified.")}if(k.readyState===k.HAVE_ENOUGH_DATA&&k.width&&k.height){k.complete=true}a.call(this,k,j);this.autoUpdate=false;this._onUpdate=this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);if(!k.complete){k.addEventListener("canplaythrough",this._onCanPlay);k.addEventListener("play",this._onPlayStart.bind(this));k.addEventListener("pause",this._onPlayStop.bind(this))}this.__loaded=false}o.prototype=Object.create(a.prototype);o.prototype.constructor=o;c.exports=o;o.prototype._onUpdate=function(){if(this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.update()}};o.prototype._onPlayStart=function(){if(!this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.autoUpdate=true}};o.prototype._onPlayStop=function(){this.autoUpdate=false};o.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;this.source.play();if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};o.prototype.destroy=function(){if(this.source&&this.source._pixiId){delete n.BaseTextureCache[this.source._pixiId];delete this.source._pixiId}a.prototype.destroy.call(this)};o.fromVideo=function(k,j){if(!k._pixiId){k._pixiId="video_"+n.uid()}var l=n.BaseTextureCache[k._pixiId];if(!l){l=new o(k,j);n.BaseTextureCache[k._pixiId]=l}return l};o.fromUrl=function(j,l){var k=document.createElement("video");if(Array.isArray(j)){for(var q=0;q<j.length;++q){k.appendChild(b(j[q].src||j[q],j[q].mime))}}else{k.appendChild(b(j.src||j,j.mime))}k.load();k.play();return o.fromVideo(k,l)};o.fromUrls=o.fromUrl;function b(k,j){if(!j){j="video/"+k.substr(k.lastIndexOf(".")+1)}var l=document.createElement("source");l.src=k;l.type=j;return l}},{"../utils":67,"./BaseTexture":60}],65:[function(y,A,v){var E=y("../const"),F=y("eventemitter3"),w="tick";function D(){var j=this;this._tick=function k(l){j._requestId=null;if(j.started){j.update(l);if(j.started&&j._requestId===null&&j._emitter.listeners(w,true)){j._requestId=requestAnimationFrame(j._tick)}}};this._emitter=new F();this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/E.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=false}Object.defineProperties(D.prototype,{FPS:{get:function(){return 1000/this.elapsedMS}},minFPS:{get:function(){return 1000/this._maxElapsedMS},set:function(k){var j=Math.min(Math.max(0,k)/1000,E.TARGET_FPMS);this._maxElapsedMS=1/j}}});D.prototype._requestIfNeeded=function G(){if(this._requestId===null&&this._emitter.listeners(w,true)){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};D.prototype._cancelIfNeeded=function z(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};D.prototype._startIfPossible=function a(){if(this.started){this._requestIfNeeded()}else{if(this.autoStart){this.start()}}};D.prototype.add=function b(j,k){this._emitter.on(w,j,k);this._startIfPossible();return this};D.prototype.addOnce=function C(j,k){this._emitter.once(w,j,k);this._startIfPossible();return this};D.prototype.remove=function d(j,k){this._emitter.off(w,j,k);if(!this._emitter.listeners(w,true)){this._cancelIfNeeded()}return this};D.prototype.start=function B(){if(!this.started){this.started=true;this._requestIfNeeded()}};D.prototype.stop=function c(){if(this.started){this.started=false;this._cancelIfNeeded()}};D.prototype.update=function x(j){var k;j=j||performance.now();k=this.elapsedMS=j-this.lastTime;if(k>this._maxElapsedMS){k=this._maxElapsedMS}this.deltaTime=k*E.TARGET_FPMS*this.speed;this._emitter.emit(w,this.deltaTime);this.lastTime=j};A.exports=D},{"../const":13,eventemitter3:10}],66:[function(d,c,k){var a=d("./Ticker");var b=new a();b.autoStart=true;c.exports={shared:b,Ticker:a}},{"./Ticker":65}],67:[function(b,a,c){var k=b("../const");var d=a.exports={_uid:0,_saidHello:false,EventEmitter:b("eventemitter3"),pluginTarget:b("./pluginTarget"),async:b("async"),uid:function(){return ++d._uid},hex2rgb:function(j,m){m=m||[];m[0]=(j>>16&255)/255;m[1]=(j>>8&255)/255;m[2]=(j&255)/255;return m},hex2string:function(j){j=j.toString(16);j="000000".substr(0,6-j.length)+j;return"#"+j},rgb2hex:function(j){return((j[0]*255<<16)+(j[1]*255<<8)+j[2]*255)},canUseNewCanvasBlendModes:function(){if(typeof document==="undefined"){return false}var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var u="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var s=new Image();s.src=r+"AP804Oa6"+u;var t=new Image();t.src=r+"/wCKxvRF"+u;var j=document.createElement("canvas");j.width=6;j.height=1;var w=j.getContext("2d");w.globalCompositeOperation="multiply";w.drawImage(s,0,0);w.drawImage(t,2,0);var v=w.getImageData(2,0,1,1).data;return(v[0]===255&&v[1]===0&&v[2]===0)},getNextPowerOfTwo:function(j){if(j>0&&(j&(j-1))===0){return j}else{var m=1;while(m<j){m<<=1}return m}},isPowerOfTwo:function(j,m){return(j>0&&(j&(j-1))===0&&m>0&&(m&(m-1))===0)},getResolutionOfUrl:function(j){var m=k.RETINA_PREFIX.exec(j);if(m){return parseFloat(m[1])}return 1},sayHello:function(j){if(d._saidHello){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var m=["\n %c %c %c Pixi.js "+k.VERSION+" -  "+j+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];console.log.apply(console,m)}else{if(console){}}d._saidHello=true},isWebGLSupported:function(){var p={stencil:true};try{if(!window.WebGLRenderingContext){return false}var o=document.createElement("canvas"),q=o.getContext("webgl",p)||o.getContext("experimental-webgl",p);return !!(q&&q.getContextAttributes().stencil)}catch(j){return false}},sign:function(j){return j?(j<0?-1:1):0},TextureCache:{},BaseTextureCache:{}}},{"../const":13,"./pluginTarget":68,async:1,eventemitter3:10}],68:[function(b,a,c){function k(j){j.__plugins={};j.registerPlugin=function(n,o){j.__plugins[n]=o};j.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var m in j.__plugins){this.plugins[m]=new (j.__plugins[m])(this)}};j.prototype.destroyPlugins=function(){for(var m in this.plugins){this.plugins[m].destroy();this.plugins[m]=null}this.plugins=null}}a.exports={mixin:function d(j){k(j)}}},{}],69:[function(m,d,n){var o=m("./core"),a=m("./mesh"),c=m("./extras"),b=m("./filters");o.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")};o.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")};Object.defineProperties(o,{Stage:{get:function(){return o.Container}},DisplayObjectContainer:{get:function(){return o.Container}},Strip:{get:function(){return a.Mesh}},Rope:{get:function(){return a.Rope}},MovieClip:{get:function(){return c.MovieClip}},TilingSprite:{get:function(){return c.TilingSprite}},BitmapText:{get:function(){return c.BitmapText}},blendModes:{get:function(){return o.BLEND_MODES}},scaleModes:{get:function(){return o.SCALE_MODES}},BaseTextureCache:{get:function(){return o.utils.BaseTextureCache}},TextureCache:{get:function(){return o.utils.TextureCache}},math:{get:function(){return o}}});o.Sprite.prototype.setTexture=function(j){this.texture=j};c.BitmapText.prototype.setText=function(j){this.text=j};o.Text.prototype.setText=function(j){this.text=j};o.Text.prototype.setStyle=function(j){this.style=j};o.Texture.prototype.setFrame=function(j){this.frame=j};Object.defineProperties(b,{AbstractFilter:{get:function(){return o.AbstractFilter}},FXAAFilter:{get:function(){return o.FXAAFilter}},SpriteMaskFilter:{get:function(){return o.SpriteMaskFilter}}});o.utils.uuid=function(){return o.utils.uid()}},{"./core":20,"./extras":76,"./filters":93,"./mesh":117}],70:[function(c,b,d){var k=c("../core");function a(j,m){k.Container.call(this);m=m||{};this.textWidth=0;this.textHeight=0;this._glyphs=[];this._font={tint:m.tint!==undefined?m.tint:16777215,align:m.align||"left",name:null,size:0};this.font=m.font;this._text=j;this.maxWidth=0;this.maxLineHeight=0;this.dirty=false;this.updateText()}a.prototype=Object.create(k.Container.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{tint:{get:function(){return this._font.tint},set:function(j){this._font.tint=(typeof j==="number"&&j>=0)?j:16777215;this.dirty=true}},align:{get:function(){return this._font.align},set:function(j){this._font.align=j||"left";this.dirty=true}},font:{get:function(){return this._font},set:function(j){if(!j){return}if(typeof j==="string"){j=j.split(" ");this._font.name=j.length===1?j[0]:j.slice(1).join(" ");this._font.size=j.length>=2?parseInt(j[0],10):a.fonts[this._font.name].size}else{this._font.name=j.name;this._font.size=typeof j.size==="number"?j.size:parseInt(j.size,10)}this.dirty=true}},text:{get:function(){return this._text},set:function(j){j=j.toString()||" ";if(this._text===j){return}this._text=j;this.dirty=true}}});a.prototype.updateText=function(){var j=a.fonts[this._font.name];var R=new k.Point();var Q=null;var H=[];var J=0;var G=0;var K=[];var L=0;var P=this._font.size/j.size;var N=-1;var I=0;for(var E=0;E<this.text.length;E++){var T=this.text.charCodeAt(E);N=/(\s)/.test(this.text.charAt(E))?E:N;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(E))){K.push(J);G=Math.max(G,J);L++;R.x=0;R.y+=j.lineHeight;Q=null;continue}if(N!==-1&&this.maxWidth>0&&R.x*P>this.maxWidth){H.splice(N,E-N);E=N;N=-1;K.push(J);G=Math.max(G,J);L++;R.x=0;R.y+=j.lineHeight;Q=null;continue}var U=j.chars[T];if(!U){continue}if(Q&&U.kerning[Q]){R.x+=U.kerning[Q]}H.push({texture:U.texture,line:L,charCode:T,position:new k.Point(R.x+U.xOffset,R.y+U.yOffset)});R.x+=U.xAdvance;J=R.x;I=Math.max(I,(U.yOffset+U.texture.height));Q=T}K.push(J);G=Math.max(G,J);var F=[];for(E=0;E<=L;E++){var M=0;if(this._font.align==="right"){M=G-K[E]}else{if(this._font.align==="center"){M=(G-K[E])/2}}F.push(M)}var S=H.length;var O=this.tint;for(E=0;E<S;E++){var D=this._glyphs[E];if(D){D.texture=H[E].texture}else{D=new k.Sprite(H[E].texture);this._glyphs.push(D)}D.position.x=(H[E].position.x+F[H[E].line])*P;D.position.y=H[E].position.y*P;D.scale.x=D.scale.y=P;D.tint=O;if(!D.parent){this.addChild(D)}}for(E=S;E<this._glyphs.length;++E){this.removeChild(this._glyphs[E])}this.textWidth=G*P;this.textHeight=(R.y+j.lineHeight)*P;this.maxLineHeight=I*P};a.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};a.prototype.getLocalBounds=function(){this.validate();return k.Container.prototype.getLocalBounds.call(this)};a.prototype.validate=function(){if(this.dirty){this.updateText();this.dirty=false}};a.fonts={}},{"../core":20}],71:[function(c,b,d){var k=c("../core");function a(j){k.Sprite.call(this,j[0] instanceof k.Texture?j[0]:j[0].texture);this._textures=null;this._durations=null;this.textures=j;this.animationSpeed=1;this.loop=true;this.onComplete=null;this._currentTime=0;this.playing=false}a.prototype=Object.create(k.Sprite.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(j){if(j[0] instanceof k.Texture){this._textures=j;this._durations=null}else{this._textures=[];this._durations=[];for(var m=0;m<j.length;m++){this._textures.push(j[m].texture);this._durations.push(j[m].time)}}}},currentFrame:{get:function(){var j=Math.floor(this._currentTime)%this._textures.length;if(j<0){j+=this._textures.length}return j}}});a.prototype.stop=function(){if(!this.playing){return}this.playing=false;k.ticker.shared.remove(this.update,this)};a.prototype.play=function(){if(this.playing){return}this.playing=true;k.ticker.shared.add(this.update,this)};a.prototype.gotoAndStop=function(j){this.stop();this._currentTime=j;this._texture=this._textures[this.currentFrame]};a.prototype.gotoAndPlay=function(j){this._currentTime=j;this.play()};a.prototype.update=function(j){var o=this.animationSpeed*j;if(this._durations!==null){var q=this._currentTime%1*this._durations[this.currentFrame];q+=o/60*1000;while(q<0){this._currentTime--;q+=this._durations[this.currentFrame]}var p=Math.sign(this.animationSpeed*j);this._currentTime=Math.floor(this._currentTime);while(q>=this._durations[this.currentFrame]){q-=this._durations[this.currentFrame]*p;this._currentTime+=p}this._currentTime+=q/this._durations[this.currentFrame]}else{this._currentTime+=o}if(this._currentTime<0&&!this.loop){this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}else{if(this._currentTime>=this._textures.length&&!this.loop){this.gotoAndStop(this._textures.length-1);if(this.onComplete){this.onComplete()}}else{this._texture=this._textures[this.currentFrame]}}};a.prototype.destroy=function(){this.stop();k.Sprite.prototype.destroy.call(this)};a.fromFrames=function(j){var o=[];for(var n=0;n<j.length;++n){o.push(new k.Texture.fromFrame(j[n]))}return new a(o)};a.fromImages=function(n){var o=[];for(var j=0;j<n.length;++j){o.push(new k.Texture.fromImage(n[j]))}return new a(o)}},{"../core":20}],72:[function(m,d,n){var o=m("../core"),b=new o.Point(),a=m("../core/renderers/canvas/utils/CanvasTinter");function c(k,l,j){o.Sprite.call(this,k);this.tileScale=new o.Point(1,1);this.tilePosition=new o.Point(0,0);this._width=l||100;this._height=j||100;this._uvs=new o.TextureUvs();this._canvasPattern=null;this.shader=new o.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}c.prototype=Object.create(o.Sprite.prototype);c.prototype.constructor=c;d.exports=c;Object.defineProperties(c.prototype,{width:{get:function(){return this._width},set:function(j){this._width=j}},height:{get:function(){return this._height},set:function(j){this._height=j}}});c.prototype._onTextureUpdate=function(){return};c.prototype._renderWebGL=function(l){var t=this._texture;if(!t||!t._uvs){return}var k=t._uvs,v=t._frame.width,w=t._frame.height,j=t.baseTexture.width,u=t.baseTexture.height;t._uvs=this._uvs;t._frame.width=this.width;t._frame.height=this.height;this.shader.uniforms.uPixelSize.value[0]=1/j;this.shader.uniforms.uPixelSize.value[1]=1/u;this.shader.uniforms.uFrame.value[0]=k.x0;this.shader.uniforms.uFrame.value[1]=k.y0;this.shader.uniforms.uFrame.value[2]=k.x1-k.x0;this.shader.uniforms.uFrame.value[3]=k.y2-k.y0;this.shader.uniforms.uTransform.value[0]=(this.tilePosition.x%(v*this.tileScale.x))/this._width;this.shader.uniforms.uTransform.value[1]=(this.tilePosition.y%(w*this.tileScale.y))/this._height;this.shader.uniforms.uTransform.value[2]=(j/this._width)*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=(u/this._height)*this.tileScale.y;l.setObjectRenderer(l.plugins.sprite);l.plugins.sprite.render(this);t._uvs=k;t._frame.width=v;t._frame.height=w};c.prototype._renderCanvas=function(B){var A=this._texture;if(!A.baseTexture.hasLoaded){return}var l=B.context,k=this.worldTransform,j=B.resolution,x=A.baseTexture,w=(this.tilePosition.x/this.tileScale.x)%A._frame.width,y=(this.tilePosition.y/this.tileScale.y)%A._frame.height;if(!this._canvasPattern){var z=new o.CanvasBuffer(A._frame.width,A._frame.height);if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=a.getTintedTexture(this,this.tint)}z.context.drawImage(this.tintedTexture,0,0)}else{z.context.drawImage(x.source,-A._frame.x,-A._frame.y)}this._canvasPattern=z.context.createPattern(z.canvas,"repeat")}l.globalAlpha=this.worldAlpha;l.setTransform(k.a*j,k.b*j,k.c*j,k.d*j,k.tx*j,k.ty*j);l.scale(this.tileScale.x,this.tileScale.y);l.translate(w+(this.anchor.x*-this._width),y+(this.anchor.y*-this._height));var C=B.blendModes[this.blendMode];if(C!==B.context.globalCompositeOperation){l.globalCompositeOperation=C}l.fillStyle=this._canvasPattern;l.fillRect(-w,-y,this._width/this.tileScale.x,this._height/this.tileScale.y)};c.prototype.getBounds=function(){var R=this._width;var T=this._height;var V=R*(1-this.anchor.x);var X=R*-this.anchor.x;var Z=T*(1-this.anchor.y);var ab=T*-this.anchor.y;var P=this.worldTransform;var l=P.a;var O=P.b;var Q=P.c;var U=P.d;var j=P.tx;var N=P.ty;var ad=l*X+Q*ab+j;var af=U*ab+O*X+N;var ae=l*V+Q*ab+j;var ag=U*ab+O*V+N;var k=l*V+Q*Z+j;var ah=U*Z+O*V+N;var M=l*X+Q*Z+j;var ai=U*Z+O*X+N;var S,W,Y,aa;S=ad;S=ae<S?ae:S;S=k<S?k:S;S=M<S?M:S;Y=af;Y=ag<Y?ag:Y;Y=ah<Y?ah:Y;Y=ai<Y?ai:Y;W=ad;W=ae>W?ae:W;W=k>W?k:W;W=M>W?M:W;aa=af;aa=ag>aa?ag:aa;aa=ah>aa?ah:aa;aa=ai>aa?ai:aa;var ac=this._bounds;ac.x=S;ac.width=W-S;ac.y=Y;ac.height=aa-Y;this._currentBounds=ac;return ac};c.prototype.containsPoint=function(s){this.worldTransform.applyInverse(s,b);var k=this._width;var j=this._height;var r=-k*this.anchor.x;var l;if(b.x>r&&b.x<r+k){l=-j*this.anchor.y;if(b.y>l&&b.y<l+j){return true}}return false};c.prototype.destroy=function(){o.Sprite.prototype.destroy.call(this);this.tileScale=null;this._tileScaleOffset=null;this.tilePosition=null;this._uvs=null};c.fromFrame=function(k,q,j){var l=o.utils.TextureCache[k];if(!l){throw new Error('The frameId "'+k+'" does not exist in the texture cache '+this)}return new c(l,q,j)};c.fromImage=function(r,k,j,s,l){return new c(o.Texture.fromImage(r,s,l),k,j)}},{"../core":20,"../core/renderers/canvas/utils/CanvasTinter":38}],73:[function(b,a,c){var l=b("../core"),d=l.DisplayObject,m=new l.Matrix();d.prototype._cacheAsBitmap=false;d.prototype._originalRenderWebGL=null;d.prototype._originalRenderCanvas=null;d.prototype._originalUpdateTransform=null;d.prototype._originalHitTest=null;d.prototype._originalDestroy=null;d.prototype._cachedSprite=null;Object.defineProperties(d.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(j){if(this._cacheAsBitmap===j){return}this._cacheAsBitmap=j;if(j){this._originalRenderWebGL=this.renderWebGL;this._originalRenderCanvas=this.renderCanvas;this._originalUpdateTransform=this.updateTransform;this._originalGetBounds=this.getBounds;this._originalDestroy=this.destroy;this._originalContainsPoint=this.containsPoint;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{if(this._cachedSprite){this._destroyCachedDisplayObject()}this.renderWebGL=this._originalRenderWebGL;this.renderCanvas=this._originalRenderCanvas;this.getBounds=this._originalGetBounds;this.destroy=this._originalDestroy;this.updateTransform=this._originalUpdateTransform;this.containsPoint=this._originalContainsPoint}}}});d.prototype._renderCachedWebGL=function(j){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(j);this._cachedSprite.worldAlpha=this.worldAlpha;j.setObjectRenderer(j.plugins.sprite);j.plugins.sprite.render(this._cachedSprite)};d.prototype._initCachedDisplayObject=function(t){if(this._cachedSprite){return}t.currentRenderer.flush();var u=this.getLocalBounds().clone();if(this._filters){var k=this._filters[0].padding;u.x-=k;u.y-=k;u.width+=k*2;u.height+=k*2}var v=t.currentRenderTarget;var x=t.filterManager.filterStack;var w=new l.RenderTexture(t,u.width|0,u.height|0);var j=m;j.tx=-u.x;j.ty=-u.y;this.renderWebGL=this._originalRenderWebGL;w.render(this,j,true,true);t.setRenderTarget(v);t.filterManager.filterStack=x;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new l.Sprite(w);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(u.x/u.width);this._cachedSprite.anchor.y=-(u.y/u.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};d.prototype._renderCachedCanvas=function(j){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(j);this._cachedSprite.worldAlpha=this.worldAlpha;this._cachedSprite.renderCanvas(j)};d.prototype._initCachedDisplayObjectCanvas=function(k){if(this._cachedSprite){return}var r=this.getLocalBounds();var s=k.context;var t=new l.RenderTexture(k,r.width|0,r.height|0);var j=m;j.tx=-r.x;j.ty=-r.y;this.renderCanvas=this._originalRenderCanvas;t.render(this,j,true);k.context=s;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new l.Sprite(t);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(r.x/r.width);this._cachedSprite.anchor.y=-(r.y/r.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};d.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};d.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null};d.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=false;this._originalDestroy()}},{"../core":20}],74:[function(b,a,c){var d=b("../core");d.DisplayObject.prototype.name=null;d.Container.prototype.getChildByName=function(m){for(var l=0;l<this.children.length;l++){if(this.children[l].name===m){return this.children[l]}}return null}},{"../core":20}],75:[function(b,a,c){var d=b("../core");d.DisplayObject.prototype.getGlobalPosition=function(k){k=k||new d.Point();if(this.parent){this.displayObjectUpdateTransform();k.x=this.worldTransform.tx;k.y=this.worldTransform.ty}else{k.x=this.position.x;k.y=this.position.y}return k}},{"../core":20}],76:[function(b,a,c){b("./cacheAsBitmap");b("./getChildByName");b("./getGlobalPosition");a.exports={MovieClip:b("./MovieClip"),TilingSprite:b("./TilingSprite"),BitmapText:b("./BitmapText")}},{"./BitmapText":70,"./MovieClip":71,"./TilingSprite":72,"./cacheAsBitmap":73,"./getChildByName":74,"./getGlobalPosition":75}],77:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(j){this.uniforms.pixelSize.value=j}}})},{"../../core":20}],78:[function(m,d,n){var o=m("../../core"),b=m("../blur/BlurXFilter"),a=m("../blur/BlurYFilter");function c(){o.AbstractFilter.call(this);this.blurXFilter=new b();this.blurYFilter=new a();this.defaultFilter=new o.AbstractFilter()}c.prototype=Object.create(o.AbstractFilter.prototype);c.prototype.constructor=c;d.exports=c;c.prototype.applyFilter=function(k,q,j){var l=k.filterManager.getRenderTarget(true);this.defaultFilter.applyFilter(k,q,j);this.blurXFilter.applyFilter(k,q,l);k.blendModeManager.setBlendMode(o.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(k,l,j);k.blendModeManager.setBlendMode(o.BLEND_MODES.NORMAL);k.filterManager.returnRenderTarget(l)};Object.defineProperties(c.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(j){this.blurXFilter.blur=this.blurYFilter.blur=j}},blurX:{get:function(){return this.blurXFilter.blur},set:function(j){this.blurXFilter.blur=j}},blurY:{get:function(){return this.blurYFilter.blur},set:function(j){this.blurYFilter.blur=j}}})},{"../../core":20,"../blur/BlurXFilter":81,"../blur/BlurYFilter":82}],79:[function(c,b,d){var k=c("../../core");function a(j,m){k.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:j||0},dirY:{type:"1f",value:m||0}});this.defaultFilter=new k.AbstractFilter();this.passes=1;this.dirX=j||0;this.dirY=m||0;this.strength=4}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;a.prototype.applyFilter=function(t,j,r,s){var v=this.getShader(t);this.uniforms.strength.value=this.strength/4/this.passes*(j.frame.width/j.size.width);if(this.passes===1){t.filterManager.applyFilter(v,j,r,s)}else{var u=t.filterManager.getRenderTarget(true);t.filterManager.applyFilter(v,j,u,s);for(var w=0;w<this.passes-2;w++){t.filterManager.applyFilter(v,u,u,s)}t.filterManager.applyFilter(v,u,r,s);t.filterManager.returnRenderTarget(u)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=j*0.5;this.strength=j}},dirX:{get:function(){return this.dirX},set:function(j){this.uniforms.dirX.value=j}},dirY:{get:function(){return this.dirY},set:function(j){this.uniforms.dirY.value=j}}})},{"../../core":20}],80:[function(m,d,n){var o=m("../../core"),c=m("./BlurXFilter"),a=m("./BlurYFilter");function b(){o.AbstractFilter.call(this);this.blurXFilter=new c();this.blurYFilter=new a()}b.prototype=Object.create(o.AbstractFilter.prototype);b.prototype.constructor=b;d.exports=b;b.prototype.applyFilter=function(k,q,j){var l=k.filterManager.getRenderTarget(true);this.blurXFilter.applyFilter(k,q,l);this.blurYFilter.applyFilter(k,l,j);k.filterManager.returnRenderTarget(l)};Object.defineProperties(b.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(j){this.padding=Math.abs(j)*0.5;this.blurXFilter.blur=this.blurYFilter.blur=j}},passes:{get:function(){return this.blurXFilter.passes},set:function(j){this.blurXFilter.passes=this.blurYFilter.passes=j}},blurX:{get:function(){return this.blurXFilter.blur},set:function(j){this.blurXFilter.blur=j}},blurY:{get:function(){return this.blurYFilter.blur},set:function(j){this.blurYFilter.blur=j}}})},{"../../core":20,"./BlurXFilter":81,"./BlurYFilter":82}],81:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;a.prototype.applyFilter=function(j,C,A,v){var u=this.getShader(j);this.uniforms.strength.value=this.strength/4/this.passes*(C.frame.width/C.size.width);if(this.passes===1){j.filterManager.applyFilter(u,C,A,v)}else{var w=j.filterManager.getRenderTarget(true);var x=C;var z=w;for(var y=0;y<this.passes-1;y++){j.filterManager.applyFilter(u,x,z,true);var B=z;z=x;x=B}j.filterManager.applyFilter(u,x,A,v);j.filterManager.returnRenderTarget(w)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=Math.abs(j)*0.5;this.strength=j}}})},{"../../core":20}],82:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;a.prototype.applyFilter=function(j,C,A,v){var u=this.getShader(j);this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(C.frame.height/C.size.height);if(this.passes===1){j.filterManager.applyFilter(u,C,A,v)}else{var w=j.filterManager.getRenderTarget(true);var x=C;var z=w;for(var y=0;y<this.passes-1;y++){j.filterManager.applyFilter(u,x,z,true);var B=z;z=x;x=B}j.filterManager.applyFilter(u,x,A,v);j.filterManager.returnRenderTarget(w)}};Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=Math.abs(j)*0.5;this.strength=j}}})},{"../../core":20}],83:[function(b,a,c){var d=b("../../core");function k(){d.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:0.1,y:0}}})}k.prototype=Object.create(d.AbstractFilter.prototype);k.prototype.constructor=k;a.exports=k},{"../../core":20}],84:[function(c,a,d){var k=c("../../core");function b(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}b.prototype=Object.create(k.AbstractFilter.prototype);b.prototype.constructor=b;a.exports=b;b.prototype._loadMatrix=function(n,o){o=!!o;var j=n;if(o){this._multiply(j,this.uniforms.m.value,n);j=this._colorMatrix(j)}this.uniforms.m.value=j};b.prototype._multiply=function(j,n,o){j[0]=(n[0]*o[0])+(n[1]*o[5])+(n[2]*o[10])+(n[3]*o[15]);j[1]=(n[0]*o[1])+(n[1]*o[6])+(n[2]*o[11])+(n[3]*o[16]);j[2]=(n[0]*o[2])+(n[1]*o[7])+(n[2]*o[12])+(n[3]*o[17]);j[3]=(n[0]*o[3])+(n[1]*o[8])+(n[2]*o[13])+(n[3]*o[18]);j[4]=(n[0]*o[4])+(n[1]*o[9])+(n[2]*o[14])+(n[3]*o[19]);j[5]=(n[5]*o[0])+(n[6]*o[5])+(n[7]*o[10])+(n[8]*o[15]);j[6]=(n[5]*o[1])+(n[6]*o[6])+(n[7]*o[11])+(n[8]*o[16]);j[7]=(n[5]*o[2])+(n[6]*o[7])+(n[7]*o[12])+(n[8]*o[17]);j[8]=(n[5]*o[3])+(n[6]*o[8])+(n[7]*o[13])+(n[8]*o[18]);j[9]=(n[5]*o[4])+(n[6]*o[9])+(n[7]*o[14])+(n[8]*o[19]);j[10]=(n[10]*o[0])+(n[11]*o[5])+(n[12]*o[10])+(n[13]*o[15]);j[11]=(n[10]*o[1])+(n[11]*o[6])+(n[12]*o[11])+(n[13]*o[16]);j[12]=(n[10]*o[2])+(n[11]*o[7])+(n[12]*o[12])+(n[13]*o[17]);j[13]=(n[10]*o[3])+(n[11]*o[8])+(n[12]*o[13])+(n[13]*o[18]);j[14]=(n[10]*o[4])+(n[11]*o[9])+(n[12]*o[14])+(n[13]*o[19]);j[15]=(n[15]*o[0])+(n[16]*o[5])+(n[17]*o[10])+(n[18]*o[15]);j[16]=(n[15]*o[1])+(n[16]*o[6])+(n[17]*o[11])+(n[18]*o[16]);j[17]=(n[15]*o[2])+(n[16]*o[7])+(n[17]*o[12])+(n[18]*o[17]);j[18]=(n[15]*o[3])+(n[16]*o[8])+(n[17]*o[13])+(n[18]*o[18]);j[19]=(n[15]*o[4])+(n[16]*o[9])+(n[17]*o[14])+(n[18]*o[19]);return j};b.prototype._colorMatrix=function(j){var m=new Float32Array(j);m[4]/=255;m[9]/=255;m[14]/=255;m[19]/=255;return m};b.prototype.brightness=function(o,j){var n=[o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(n,j)};b.prototype.greyscale=function(j,n){var o=[j,j,j,0,0,j,j,j,0,0,j,j,j,0,0,0,0,0,1,0];this._loadMatrix(o,n)};b.prototype.grayscale=b.prototype.greyscale;b.prototype.blackAndWhite=function(j){var m=[0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.hue=function(w,j){w=(w||0)/180*Math.PI;var v=Math.cos(w),s=Math.sin(w);var x=0.213,y=0.715,u=0.072;var t=[x+v*(1-x)+s*(-x),y+v*(-y)+s*(-y),u+v*(-u)+s*(1-u),0,0,x+v*(-x)+s*(0.143),y+v*(1-y)+s*(0.14),u+v*(-u)+s*(-0.283),0,0,x+v*(-x)+s*(-(1-x)),y+v*(-y)+s*(y),u+v*(1-u)+s*(u),0,0,0,0,0,1,0];this._loadMatrix(t,j)};b.prototype.contrast=function(s,j){var o=(s||0)+1;var r=-128*(o-1);var q=[o,0,0,0,r,0,o,0,0,r,0,0,o,0,r,0,0,0,1,0];this._loadMatrix(q,j)};b.prototype.saturate=function(s,j){var q=(s||0)*2/3+1;var r=((q-1)*-0.5);var p=[q,r,r,0,0,r,q,r,0,0,r,r,q,0,0,0,0,0,1,0];this._loadMatrix(p,j)};b.prototype.desaturate=function(j){this.saturate(-1)};b.prototype.negative=function(j){var m=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.sepia=function(j){var m=[0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.technicolor=function(j){var m=[1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.polaroid=function(j){var m=[1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.toBGR=function(j){var m=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.kodachrome=function(j){var m=[1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.browni=function(j){var m=[0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.vintage=function(j){var m=[0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.colorTone=function(G,x,y,F,B){G=G||0.2;x=x||0.15;y=y||16770432;F=F||3375104;var D=((y>>16)&255)/255;var z=((y>>8)&255)/255;var w=(y&255)/255;var j=((F>>16)&255)/255;var C=((F>>8)&255)/255;var A=(F&255)/255;var E=[0.3,0.59,0.11,0,0,D,z,w,G,0,j,C,A,x,0,D-j,z-C,w-A,0,0];this._loadMatrix(E,B)};b.prototype.night=function(o,j){o=o||0.1;var n=[o*(-2),-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0];this._loadMatrix(n,j)};b.prototype.predator=function(j,n){var o=[11.224130630493164*j,-4.794486999511719*j,-2.8746118545532227*j,0*j,0.40342438220977783*j,-3.6330697536468506*j,9.193157196044922*j,-2.951810836791992*j,0*j,-1.316135048866272*j,-3.2184197902679443*j,-4.2375030517578125*j,7.476448059082031*j,0*j,0.8044459223747253*j,0,0,0,1,0];this._loadMatrix(o,n)};b.prototype.lsd=function(j){var m=[2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0];this._loadMatrix(m,j)};b.prototype.reset=function(){var j=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(j,false)};Object.defineProperties(b.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(j){this.uniforms.m.value=j}}})},{"../../core":20}],85:[function(b,a,c){var d=b("../../core");function k(){d.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}k.prototype=Object.create(d.AbstractFilter.prototype);k.prototype.constructor=k;a.exports=k;Object.defineProperties(k.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(j){this.uniforms.step.value=j}}})},{"../../core":20}],86:[function(b,a,c){var d=b("../../core");function k(n,j,o){d.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(n)},texelSize:{type:"v2",value:{x:1/j,y:1/o}}})}k.prototype=Object.create(d.AbstractFilter.prototype);k.prototype.constructor=k;a.exports=k;Object.defineProperties(k.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(j){this.uniforms.matrix.value=new Float32Array(j)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(j){this.uniforms.texelSize.value.x=1/j}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(j){this.uniforms.texelSize.value.y=1/j}}})},{"../../core":20}],87:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a},{"../../core":20}],88:[function(c,a,d){var k=c("../../core");function b(o,j){var n=new k.Matrix();o.renderable=false;k.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:o.texture},otherMatrix:{type:"mat3",value:n.toArray(true)},scale:{type:"v2",value:{x:1,y:1}}});this.maskSprite=o;this.maskMatrix=n;if(j===null||j===undefined){j=20}this.scale=new k.Point(j,j)}b.prototype=Object.create(k.AbstractFilter.prototype);b.prototype.constructor=b;a.exports=b;b.prototype.applyFilter=function(r,j,p){var q=r.filterManager;q.calculateMappedMatrix(j.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.scale.value.x=this.scale.x*(1/j.frame.width);this.uniforms.scale.value.y=this.scale.y*(1/j.frame.height);var s=this.getShader(r);q.applyFilter(s,j,p)};Object.defineProperties(b.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(j){this.uniforms.mapSampler.value=j}}})},{"../../core":20}],89:[function(b,a,c){var k=b("../../core");function d(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}d.prototype=Object.create(k.AbstractFilter.prototype);d.prototype.constructor=d;a.exports=d;Object.defineProperties(d.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(j){this.uniforms.scale.value=j}},angle:{get:function(){return this.uniforms.angle.value},set:function(j){this.uniforms.angle.value=j}}})},{"../../core":20}],90:[function(b,a,c){var d=b("../../core");function k(){d.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:0.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}k.prototype=Object.create(d.AbstractFilter.prototype);k.prototype.constructor=k;a.exports=k;k.prototype.applyFilter=function(j,C,A,v){var u=this.getShader(j);this.uniforms.strength.value=this.strength/4/this.passes*(C.frame.height/C.size.height);if(this.passes===1){j.filterManager.applyFilter(u,C,A,v)}else{var w=j.filterManager.getRenderTarget(true);var x=C;var z=w;for(var y=0;y<this.passes-1;y++){j.filterManager.applyFilter(u,x,z,v);var B=z;z=x;x=B}j.filterManager.applyFilter(u,x,A,v);j.filterManager.returnRenderTarget(w)}};Object.defineProperties(k.prototype,{blur:{get:function(){return this.strength},set:function(j){this.padding=j*0.5;this.strength=j}}})},{"../../core":20}],91:[function(d,c,m){var n=d("../../core"),b=d("../blur/BlurXFilter"),o=d("./BlurYTintFilter");function a(){n.AbstractFilter.call(this);this.blurXFilter=new b();this.blurYTintFilter=new o();this.defaultFilter=new n.AbstractFilter();this.padding=30;this._dirtyPosition=true;this._angle=45*Math.PI/180;this._distance=10;this.alpha=0.75;this.hideObject=false;this.blendMode=n.BLEND_MODES.MULTIPLY}a.prototype=Object.create(n.AbstractFilter.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.applyFilter=function(k,q,j){var l=k.filterManager.getRenderTarget(true);if(this._dirtyPosition){this._dirtyPosition=false;this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance;this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance}this.blurXFilter.applyFilter(k,q,l);k.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(k,l,j);k.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL);if(!this.hideObject){this.defaultFilter.applyFilter(k,q,j)}k.filterManager.returnRenderTarget(l)};Object.defineProperties(a.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(j){this.blurXFilter.blur=this.blurYTintFilter.blur=j}},blurX:{get:function(){return this.blurXFilter.blur},set:function(j){this.blurXFilter.blur=j}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(j){this.blurYTintFilter.blur=j}},color:{get:function(){return n.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(j){this.blurYTintFilter.uniforms.color.value=n.utils.hex2rgb(j)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(j){this.blurYTintFilter.uniforms.alpha.value=j}},distance:{get:function(){return this._distance},set:function(j){this._dirtyPosition=true;this._distance=j}},angle:{get:function(){return this._angle},set:function(j){this._dirtyPosition=true;this._angle=j}}})},{"../../core":20,"../blur/BlurXFilter":81,"./BlurYTintFilter":90}],92:[function(b,a,d){var k=b("../../core");function c(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}c.prototype=Object.create(k.AbstractFilter.prototype);c.prototype.constructor=c;a.exports=c;Object.defineProperties(c.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(j){this.uniforms.gray.value=j}}})},{"../../core":20}],93:[function(b,a,c){a.exports={AsciiFilter:b("./ascii/AsciiFilter"),BloomFilter:b("./bloom/BloomFilter"),BlurFilter:b("./blur/BlurFilter"),BlurXFilter:b("./blur/BlurXFilter"),BlurYFilter:b("./blur/BlurYFilter"),BlurDirFilter:b("./blur/BlurDirFilter"),ColorMatrixFilter:b("./color/ColorMatrixFilter"),ColorStepFilter:b("./color/ColorStepFilter"),ConvolutionFilter:b("./convolution/ConvolutionFilter"),CrossHatchFilter:b("./crosshatch/CrossHatchFilter"),DisplacementFilter:b("./displacement/DisplacementFilter"),DotScreenFilter:b("./dot/DotScreenFilter"),GrayFilter:b("./gray/GrayFilter"),DropShadowFilter:b("./dropshadow/DropShadowFilter"),InvertFilter:b("./invert/InvertFilter"),NoiseFilter:b("./noise/NoiseFilter"),PixelateFilter:b("./pixelate/PixelateFilter"),RGBSplitFilter:b("./rgb/RGBSplitFilter"),ShockwaveFilter:b("./shockwave/ShockwaveFilter"),SepiaFilter:b("./sepia/SepiaFilter"),SmartBlurFilter:b("./blur/SmartBlurFilter"),TiltShiftFilter:b("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:b("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:b("./tiltshift/TiltShiftYFilter"),TwistFilter:b("./twist/TwistFilter")}},{"./ascii/AsciiFilter":77,"./bloom/BloomFilter":78,"./blur/BlurDirFilter":79,"./blur/BlurFilter":80,"./blur/BlurXFilter":81,"./blur/BlurYFilter":82,"./blur/SmartBlurFilter":83,"./color/ColorMatrixFilter":84,"./color/ColorStepFilter":85,"./convolution/ConvolutionFilter":86,"./crosshatch/CrossHatchFilter":87,"./displacement/DisplacementFilter":88,"./dot/DotScreenFilter":89,"./dropshadow/DropShadowFilter":91,"./gray/GrayFilter":92,"./invert/InvertFilter":94,"./noise/NoiseFilter":95,"./pixelate/PixelateFilter":96,"./rgb/RGBSplitFilter":97,"./sepia/SepiaFilter":98,"./shockwave/ShockwaveFilter":99,"./tiltshift/TiltShiftFilter":101,"./tiltshift/TiltShiftXFilter":102,"./tiltshift/TiltShiftYFilter":103,"./twist/TwistFilter":104}],94:[function(b,a,c){var k=b("../../core");function d(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}d.prototype=Object.create(k.AbstractFilter.prototype);d.prototype.constructor=d;a.exports=d;Object.defineProperties(d.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(j){this.uniforms.invert.value=j}}})},{"../../core":20}],95:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:0.5}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(j){this.uniforms.noise.value=j}}})},{"../../core":20}],96:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(j){this.uniforms.pixelSize.value=j}}})},{"../../core":20}],97:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(j){this.uniforms.red.value=j}},green:{get:function(){return this.uniforms.green.value},set:function(j){this.uniforms.green.value=j}},blue:{get:function(){return this.uniforms.blue.value},set:function(j){this.uniforms.blue.value=j}}})},{"../../core":20}],98:[function(b,a,d){var k=b("../../core");function c(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}c.prototype=Object.create(k.AbstractFilter.prototype);c.prototype.constructor=c;a.exports=c;Object.defineProperties(c.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(j){this.uniforms.sepia.value=j}}})},{"../../core":20}],99:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:0.5,y:0.5}},params:{type:"v3",value:{x:10,y:0.8,z:0.1}},time:{type:"1f",value:0}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(j){this.uniforms.center.value=j}},params:{get:function(){return this.uniforms.params.value},set:function(j){this.uniforms.params.value=j}},time:{get:function(){return this.uniforms.time.value},set:function(j){this.uniforms.time.value=j}}})},{"../../core":20}],100:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;a.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=0};Object.defineProperties(a.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(j){this.uniforms.blur.value=j}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(j){this.uniforms.gradientBlur.value=j}},start:{get:function(){return this.uniforms.start.value},set:function(j){this.uniforms.start.value=j;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(j){this.uniforms.end.value=j;this.updateDelta()}}})},{"../../core":20}],101:[function(m,c,n){var o=m("../../core"),b=m("./TiltShiftXFilter"),a=m("./TiltShiftYFilter");function d(){o.AbstractFilter.call(this);this.tiltShiftXFilter=new b();this.tiltShiftYFilter=new a()}d.prototype=Object.create(o.AbstractFilter.prototype);d.prototype.constructor=d;c.exports=d;d.prototype.applyFilter=function(k,q,j){var l=k.filterManager.getRenderTarget(true);this.tiltShiftXFilter.applyFilter(k,q,l);this.tiltShiftYFilter.applyFilter(k,l,j);k.filterManager.returnRenderTarget(l)};Object.defineProperties(d.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(j){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=j}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(j){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=j}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(j){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=j}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(j){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=j}}})},{"../../core":20,"./TiltShiftXFilter":102,"./TiltShiftYFilter":103}],102:[function(d,c,k){var a=d("./TiltShiftAxisFilter");function b(){a.call(this)}b.prototype=Object.create(a.prototype);b.prototype.constructor=b;c.exports=b;b.prototype.updateDelta=function(){var n=this.uniforms.end.value.x-this.uniforms.start.value.x;var o=this.uniforms.end.value.y-this.uniforms.start.value.y;var j=Math.sqrt(n*n+o*o);this.uniforms.delta.value.x=n/j;this.uniforms.delta.value.y=o/j}},{"./TiltShiftAxisFilter":100}],103:[function(d,c,k){var b=d("./TiltShiftAxisFilter");function a(){b.call(this)}a.prototype=Object.create(b.prototype);a.prototype.constructor=a;c.exports=a;a.prototype.updateDelta=function(){var n=this.uniforms.end.value.x-this.uniforms.start.value.x;var o=this.uniforms.end.value.y-this.uniforms.start.value.y;var j=Math.sqrt(n*n+o*o);this.uniforms.delta.value.x=-o/j;this.uniforms.delta.value.y=n/j}},{"./TiltShiftAxisFilter":100}],104:[function(c,b,d){var k=c("../../core");function a(){k.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:0.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:0.5,y:0.5}}})}a.prototype=Object.create(k.AbstractFilter.prototype);a.prototype.constructor=a;b.exports=a;Object.defineProperties(a.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(j){this.uniforms.offset.value=j}},radius:{get:function(){return this.uniforms.radius.value},set:function(j){this.uniforms.radius.value=j}},angle:{get:function(){return this.uniforms.angle.value},set:function(j){this.uniforms.angle.value=j}}})},{"../../core":20}],105:[function(b,a,c){(function(d){b("./polyfill");var k=a.exports=b("./core");k.extras=b("./extras");k.filters=b("./filters");k.interaction=b("./interaction");k.loaders=b("./loaders");k.mesh=b("./mesh");k.loader=new k.loaders.Loader();Object.assign(k,b("./deprecation"));d.PIXI=k}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core":20,"./deprecation":69,"./extras":76,"./filters":93,"./interaction":108,"./loaders":111,"./mesh":117,"./polyfill":122}],106:[function(b,a,d){var k=b("../core");function c(){this.global=new k.Point();this.target=null;this.originalEvent=null}c.prototype.constructor=c;a.exports=c;c.prototype.getLocalPosition=function(j,o,n){return j.toLocal(n?n:this.global,o)}},{"../core":20}],107:[function(c,b,l){var m=c("../core"),d=c("./InteractionData");Object.assign(m.DisplayObject.prototype,c("./interactiveTarget"));function a(j,k){k=k||{};this.renderer=j;this.autoPreventDefault=k.autoPreventDefault!==undefined?k.autoPreventDefault:true;this.interactionFrequency=k.interactionFrequency||10;this.mouse=new d();this.eventData={stopped:false,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=true}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.eventsAdded=false;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new m.Point();this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}a.prototype.constructor=a;b.exports=a;a.prototype.setTargetElement=function(j,k){this.removeEvents();this.interactionDOMElement=j;this.resolution=k||1;this.addEvents()};a.prototype.addEvents=function(){if(!this.interactionDOMElement){return}m.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,true);window.addEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=true};a.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}m.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,true);this.interactionDOMElement=null;window.removeEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=false};a.prototype.update=function(j){this._deltaTime+=j;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};a.prototype.dispatchEvent=function(o,k,j){if(!j.stopped){j.target=o;j.type=k;o.emit(k,j);if(o[k]){o[k](j)}}};a.prototype.mapPositionToPoint=function(j,k,p){var q=this.interactionDOMElement.getBoundingClientRect();j.x=((k-q.left)*(this.interactionDOMElement.width/q.width))/this.resolution;j.y=((p-q.top)*(this.interactionDOMElement.height/q.height))/this.resolution};a.prototype.processInteractive=function(k,t,v,y,j){if(!t||!t.visible){return false}var w=t.children;var u=false;j=j||t.interactive;if(t.interactiveChildren){for(var x=w.length-1;x>=0;x--){if(!u&&y){u=this.processInteractive(k,w[x],v,true,j)}else{this.processInteractive(k,w[x],v,false,false)}}}if(j){if(y){if(t.hitArea){t.worldTransform.applyInverse(k,this._tempPoint);u=t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else{if(t.containsPoint){u=t.containsPoint(k)}}}if(t.interactive){v(t,u)}}return u};a.prototype.onMouseDown=function(j){this.mouse.originalEvent=j;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,j.clientX,j.clientY);if(this.autoPreventDefault){this.mouse.originalEvent.preventDefault()}this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,true)};a.prototype.processMouseDown=function(p,k){var j=this.mouse.originalEvent;var q=j.button===2||j.which===3;if(k){p[q?"_isRightDown":"_isLeftDown"]=true;this.dispatchEvent(p,q?"rightdown":"mousedown",this.eventData)}};a.prototype.onMouseUp=function(j){this.mouse.originalEvent=j;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,j.clientX,j.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,true)};a.prototype.processMouseUp=function(q,j){var s=this.mouse.originalEvent;var r=s.button===2||s.which===3;var k=r?"_isRightDown":"_isLeftDown";if(j){this.dispatchEvent(q,r?"rightup":"mouseup",this.eventData);if(q[k]){q[k]=false;this.dispatchEvent(q,r?"rightclick":"click",this.eventData)}}else{if(q[k]){q[k]=false;this.dispatchEvent(q,r?"rightupoutside":"mouseupoutside",this.eventData)}}};a.prototype.onMouseMove=function(j){this.mouse.originalEvent=j;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,j.clientX,j.clientY);this.didMove=true;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};a.prototype.processMouseMove=function(j,k){this.dispatchEvent(j,"mousemove",this.eventData);this.processMouseOverOut(j,k)};a.prototype.onMouseOut=function(j){this.mouse.originalEvent=j;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,j.clientX,j.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,j.clientX,j.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,false)};a.prototype.processMouseOverOut=function(j,k){if(k){if(!j._over){j._over=true;this.dispatchEvent(j,"mouseover",this.eventData)}if(j.buttonMode){this.cursor=j.defaultCursor}}else{if(j._over){j._over=false;this.dispatchEvent(j,"mouseout",this.eventData)}}};a.prototype.onTouchStart=function(s){if(this.autoPreventDefault){s.preventDefault()}var t=s.changedTouches;var r=t.length;for(var u=0;u<r;u++){var k=t[u];var j=this.getTouchData(k);j.originalEvent=s;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.returnTouchData(j)}};a.prototype.processTouchStart=function(j,k){if(k){j._touchDown=true;this.dispatchEvent(j,"touchstart",this.eventData)}};a.prototype.onTouchEnd=function(s){if(this.autoPreventDefault){s.preventDefault()}var t=s.changedTouches;var r=t.length;for(var u=0;u<r;u++){var k=t[u];var j=this.getTouchData(k);j.originalEvent=s;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.returnTouchData(j)}};a.prototype.processTouchEnd=function(j,k){if(k){this.dispatchEvent(j,"touchend",this.eventData);if(j._touchDown){j._touchDown=false;this.dispatchEvent(j,"tap",this.eventData)}}else{if(j._touchDown){j._touchDown=false;this.dispatchEvent(j,"touchendoutside",this.eventData)}}};a.prototype.onTouchMove=function(s){if(this.autoPreventDefault){s.preventDefault()}var t=s.changedTouches;var r=t.length;for(var u=0;u<r;u++){var k=t[u];var j=this.getTouchData(k);j.originalEvent=s;this.eventData.data=j;this.eventData.stopped=false;this.processInteractive(j.global,this.renderer._lastObjectRendered,this.processTouchMove,true);this.returnTouchData(j)}};a.prototype.processTouchMove=function(j,k){k=k;this.dispatchEvent(j,"touchmove",this.eventData)};a.prototype.getTouchData=function(k){var j=this.interactiveDataPool.pop();if(!j){j=new d()}j.identifier=k.identifier;this.mapPositionToPoint(j.global,k.clientX,k.clientY);if(navigator.isCocoonJS){j.global.x=j.global.x/this.resolution;j.global.y=j.global.y/this.resolution}k.globalX=j.global.x;k.globalY=j.global.y;return j};a.prototype.returnTouchData=function(j){this.interactiveDataPool.push(j)};a.prototype.destroy=function(){this.removeEvents();this.renderer=null;this.mouse=null;this.eventData=null;this.interactiveDataPool=null;this.interactionDOMElement=null;this.onMouseUp=null;this.processMouseUp=null;this.onMouseDown=null;this.processMouseDown=null;this.onMouseMove=null;this.processMouseMove=null;this.onMouseOut=null;this.processMouseOverOut=null;this.onTouchStart=null;this.processTouchStart=null;this.onTouchEnd=null;this.processTouchEnd=null;this.onTouchMove=null;this.processTouchMove=null;this._tempPoint=null};m.WebGLRenderer.registerPlugin("interaction",a);m.CanvasRenderer.registerPlugin("interaction",a)},{"../core":20,"./InteractionData":106,"./interactiveTarget":109}],108:[function(b,a,c){a.exports={InteractionData:b("./InteractionData"),InteractionManager:b("./InteractionManager"),interactiveTarget:b("./interactiveTarget")}},{"./InteractionData":106,"./InteractionManager":107,"./interactiveTarget":109}],109:[function(c,b,d){var a={interactive:false,buttonMode:false,interactiveChildren:true,defaultCursor:"pointer",_over:false,_touchDown:false};b.exports=a},{}],110:[function(o,n,p){var b=o("resource-loader").Resource,q=o("../core"),d=o("../extras"),c=o("path");function a(l,E){var k={};var m=l.data.getElementsByTagName("info")[0];var G=l.data.getElementsByTagName("common")[0];k.font=m.getAttribute("face");k.size=parseInt(m.getAttribute("size"),10);k.lineHeight=parseInt(G.getAttribute("lineHeight"),10);k.chars={};var F=l.data.getElementsByTagName("char");for(var j=0;j<F.length;j++){var B=parseInt(F[j].getAttribute("id"),10);var C=new q.Rectangle(parseInt(F[j].getAttribute("x"),10)+E.frame.x,parseInt(F[j].getAttribute("y"),10)+E.frame.y,parseInt(F[j].getAttribute("width"),10),parseInt(F[j].getAttribute("height"),10));k.chars[B]={xOffset:parseInt(F[j].getAttribute("xoffset"),10),yOffset:parseInt(F[j].getAttribute("yoffset"),10),xAdvance:parseInt(F[j].getAttribute("xadvance"),10),kerning:{},texture:new q.Texture(E.baseTexture,C)}}var D=l.data.getElementsByTagName("kerning");for(j=0;j<D.length;j++){var H=parseInt(D[j].getAttribute("first"),10);var A=parseInt(D[j].getAttribute("second"),10);var I=parseInt(D[j].getAttribute("amount"),10);k.chars[A].kerning[H]=I}l.bitmapFont=k;d.BitmapText.fonts[k.font]=k}n.exports=function(){return function(j,l){if(!j.data||!j.isXml){return l()}if(j.data.getElementsByTagName("page").length===0||j.data.getElementsByTagName("info").length===0||j.data.getElementsByTagName("info")[0].getAttribute("face")===null){return l()}var m=c.dirname(j.url);if(m==="."){m=""}if(this.baseUrl&&m){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){m+="/"}m=m.replace(this.baseUrl,"")}if(m&&m.charAt(m.length-1)!=="/"){m+="/"}var s=m+j.data.getElementsByTagName("page")[0].getAttribute("file");if(q.utils.TextureCache[s]){a(j,q.utils.TextureCache[s]);l()}else{var k={crossOrigin:j.crossOrigin,loadType:b.LOAD_TYPE.IMAGE};this.add(j.name+"_image",s,k,function(r){a(j,r.texture);l()})}}}},{"../core":20,"../extras":76,path:2,"resource-loader":129}],111:[function(b,a,c){a.exports={Loader:b("./loader"),bitmapFontParser:b("./bitmapFontParser"),spritesheetParser:b("./spritesheetParser"),textureParser:b("./textureParser"),Resource:b("resource-loader").Resource}},{"./bitmapFontParser":110,"./loader":112,"./spritesheetParser":113,"./textureParser":114,"resource-loader":129}],112:[function(o,p,c){var a=o("resource-loader"),d=o("./textureParser"),q=o("./spritesheetParser"),b=o("./bitmapFontParser");function r(j,k){a.call(this,j,k);for(var l=0;l<r._pixiMiddleware.length;++l){this.use(r._pixiMiddleware[l]())}}r.prototype=Object.create(a.prototype);r.prototype.constructor=r;p.exports=r;r._pixiMiddleware=[a.middleware.parsing.blob,d,q,b];r.addPixiMiddleware=function(j){r._pixiMiddleware.push(j)};var s=a.Resource;s.setExtensionXhrType("fnt",s.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":110,"./spritesheetParser":113,"./textureParser":114,"resource-loader":129}],113:[function(d,c,l){var a=d("resource-loader").Resource,b=d("path"),m=d("../core");c.exports=function(){return function(q,s){if(!q.data||!q.isJson||!q.data.frames){return s()}var r={crossOrigin:q.crossOrigin,loadType:a.LOAD_TYPE.IMAGE};var k=b.dirname(q.url.replace(this.baseUrl,""));var j=m.utils.getResolutionOfUrl(q.url);this.add(q.name+"_image",k+"/"+q.data.meta.image,r,function(p){q.textures={};var n=q.data.frames;for(var x in n){var o=n[x].frame;if(o){var y=null;var A=null;if(n[x].rotated){y=new m.Rectangle(o.x,o.y,o.h,o.w)}else{y=new m.Rectangle(o.x,o.y,o.w,o.h)}if(n[x].trimmed){A=new m.Rectangle(n[x].spriteSourceSize.x/j,n[x].spriteSourceSize.y/j,n[x].sourceSize.w/j,n[x].sourceSize.h/j)}if(n[x].rotated){var z=y.width;y.width=y.height;y.height=z}y.x/=j;y.y/=j;y.width/=j;y.height/=j;q.textures[x]=new m.Texture(p.texture.baseTexture,y,y.clone(),A,n[x].rotated);m.utils.TextureCache[x]=q.textures[x]}}s()})}}},{"../core":20,path:2,"resource-loader":129}],114:[function(b,a,c){var d=b("../core");a.exports=function(){return function(m,o){if(m.data&&m.isImage){var n=new d.BaseTexture(m.data,null,d.utils.getResolutionOfUrl(m.url));n.imageUrl=m.url;m.texture=new d.Texture(n);d.utils.BaseTextureCache[m.url]=n;d.utils.TextureCache[m.url]=m.texture}o()}}},{"../core":20}],115:[function(d,c,m){var o=d("../core"),a=new o.Point(),n=new o.Polygon();function b(r,j,s,k,l){o.Container.call(this);this._texture=null;this.uvs=s||new Float32Array([0,1,1,1,1,0,0,1]);this.vertices=j||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=k||new Uint16Array([0,1,2,3]);this.dirty=true;this.blendMode=o.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=l||b.DRAW_MODES.TRIANGLE_MESH;this.texture=r}b.prototype=Object.create(o.Container.prototype);b.prototype.constructor=b;c.exports=b;Object.defineProperties(b.prototype,{texture:{get:function(){return this._texture},set:function(j){if(this._texture===j){return}this._texture=j;if(j){if(j.baseTexture.hasLoaded){this._onTextureUpdate()}else{j.once("update",this._onTextureUpdate,this)}}}}});b.prototype._renderWebGL=function(j){j.setObjectRenderer(j.plugins.mesh);j.plugins.mesh.render(this)};b.prototype._renderCanvas=function(k){var l=k.context;var j=this.worldTransform;if(k.roundPixels){l.setTransform(j.a,j.b,j.c,j.d,j.tx|0,j.ty|0)}else{l.setTransform(j.a,j.b,j.c,j.d,j.tx,j.ty)}if(this.drawMode===b.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(l)}else{this._renderCanvasTriangles(l)}};b.prototype._renderCanvasTriangleMesh=function(l){var u=this.vertices;var s=this.uvs;var k=u.length/2;for(var t=0;t<k-2;t++){var j=t*2;this._renderCanvasDrawTriangle(l,u,s,j,(j+2),(j+4))}};b.prototype._renderCanvasTriangles=function(x){var j=this.vertices;var v=this.uvs;var y=this.indices;var w=y.length;for(var l=0;l<w;l+=3){var z=y[l]*2,A=y[l+1]*2,k=y[l+2]*2;this._renderCanvasDrawTriangle(x,j,v,z,A,k)}};b.prototype._renderCanvasDrawTriangle=function(au,ah,ai,ad,aj,al){var az=this._texture.baseTexture.source;var aB=this._texture.baseTexture.width;var ag=this._texture.baseTexture.height;var k=ah[ad],l=ah[aj],W=ah[al];var an=ah[ad+1],ap=ah[aj+1],aw=ah[al+1];var V=ai[ad]*aB,X=ai[aj]*aB,Y=ai[al]*aB;var ar=ai[ad+1]*ag,ay=ai[aj+1]*ag,aA=ai[al+1]*ag;if(this.canvasPadding>0){var Z=this.canvasPadding/this.worldTransform.a;var aa=this.canvasPadding/this.worldTransform.d;var am=(k+l+W)/3;var aq=(an+ap+aw)/3;var ab=k-am;var ac=an-aq;var af=Math.sqrt(ab*ab+ac*ac);k=am+(ab/af)*(af+Z);an=aq+(ac/af)*(af+aa);ab=l-am;ac=ap-aq;af=Math.sqrt(ab*ab+ac*ac);l=am+(ab/af)*(af+Z);ap=aq+(ac/af)*(af+aa);ab=W-am;ac=aw-aq;af=Math.sqrt(ab*ab+ac*ac);W=am+(ab/af)*(af+Z);aw=aq+(ac/af)*(af+aa)}au.save();au.beginPath();au.moveTo(k,an);au.lineTo(l,ap);au.lineTo(W,aw);au.closePath();au.clip();var j=(V*ay)+(ar*Y)+(X*aA)-(ay*Y)-(ar*X)-(V*aA);var ak=(k*ay)+(ar*W)+(l*aA)-(ay*W)-(ar*l)-(k*aA);var ao=(V*l)+(k*Y)+(X*W)-(l*Y)-(k*X)-(V*W);var at=(V*ay*W)+(ar*l*Y)+(k*X*aA)-(k*ay*Y)-(ar*X*W)-(V*l*aA);var av=(an*ay)+(ar*aw)+(ap*aA)-(ay*aw)-(ar*ap)-(an*aA);var ax=(V*ap)+(an*Y)+(X*aw)-(ap*Y)-(an*X)-(V*aw);var ae=(V*ay*aw)+(ar*ap*Y)+(an*X*aA)-(an*ay*Y)-(ar*X*aw)-(V*ap*aA);au.transform(ak/j,av/j,ao/j,ax/j,at/j,ae/j);au.drawImage(az,0,0);au.restore()};b.prototype.renderMeshFlat=function(j){var z=this.context;var E=j.vertices;var l=E.length/2;z.beginPath();for(var G=1;G<l-2;G++){var F=G*2;var k=E[F],y=E[F+2],A=E[F+4];var B=E[F+1],C=E[F+3],D=E[F+5];z.moveTo(k,B);z.lineTo(y,C);z.lineTo(A,D)}z.fillStyle="#FF0000";z.fill();z.closePath()};b.prototype._onTextureUpdate=function(){this.updateFrame=true};b.prototype.getBounds=function(J){if(!this._currentBounds){var L=J||this.worldTransform;var l=L.a;var K=L.b;var P=L.c;var U=L.d;var k=L.tx;var y=L.ty;var R=-Infinity;var j=-Infinity;var M=Infinity;var T=Infinity;var V=this.vertices;for(var x=0,N=V.length;x<N;x+=2){var W=V[x],X=V[x+1];var O=(l*W)+(P*X)+k;var Q=(U*X)+(K*W)+y;M=O<M?O:M;T=Q<T?Q:T;R=O>R?O:R;j=Q>j?Q:j}if(M===-Infinity||j===Infinity){return o.Rectangle.EMPTY}var S=this._bounds;S.x=M;S.width=R-M;S.y=T;S.height=j-T;this._currentBounds=S}return this._currentBounds};b.prototype.containsPoint=function(A){if(!this.getBounds().contains(A.x,A.y)){return false}this.worldTransform.applyInverse(A,a);var l=this.vertices;var z=n.points;var x,v;if(this.drawMode===b.DRAW_MODES.TRIANGLES){var y=this.indices;v=this.indices.length;for(x=0;x<v;x+=3){var j=y[x]*2,k=y[x+1]*2,w=y[x+2]*2;z[0]=l[j];z[1]=l[j+1];z[2]=l[k];z[3]=l[k+1];z[4]=l[w];z[5]=l[w+1];if(n.contains(a.x,a.y)){return true}}}else{v=l.length;for(x=0;x<v;x+=6){z[0]=l[x];z[1]=l[x+1];z[2]=l[x+2];z[3]=l[x+3];z[4]=l[x+4];z[5]=l[x+5];if(n.contains(a.x,a.y)){return true}}}return false};b.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":20}],116:[function(d,b,l){var a=d("./Mesh");var m=d("../core");function c(j,k){a.call(this,j);this.points=k;this.vertices=new Float32Array(k.length*4);this.uvs=new Float32Array(k.length*4);this.colors=new Float32Array(k.length*2);this.indices=new Uint16Array(k.length*2);this._ready=true;this.refresh()}c.prototype=Object.create(a.prototype);c.prototype.constructor=c;b.exports=c;c.prototype.refresh=function(){var E=this.points;if(E.length<1||!this._texture._uvs){return}var z=this.uvs;var C=this.indices;var B=this.colors;var D=this._texture._uvs;var A=new m.Point(D.x0,D.y0);var j=new m.Point(D.x2-D.x0,D.y2-D.y0);z[0]=0+A.x;z[1]=0+A.y;z[2]=0+A.x;z[3]=1*j.y+A.y;B[0]=1;B[1]=1;C[0]=0;C[1]=1;var G=E.length,F,k,x;for(var y=1;y<G;y++){F=E[y];k=y*4;x=y/(G-1);z[k]=x*j.x+A.x;z[k+1]=0+A.y;z[k+2]=x*j.x+A.x;z[k+3]=1*j.y+A.y;k=y*2;B[k]=1;B[k+1]=1;k=y*2;C[k]=k;C[k+1]=k+1}this.dirty=true};c.prototype._onTextureUpdate=function(){a.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};c.prototype.updateTransform=function(){var F=this.points;if(F.length<1){return}var H=F[0];var j;var D=0;var E=0;var y=this.vertices;var I=F.length,G,z,k,C,A;for(var B=0;B<I;B++){G=F[B];z=B*4;if(B<F.length-1){j=F[B+1]}else{j=G}E=-(j.x-H.x);D=j.y-H.y;k=(1-(B/(I-1)))*10;if(k>1){k=1}C=Math.sqrt(D*D+E*E);A=this._texture.height/2;D/=C;E/=C;D*=A;E*=A;y[z]=G.x+D;y[z+1]=G.y+E;y[z+2]=G.x-D;y[z+3]=G.y-E;H=G}this.containerUpdateTransform()}},{"../core":20,"./Mesh":115}],117:[function(b,a,c){a.exports={Mesh:b("./Mesh"),Rope:b("./Rope"),MeshRenderer:b("./webgl/MeshRenderer"),MeshShader:b("./webgl/MeshShader")}},{"./Mesh":115,"./Rope":116,"./webgl/MeshRenderer":118,"./webgl/MeshShader":119}],118:[function(c,b,d){var m=c("../../core"),a=c("../Mesh");function l(o){m.ObjectRenderer.call(this,o);this.indices=new Uint16Array(15000);for(var j=0,k=0;j<15000;j+=6,k+=4){this.indices[j+0]=k+0;this.indices[j+1]=k+1;this.indices[j+2]=k+2;this.indices[j+3]=k+0;this.indices[j+4]=k+2;this.indices[j+5]=k+3}}l.prototype=Object.create(m.ObjectRenderer.prototype);l.prototype.constructor=l;b.exports=l;m.WebGLRenderer.registerPlugin("mesh",l);l.prototype.onContextChange=function(){};l.prototype.render=function(r){if(!r._vertexBuffer){this._initWebGL(r)}var t=this.renderer,s=t.gl,j=r._texture.baseTexture,k=t.shaderManager.plugins.meshShader;var u=r.drawMode===a.DRAW_MODES.TRIANGLE_MESH?s.TRIANGLE_STRIP:s.TRIANGLES;t.blendModeManager.setBlendMode(r.blendMode);s.uniformMatrix3fv(k.uniforms.translationMatrix._location,false,r.worldTransform.toArray(true));s.uniformMatrix3fv(k.uniforms.projectionMatrix._location,false,t.currentRenderTarget.projectionMatrix.toArray(true));s.uniform1f(k.uniforms.alpha._location,r.worldAlpha);if(!r.dirty){s.bindBuffer(s.ARRAY_BUFFER,r._vertexBuffer);s.bufferSubData(s.ARRAY_BUFFER,0,r.vertices);s.vertexAttribPointer(k.attributes.aVertexPosition,2,s.FLOAT,false,0,0);s.bindBuffer(s.ARRAY_BUFFER,r._uvBuffer);s.vertexAttribPointer(k.attributes.aTextureCoord,2,s.FLOAT,false,0,0);s.activeTexture(s.TEXTURE0);if(!j._glTextures[s.id]){this.renderer.updateTexture(j)}else{s.bindTexture(s.TEXTURE_2D,j._glTextures[s.id])}s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r._indexBuffer);s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,r.indices)}else{r.dirty=false;s.bindBuffer(s.ARRAY_BUFFER,r._vertexBuffer);s.bufferData(s.ARRAY_BUFFER,r.vertices,s.STATIC_DRAW);s.vertexAttribPointer(k.attributes.aVertexPosition,2,s.FLOAT,false,0,0);s.bindBuffer(s.ARRAY_BUFFER,r._uvBuffer);s.bufferData(s.ARRAY_BUFFER,r.uvs,s.STATIC_DRAW);s.vertexAttribPointer(k.attributes.aTextureCoord,2,s.FLOAT,false,0,0);s.activeTexture(s.TEXTURE0);if(!j._glTextures[s.id]){this.renderer.updateTexture(j)}else{s.bindTexture(s.TEXTURE_2D,j._glTextures[s.id])}s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r._indexBuffer);s.bufferData(s.ELEMENT_ARRAY_BUFFER,r.indices,s.STATIC_DRAW)}s.drawElements(u,r.indices.length,s.UNSIGNED_SHORT,0)};l.prototype._initWebGL=function(j){var k=this.renderer.gl;j._vertexBuffer=k.createBuffer();j._indexBuffer=k.createBuffer();j._uvBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,j._vertexBuffer);k.bufferData(k.ARRAY_BUFFER,j.vertices,k.DYNAMIC_DRAW);k.bindBuffer(k.ARRAY_BUFFER,j._uvBuffer);k.bufferData(k.ARRAY_BUFFER,j.uvs,k.STATIC_DRAW);if(j.colors){j._colorBuffer=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,j._colorBuffer);k.bufferData(k.ARRAY_BUFFER,j.colors,k.STATIC_DRAW)}k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,j._indexBuffer);k.bufferData(k.ELEMENT_ARRAY_BUFFER,j.indices,k.STATIC_DRAW)};l.prototype.flush=function(){};l.prototype.start=function(){var j=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(j)};l.prototype.destroy=function(){m.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":20,"../Mesh":115}],119:[function(c,b,d){var k=c("../../core");function a(j){k.Shader.call(this,j,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}a.prototype=Object.create(k.Shader.prototype);a.prototype.constructor=a;b.exports=a;k.ShaderManager.registerPlugin("meshShader",a)},{"../../core":20}],120:[function(b,a,c){if(!Math.sign){Math.sign=function(d){d=+d;if(d===0||isNaN(d)){return d}return d>0?1:-1}}},{}],121:[function(b,a,c){if(!Object.assign){Object.assign=b("object-assign")}},{"object-assign":11}],122:[function(b,a,c){b("./Object.assign");b("./requestAnimationFrame");b("./Math.sign")},{"./Math.sign":120,"./Object.assign":121,"./requestAnimationFrame":123}],123:[function(b,a,c){(function(o){if(!(Date.now&&Date.prototype.getTime)){Date.now=function q(){return new Date().getTime()}}if(!(o.performance&&o.performance.now)){var p=Date.now();if(!o.performance){o.performance={}}o.performance.now=function(){return Date.now()-p}}var d=Date.now();var s=["ms","moz","webkit","o"];for(var r=0;r<s.length&&!o.requestAnimationFrame;++r){o.requestAnimationFrame=o[s[r]+"RequestAnimationFrame"];o.cancelAnimationFrame=o[s[r]+"CancelAnimationFrame"]||o[s[r]+"CancelRequestAnimationFrame"]}if(!o.requestAnimationFrame){o.requestAnimationFrame=function(j){if(typeof j!=="function"){throw new TypeError(j+"is not a function")}var k=Date.now(),l=16+d-k;if(l<0){l=0}d=k;return setTimeout(function(){d=Date.now();j(performance.now())},l)}}if(!o.cancelAnimationFrame){o.cancelAnimationFrame=function(j){clearTimeout(j)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],124:[function(b,a,c){(function(d){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){var Y={};var G,M;G=this;if(G!=null){M=G.async}Y.noConflict=function(){G.async=M;return Y};function T(k){var j=false;return function(){if(j){throw new Error("Callback was already called.")}j=true;k.apply(G,arguments)}}var L=Object.prototype.toString;var U=Array.isArray||function(j){return L.call(j)==="[object Array]"};var R=function(l,j){if(l.forEach){return l.forEach(j)}for(var k=0;k<l.length;k+=1){j(l[k],k,l)}};var ac=function(l,j){if(l.map){return l.map(j)}var k=[];R(l,function(o,m,n){k.push(j(o,m,n))});return k};var O=function(l,j,k){if(l.reduce){return l.reduce(j,k)}R(l,function(o,m,n){k=j(k,o,m,n)});return k};var aa=function(j){if(Object.keys){return Object.keys(j)}var k=[];for(var l in j){if(j.hasOwnProperty(l)){k.push(l)}}return k};if(typeof d==="undefined"||!(d.nextTick)){if(typeof setImmediate==="function"){Y.nextTick=function(j){setImmediate(j)};Y.setImmediate=Y.nextTick}else{Y.nextTick=function(j){setTimeout(j,0)};Y.setImmediate=Y.nextTick}}else{Y.nextTick=d.nextTick;if(typeof setImmediate!=="undefined"){Y.setImmediate=function(j){setImmediate(j)}}else{Y.setImmediate=Y.nextTick}}Y.each=function(n,k,j){j=j||function(){};if(!n.length){return j()}var l=0;R(n,function(o){k(o,T(m))});function m(o){if(o){j(o);j=function(){}}else{l+=1;if(l>=n.length){j()}}}};Y.forEach=Y.each;Y.eachSeries=function(n,k,j){j=j||function(){};if(!n.length){return j()}var l=0;var m=function(){k(n[l],function(o){if(o){j(o);j=function(){}}else{l+=1;if(l>=n.length){j()}else{m()}}})};m()};Y.forEachSeries=Y.eachSeries;Y.eachLimit=function(n,m,k,j){var l=W(m);l.apply(null,[n,k,j])};Y.forEachLimit=Y.eachLimit;var W=function(j){return function(o,k,p){p=p||function(){};if(!o.length||j<=0){return p()}var l=0;var n=0;var m=0;(function q(){if(l>=o.length){return p()}while(m<j&&n<o.length){n+=1;m+=1;k(o[n-1],function(r){if(r){p(r);p=function(){}}else{l+=1;m-=1;if(l>=o.length){p()}else{q()}}})}})()}};var V=function(j){return function(){var k=Array.prototype.slice.call(arguments);return j.apply(null,[Y.each].concat(k))}};var H=function(k,j){return function(){var l=Array.prototype.slice.call(arguments);return j.apply(null,[W(k)].concat(l))}};var J=function(j){return function(){var k=Array.prototype.slice.call(arguments);return j.apply(null,[Y.eachSeries].concat(k))}};var S=function(k,n,l,j){n=ac(n,function(o,p){return{index:p,value:o}});if(!j){k(n,function(o,p){l(o.value,function(q){p(q)})})}else{var m=[];k(n,function(o,p){l(o.value,function(q,r){m[o.index]=r;p(q)})},function(o){j(o,m)})}};Y.map=V(S);Y.mapSeries=J(S);Y.mapLimit=function(m,l,k,j){return Z(l)(m,k,j)};var Z=function(j){return H(j,S)};Y.reduce=function(m,l,k,j){Y.eachSeries(m,function(o,n){k(l,o,function(p,q){l=q;n(p)})},function(n){j(n,l)})};Y.inject=Y.reduce;Y.foldl=Y.reduce;Y.reduceRight=function(n,m,l,j){var k=ac(n,function(o){return o}).reverse();Y.reduce(k,m,l,j)};Y.foldr=Y.reduceRight;var Q=function(k,n,l,j){var m=[];n=ac(n,function(o,p){return{index:p,value:o}});k(n,function(o,p){l(o.value,function(q){if(q){m.push(o)}p()})},function(o){j(ac(m.sort(function(p,q){return p.index-q.index}),function(p){return p.value}))})};Y.filter=V(Q);Y.filterSeries=J(Q);Y.select=Y.filter;Y.selectSeries=Y.filterSeries;var K=function(k,n,l,j){var m=[];n=ac(n,function(o,p){return{index:p,value:o}});k(n,function(o,p){l(o.value,function(q){if(!q){m.push(o)}p()})},function(o){j(ac(m.sort(function(p,q){return p.index-q.index}),function(p){return p.value}))})};Y.reject=V(K);Y.rejectSeries=J(K);var X=function(k,m,l,j){k(m,function(o,n){l(o,function(p){if(p){j(o);j=function(){}}else{n()}})},function(n){j()})};Y.detect=V(X);Y.detectSeries=J(X);Y.some=function(l,k,j){Y.each(l,function(n,m){k(n,function(o){if(o){j(true);j=function(){}}m()})},function(m){j(false)})};Y.any=Y.some;Y.every=function(l,k,j){Y.each(l,function(n,m){k(n,function(o){if(!o){j(false);j=function(){}}m()})},function(m){j(true)})};Y.all=Y.every;Y.sortBy=function(l,k,j){Y.map(l,function(n,m){k(n,function(o,p){if(o){m(o)}else{m(null,{value:n,criteria:p})}})},function(m,o){if(m){return j(m)}else{var n=function(p,q){var r=p.criteria,s=q.criteria;return r<s?-1:r>s?1:0};j(null,ac(o.sort(n),function(p){return p.value}))}})};Y.auto=function(p,k){k=k||function(){};var j=aa(p);var q=j.length;if(!q){return k()}var n={};var l=[];var r=function(s){l.unshift(s)};var o=function(s){for(var t=0;t<l.length;t+=1){if(l[t]===s){l.splice(t,1);return}}};var m=function(){q--;R(l.slice(0),function(s){s()})};r(function(){if(!q){var s=k;k=function(){};s(null,n)}});R(j,function(w){var x=U(p[w])?p[w]:[p[w]];var s=function(A){var z=Array.prototype.slice.call(arguments,1);if(z.length<=1){z=z[0]}if(A){var y={};R(aa(n),function(B){y[B]=n[B]});y[w]=z;k(A,y);k=function(){}}else{n[w]=z;Y.setImmediate(m)}};var u=x.slice(0,Math.abs(x.length-1))||[];var v=function(){return O(u,function(y,z){return(y&&n.hasOwnProperty(z))},true)&&!n.hasOwnProperty(w)};if(v()){x[x.length-1](s,n)}else{var t=function(){if(v()){o(t);x[x.length-1](s,n)}};r(t)}})};Y.retry=function(k,o,j){var m=5;var n=[];if(typeof k==="function"){j=o;o=k;k=m}k=parseInt(k,10)||m;var l=function(p,r){var q=function(t,s){return function(u){t(function(v,w){u(!v||s,{err:v,result:w})},r)}};while(k){n.push(q(o,!(k-=1)))}Y.series(n,function(t,s){s=s[s.length-1];(p||j)(s.err,s.result)})};return j?l():l};Y.waterfall=function(j,k){k=k||function(){};if(!U(j)){var m=new Error("First argument to waterfall must be an array of functions");return k(m)}if(!j.length){return k()}var l=function(n){return function(p){if(p){k.apply(null,arguments);k=function(){}}else{var o=Array.prototype.slice.call(arguments,1);var q=n.next();if(q){o.push(l(q))}else{o.push(k)}Y.setImmediate(function(){n.apply(null,o)})}}};l(Y.iterator(j))()};var ab=function(l,j,k){k=k||function(){};if(U(j)){l.map(j,function(o,n){if(o){o(function(p){var q=Array.prototype.slice.call(arguments,1);if(q.length<=1){q=q[0]}n.call(null,p,q)})}},k)}else{var m={};l.each(aa(j),function(o,n){j[o](function(p){var q=Array.prototype.slice.call(arguments,1);if(q.length<=1){q=q[0]}m[o]=q;n(p)})},function(n){k(n,m)})}};Y.parallel=function(j,k){ab({map:Y.map,each:Y.each},j,k)};Y.parallelLimit=function(j,l,k){ab({map:Z(l),each:W(l)},j,k)};Y.series=function(j,k){k=k||function(){};if(U(j)){Y.mapSeries(j,function(n,m){if(n){n(function(p){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1){o=o[0]}m.call(null,p,o)})}},k)}else{var l={};Y.eachSeries(aa(j),function(n,m){j[n](function(p){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1){o=o[0]}l[n]=o;m(p)})},function(m){k(m,l)})}};Y.iterator=function(j){var k=function(m){var l=function(){if(j.length){j[m].apply(null,arguments)}return l.next()};l.next=function(){return(m<j.length-1)?k(m+1):null};return l};return k(0)};Y.apply=function(j){var k=Array.prototype.slice.call(arguments,1);return function(){return j.apply(null,k.concat(Array.prototype.slice.call(arguments)))}};var I=function(k,n,m,j){var l=[];k(n,function(p,o){m(p,function(r,q){l=l.concat(q||[]);o(r)})},function(o){j(o,l)})};Y.concat=V(I);Y.concatSeries=J(I);Y.whilst=function(j,l,k){if(j()){l(function(m){if(m){return k(m)}Y.whilst(j,l,k)})}else{k()}};Y.doWhilst=function(l,j,k){l(function(m){if(m){return k(m)}var n=Array.prototype.slice.call(arguments,1);if(j.apply(null,n)){Y.doWhilst(l,j,k)}else{k()}})};Y.until=function(j,l,k){if(!j()){l(function(m){if(m){return k(m)}Y.until(j,l,k)})}else{k()}};Y.doUntil=function(l,j,k){l(function(m){if(m){return k(m)}var n=Array.prototype.slice.call(arguments,1);if(!j.apply(null,n)){Y.doUntil(l,j,k)}else{k()}})};Y.queue=function(j,l){if(l===undefined){l=1}function n(r,o,p,q){if(!r.started){r.started=true}if(!U(o)){o=[o]}if(o.length==0){return Y.setImmediate(function(){if(r.drain){r.drain()}})}R(o,function(t){var s={data:t,callback:typeof q==="function"?q:null};if(p){r.tasks.unshift(s)}else{r.tasks.push(s)}if(r.saturated&&r.tasks.length===r.concurrency){r.saturated()}Y.setImmediate(r.process)})}var m=0;var k={tasks:[],concurrency:l,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(o,p){n(k,o,false,p)},kill:function(){k.drain=null;k.tasks=[]},unshift:function(o,p){n(k,o,true,p)},process:function(){if(!k.paused&&m<k.concurrency&&k.tasks.length){var q=k.tasks.shift();if(k.empty&&k.tasks.length===0){k.empty()}m+=1;var p=function(){m-=1;if(q.callback){q.callback.apply(q,arguments)}if(k.drain&&k.tasks.length+m===0){k.drain()}k.process()};var o=T(p);j(q.data,o)}},length:function(){return k.tasks.length},running:function(){return m},idle:function(){return k.tasks.length+m===0},pause:function(){if(k.paused===true){return}k.paused=true;k.process()},resume:function(){if(k.paused===false){return}k.paused=false;k.process()}};return k};Y.priorityQueue=function(j,l){function m(p,q){return p.priority-q.priority}function n(p,r,q){var s=-1,u=p.length-1;while(s<u){var t=s+((u-s+1)>>>1);if(q(r,p[t])>=0){s=t}else{u=t-1}}return s}function o(q,r,s,p){if(!q.started){q.started=true}if(!U(r)){r=[r]}if(r.length==0){return Y.setImmediate(function(){if(q.drain){q.drain()}})}R(r,function(u){var t={data:u,priority:s,callback:typeof p==="function"?p:null};q.tasks.splice(n(q.tasks,t,m)+1,0,t);if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}Y.setImmediate(q.process)})}var k=Y.queue(j,l);k.push=function(q,r,p){o(k,q,r,p)};delete k.unshift;return k};Y.cargo=function(k,l){var o=false,j=[];var n={tasks:j,payload:l,saturated:null,empty:null,drain:null,drained:true,push:function(q,p){if(!U(q)){q=[q]}R(q,function(r){j.push({data:r,callback:typeof p==="function"?p:null});n.drained=false;if(n.saturated&&j.length===l){n.saturated()}});Y.setImmediate(n.process)},process:function m(){if(o){return}if(j.length===0){if(n.drain&&!n.drained){n.drain()}n.drained=true;return}var q=typeof l==="number"?j.splice(0,l):j.splice(0,j.length);var p=ac(q,function(r){return r.data});if(n.empty){n.empty()}o=true;k(p,function(){o=false;var r=arguments;R(q,function(s){if(s.callback){s.callback.apply(null,r)}});m()})},length:function(){return j.length},running:function(){return o}};return n};var P=function(j){return function(k){var l=Array.prototype.slice.call(arguments,1);k.apply(null,l.concat([function(m){var n=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(m){if(console.error){}}else{if(console[j]){R(n,function(o){console[j](o)})}}}}]))}};Y.log=P("log");Y.dir=P("dir");Y.memoize=function(j,l){var m={};var k={};l=l||function(o){return o};var n=function(){var o=Array.prototype.slice.call(arguments);var p=o.pop();var q=l.apply(null,o);if(q in m){Y.nextTick(function(){p.apply(null,m[q])})}else{if(q in k){k[q].push(p)}else{k[q]=[p];j.apply(null,o.concat([function(){m[q]=arguments;var r=k[q];delete k[q];for(var s=0,t=r.length;s<t;s++){r[s].apply(null,arguments)}}]))}}};n.memo=m;n.unmemoized=j;return n};Y.unmemoize=function(j){return function(){return(j.unmemoized||j).apply(null,arguments)}};Y.times=function(k,l,j){var n=[];for(var m=0;m<k;m++){n.push(m)}return Y.map(n,l,j)};Y.timesSeries=function(k,l,j){var n=[];for(var m=0;m<k;m++){n.push(m)}return Y.mapSeries(n,l,j)};Y.seq=function(){var j=arguments;return function(){var l=this;var m=Array.prototype.slice.call(arguments);var k=m.pop();Y.reduce(j,m,function(n,p,o){p.apply(l,n.concat([function(){var q=arguments[0];var r=Array.prototype.slice.call(arguments,1);o(q,r)}]))},function(n,o){k.apply(l,[n].concat(o))})}};Y.compose=function(){return Y.seq.apply(null,Array.prototype.reverse.call(arguments))};var N=function(j,l){var k=function(){var n=this;var o=Array.prototype.slice.call(arguments);var p=o.pop();return j(l,function(q,r){q.apply(n,o.concat([r]))},p)};if(arguments.length>2){var m=Array.prototype.slice.call(arguments,2);return k.apply(this,m)}else{return k}};Y.applyEach=V(N);Y.applyEachSeries=J(N);Y.forever=function(k,j){function l(m){if(m){if(j){return j(m)}throw m}k(l)}l()};if(typeof a!=="undefined"&&a.exports){a.exports=Y}else{if(typeof h!=="undefined"&&h.amd){h([],function(){return Y})}else{G.async=Y}}}())}).call(this,b("_process"))},{_process:3}],125:[function(x,y,w){var u=typeof Object.create!=="function"?"~":false;function a(j,l,k){this.fn=j;this.context=l;this.once=k||false}function b(){}b.prototype._events=undefined;b.prototype.listeners=function s(j,k){var m=u?u+j:j,p=this._events&&this._events[m];if(k){return !!p}if(!p){return[]}if(this._events[m].fn){return[this._events[m].fn]}for(var l=0,n=this._events[m].length,o=new Array(n);l<n;l++){o[l]=this._events[m][l].fn}return o};b.prototype.emit=function d(G,r,F,I,H,j){var k=u?u+G:G;if(!this._events||!this._events[k]){return false}var l=this._events[k],n=arguments.length,m,o;if("function"===typeof l.fn){if(l.once){this.removeListener(G,l.fn,undefined,true)}switch(n){case 1:return l.fn.call(l.context),true;case 2:return l.fn.call(l.context,r),true;case 3:return l.fn.call(l.context,r,F),true;case 4:return l.fn.call(l.context,r,F,I),true;case 5:return l.fn.call(l.context,r,F,I,H),true;case 6:return l.fn.call(l.context,r,F,I,H,j),true}for(o=1,m=new Array(n-1);o<n;o++){m[o-1]=arguments[o]}l.fn.apply(l.context,m)}else{var q=l.length,p;for(o=0;o<q;o++){if(l[o].once){this.removeListener(G,l[o].fn,undefined,true)}switch(n){case 1:l[o].fn.call(l[o].context);break;case 2:l[o].fn.call(l[o].context,r);break;case 3:l[o].fn.call(l[o].context,r,F);break;default:if(!m){for(p=1,m=new Array(n-1);p<n;p++){m[p-1]=arguments[p]}}l[o].fn.apply(l[o].context,m)}}}return true};b.prototype.on=function t(k,l,m){var j=new a(l,m||this),n=u?u+k:k;if(!this._events){this._events=u?{}:Object.create(null)}if(!this._events[n]){this._events[n]=j}else{if(!this._events[n].fn){this._events[n].push(j)}else{this._events[n]=[this._events[n],j]}}return this};b.prototype.once=function z(k,l,m){var j=new a(l,m||this,true),n=u?u+k:k;if(!this._events){this._events=u?{}:Object.create(null)}if(!this._events[n]){this._events[n]=j}else{if(!this._events[n].fn){this._events[n].push(j)}else{this._events[n]=[this._events[n],j]}}return this};b.prototype.removeListener=function v(r,l,p,q){var k=u?u+r:r;if(!this._events||!this._events[k]){return this}var m=this._events[k],j=[];if(l){if(m.fn){if(m.fn!==l||(q&&!m.once)||(p&&m.context!==p)){j.push(m)}}else{for(var n=0,o=m.length;n<o;n++){if(m[n].fn!==l||(q&&!m[n].once)||(p&&m[n].context!==p)){j.push(m[n])}}}}if(j.length){this._events[k]=j.length===1?j[0]:j}else{delete this._events[k]}return this};b.prototype.removeAllListeners=function c(j){if(!this._events){return this}if(j){delete this._events[u?u+j:j]}else{this._events=u?{}:Object.create(null)}return this};b.prototype.off=b.prototype.removeListener;b.prototype.addListener=b.prototype.on;b.prototype.setMaxListeners=function A(){return this};b.prefixed=u;y.exports=b},{}],126:[function(o,n,q){var d=o("async"),p=o("url"),b=o("./Resource"),c=o("eventemitter3");function a(j,k){c.call(this);k=k||10;this.baseUrl=j||"";this.progress=0;this.loading=false;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=d.queue(this._boundLoadResource,k);this.resources={}}a.prototype=Object.create(c.prototype);a.prototype.constructor=a;n.exports=a;a.prototype.add=a.prototype.enqueue=function(k,l,m,s){if(Array.isArray(k)){for(var j=0;j<k.length;++j){this.add(k[j])}return this}if(typeof k==="object"){s=l||k.callback||k.onComplete;m=k;l=k.url;k=k.name||k.key||k.url}if(typeof l!=="string"){s=m;m=l;l=k}if(typeof l!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof m==="function"){s=m;m=null}if(this.resources[k]){throw new Error('Resource with name "'+k+'" already exists.')}l=this._handleBaseUrl(l);this.resources[k]=new b(k,l,m);if(typeof s==="function"){this.resources[k].once("afterMiddleware",s)}this._numToLoad++;if(this._queue.started){this._queue.push(this.resources[k]);this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())}else{this._buffer.push(this.resources[k]);this._progressChunk=100/this._buffer.length}return this};a.prototype._handleBaseUrl=function(k){var j=p.parse(k);if(j.protocol||j.pathname.indexOf("//")===0){return k}if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&k.lastIndexOf("/")!==k.length-1){return this.baseUrl+"/"+k}else{return this.baseUrl+k}};a.prototype.before=a.prototype.pre=function(j){this._beforeMiddleware.push(j);return this};a.prototype.after=a.prototype.use=function(j){this._afterMiddleware.push(j);return this};a.prototype.reset=function(){this.progress=0;this.loading=false;this._progressChunk=0;this._buffer.length=0;this._numToLoad=0;this._queue.kill();this._queue.started=false;this.resources={}};a.prototype.load=function(k){if(typeof k==="function"){this.once("complete",k)}if(this._queue.started){return this}this.emit("start",this);for(var j=0;j<this._buffer.length;++j){this._queue.push(this._buffer[j])}this._buffer.length=0;return this};a.prototype._loadResource=function(j,k){var l=this;j._dequeue=k;this._runMiddleware(j,this._beforeMiddleware,function(){j.load(l._boundOnLoad)})};a.prototype._onComplete=function(){this.emit("complete",this,this.resources)};a.prototype._onLoad=function(j){this.progress+=this._progressChunk;this.emit("progress",this,j);this._runMiddleware(j,this._afterMiddleware,function(){j.emit("afterMiddleware",j);this._numToLoad--;if(this._numToLoad===0){this.progress=100;this._onComplete()}if(j.error){this.emit("error",j.error,this,j)}else{this.emit("load",this,j)}});j._dequeue()};a.prototype._runMiddleware=function(j,k,m){var l=this;d.eachSeries(k,function(t,u){t.call(l,j,u)},m.bind(this,j))};a.LOAD_TYPE=b.LOAD_TYPE;a.XHR_READY_STATE=b.XHR_READY_STATE;a.XHR_RESPONSE_TYPE=b.XHR_RESPONSE_TYPE},{"./Resource":127,async:124,eventemitter3:125,url:8}],127:[function(p,s,c){var a=p("eventemitter3"),d=p("url"),b=!!(window.XDomainRequest&&!("withCredentials" in (new XMLHttpRequest()))),q=null;function t(j,k,l){a.call(this);l=l||{};if(typeof j!=="string"||typeof k!=="string"){throw new Error("Both name and url are required for constructing a resource.")}this.name=j;this.url=k;this.isDataUrl=this.url.indexOf("data:")===0;this.data=null;this.crossOrigin=l.crossOrigin===true?"anonymous":null;this.loadType=l.loadType||this._determineLoadType();this.xhrType=l.xhrType;this.error=null;this.xhr=null;this.isJson=false;this.isXml=false;this.isImage=false;this.isAudio=false;this.isVideo=false;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}t.prototype=Object.create(a.prototype);t.prototype.constructor=t;s.exports=t;t.prototype.complete=function(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError);this.data.removeEventListener("load",this._boundComplete);this.data.removeEventListener("progress",this._boundOnProgress);this.data.removeEventListener("canplaythrough",this._boundComplete)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError);this.xhr.removeEventListener("abort",this._boundXhrOnAbort);this.xhr.removeEventListener("progress",this._boundOnProgress);this.xhr.removeEventListener("load",this._boundXhrOnLoad)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}this.emit("complete",this)};t.prototype.load=function(j){this.emit("start",this);if(j){this.once("complete",j)}if(typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case t.LOAD_TYPE.IMAGE:this._loadImage();break;case t.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case t.LOAD_TYPE.VIDEO:this._loadElement("video");break;case t.LOAD_TYPE.XHR:default:if(b&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};t.prototype._loadImage=function(){this.data=new Image();if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}this.data.src=this.url;this.isImage=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};t.prototype._loadElement=function(j){if(j==="audio"&&typeof Audio!=="undefined"){this.data=new Audio()}else{this.data=document.createElement(j)}if(this.data===null){this.error=new Error("Unsupported element "+j);this.complete();return}if(navigator.isCocoonJS){this.data.src=Array.isArray(this.url)?this.url[0]:this.url}else{if(Array.isArray(this.url)){for(var k=0;k<this.url.length;++k){this.data.appendChild(this._createSource(j,this.url[k]))}}else{this.data.appendChild(this._createSource(j,this.url))}}this["is"+j[0].toUpperCase()+j.substring(1)]=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};t.prototype._loadXhr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var j=this.xhr=new XMLHttpRequest();j.open("GET",this.url,true);if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT){j.responseType=t.XHR_RESPONSE_TYPE.TEXT}else{j.responseType=this.xhrType}j.addEventListener("error",this._boundXhrOnError,false);j.addEventListener("abort",this._boundXhrOnAbort,false);j.addEventListener("progress",this._boundOnProgress,false);j.addEventListener("load",this._boundXhrOnLoad,false);j.send()};t.prototype._loadXdr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var j=this.xhr=new XDomainRequest();j.timeout=5000;j.onerror=this._boundXhrOnError;j.ontimeout=this._boundXdrOnTimeout;j.onprogress=this._boundOnProgress;j.onload=this._boundXhrOnLoad;j.open("GET",this.url,true);setTimeout(function(){j.send()},0)};t.prototype._createSource=function(l,m,j){if(!j){j=l+"/"+m.substr(m.lastIndexOf(".")+1)}var k=document.createElement("source");k.src=m;k.type=j;return k};t.prototype._onError=function(j){this.error=new Error("Failed to load element using "+j.target.nodeName);this.complete()};t.prototype._onProgress=function(j){if(j&&j.lengthComputable){this.emit("progress",this,j.loaded/j.total)}};t.prototype._xhrOnError=function(){this.error=new Error(u(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};t.prototype._xhrOnAbort=function(){this.error=new Error(u(this.xhr)+" Request was aborted by the user.");this.complete()};t.prototype._xdrOnTimeout=function(){this.error=new Error(u(this.xhr)+" Request timed out.");this.complete()};t.prototype._xhrOnLoad=function(){var l=this.xhr,n=l.status!==undefined?l.status:200;if(n===200||n===204||(n===0&&l.responseText.length>0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT){this.data=l.responseText}else{if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(l.responseText);this.isJson=true}catch(m){this.error=new Error("Error trying to parse loaded json:",m)}}else{if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var j=new DOMParser();this.data=j.parseFromString(l.responseText,"text/xml")}else{var k=document.createElement("div");k.innerHTML=l.responseText;this.data=k}this.isXml=true}catch(m){this.error=new Error("Error trying to parse loaded xml:",m)}}else{this.data=l.response||l.responseText}}}}else{this.error=new Error("["+l.status+"]"+l.statusText+":"+l.responseURL)}this.complete()};function u(j){return j.toString().replace("object ","")}t.prototype._determineCrossOrigin=function(k,j){if(k.indexOf("data:")===0){return""}j=j||window.location;if(!q){q=document.createElement("a")}q.href=k;k=d.parse(q.href);var l=(!k.port&&j.port==="")||(k.port===j.port);if(k.hostname!==j.hostname||!l||k.protocol!==j.protocol){return"anonymous"}return""};t.prototype._determineXhrType=function(){return t._xhrTypeMap[this._getExtension()]||t.XHR_RESPONSE_TYPE.TEXT};t.prototype._determineLoadType=function(){return t._loadTypeMap[this._getExtension()]||t.LOAD_TYPE.XHR};t.prototype._getExtension=function(){var m=this.url,l;if(this.isDataUrl){var j=m.indexOf("/");l=m.substring(j+1,m.indexOf(";",j))}else{var k=m.indexOf("?");if(k!==-1){m=m.substring(0,k)}l=m.substring(m.lastIndexOf(".")+1)}return l};t.prototype._getMimeFromXhrType=function(j){switch(j){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};t.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};t.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};t.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE};t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT};t.setExtensionLoadType=function(j,k){r(t._loadTypeMap,j,k)};t.setExtensionXhrType=function(j,k){r(t._xhrTypeMap,j,k)};function r(l,j,k){if(j&&j.indexOf(".")===0){j=j.substring(1)}if(!j){return}l[j]=k}},{eventemitter3:125,url:8}],128:[function(b,a,c){a.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(q){var r="";var t;var s=new Array(4);var u=0;var p=0;var d=0;while(u<q.length){t=new Array(3);for(p=0;p<t.length;p++){if(u<q.length){t[p]=q.charCodeAt(u++)&255}else{t[p]=0}}s[0]=t[0]>>2;s[1]=((t[0]&3)<<4)|(t[1]>>4);s[2]=((t[1]&15)<<2)|(t[2]>>6);s[3]=t[2]&63;d=u-(q.length-1);switch(d){case 2:s[3]=64;s[2]=64;break;case 1:s[3]=64;break;default:break}for(p=0;p<s.length;p++){r+=this._keyStr.charAt(s[p])}}return r}}},{}],129:[function(b,a,c){a.exports=b("./Loader");a.exports.Resource=b("./Resource");a.exports.middleware={caching:{memory:b("./middlewares/caching/memory")},parsing:{blob:b("./middlewares/parsing/blob")}}},{"./Loader":126,"./Resource":127,"./middlewares/caching/memory":130,"./middlewares/parsing/blob":131}],130:[function(b,a,c){var d={};a.exports=function(){return function(l,m){if(d[l.url]){l.data=d[l.url];l.complete()}else{l.once("complete",function(){d[this.url]=this.data});m()}}}},{}],131:[function(d,b,k){var a=d("../../Resource"),c=d("../../b64");window.URL=window.URL||window.webkitURL;b.exports=function(){return function(j,o){if(!j.data){return o()}if(j.xhr&&j.xhrType===a.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof j.data==="string"){var p=j.xhr.getResponseHeader("content-type");if(p&&p.indexOf("image")===0){j.data=new Image();j.data.src="data:"+p+";base64,"+c.encodeBinary(j.xhr.responseText);j.isImage=true;j.data.onload=function(){j.data.onload=null;o()}}}else{if(j.data.type.indexOf("image")===0){var q=URL.createObjectURL(j.data);j.blob=j.data;j.data=new Image();j.data.src=q;j.isImage=true;j.data.onload=function(){URL.revokeObjectURL(q);j.data.onload=null;o()}}}}else{o()}}}},{"../../Resource":127,"../../b64":128}]},{},[105])(105)});
/*! PixiParticles 1.5.2 */
(function(i){window.cloudkid=window.cloudkid||{};var k=PIXI.BLEND_MODES||PIXI.blendModes;var j={};var h=j.DEG_TO_RADS=Math.PI/180;j.useAPI3=false;var g=PIXI.VERSION;if(g&&parseInt(g.substring(0,g.indexOf(".")))>=3){j.useAPI3=true}j.rotatePoint=function(b,c){if(!b){return}b*=h;var f=Math.sin(b);var a=Math.cos(b);var d=c.x*a-c.y*f;var m=c.x*f+c.y*a;c.x=d;c.y=m};j.combineRGBComponents=function(a,b,c){return a<<16|b<<8|c};j.normalize=function(b){var a=1/j.length(b);b.x*=a;b.y*=a};j.scaleBy=function(b,a){b.x*=a;b.y*=a};j.length=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};j.hexToRGB=function(b,c){if(c){c.length=0}else{c=[]}if(b.charAt(0)=="#"){b=b.substr(1)}else{if(b.indexOf("0x")===0){b=b.substr(2)}}var a;if(b.length==8){a=b.substr(0,2);b=b.substr(2)}c.push(parseInt(b.substr(0,2),16));c.push(parseInt(b.substr(2,2),16));c.push(parseInt(b.substr(4,2),16));if(a){c.push(parseInt(a,16))}return c};j.generateEase=function(b){var a=b.length;var c=1/a;var d=function(q){var o,f;var p=(a*q)|0;o=(q-(p*c))*a;f=b[p]||b[a-1];return(f.s+o*(2*(1-o)*(f.cp-f.s)+o*(f.e-f.s)))};return d};j.getBlendMode=function(a){if(!a){return k.NORMAL}a=a.toUpperCase();while(a.indexOf(" ")>=0){a=a.replace(" ","_")}return k[a]||k.NORMAL};cloudkid.ParticleUtils=j;if(!Array.prototype.shuffle){Object.defineProperty(Array.prototype,"shuffle",{enumerable:false,writable:false,value:function(){for(var b,c,a=this.length;a;b=Math.floor(Math.random()*a),c=this[--a],this[a]=this[b],this[b]=c){}return this}})}if(!Array.prototype.random){Object.defineProperty(Array.prototype,"random",{enumerable:false,writable:false,value:function(){return this[Math.floor(Math.random()*this.length)]}})}}());(function(k,p){var l=k.ParticleUtils;var r=PIXI.Sprite;var m;var n=l.useAPI3;if(!n){var q=document.createElement("canvas");q.width=q.height=1;m=PIXI.Texture.fromCanvas(q)}var o=function(a){if(n){r.call(this)}else{r.call(this,m)}this.emitter=a;this.anchor.x=this.anchor.y=0.5;this.velocity=new PIXI.Point();this.maxLife=0;this.age=0;this.ease=null;this.extraData=null;this.startAlpha=0;this.endAlpha=0;this.startSpeed=0;this.endSpeed=0;this.acceleration=new PIXI.Point();this.startScale=0;this.endScale=0;this.startColor=null;this._sR=0;this._sG=0;this._sB=0;this.endColor=null;this._eR=0;this._eG=0;this._eB=0;this._doAlpha=false;this._doScale=false;this._doSpeed=false;this._doAcceleration=false;this._doColor=false;this._doNormalMovement=false;this._oneOverLife=0;this.next=null;this.prev=null;this.init=this.init;this.Particle_init=this.Particle_init;this.update=this.update;this.Particle_update=this.Particle_update;this.applyArt=this.applyArt;this.kill=this.kill};var s=o.prototype=Object.create(r.prototype);s.init=s.Particle_init=function(){this.age=0;this.velocity.x=this.startSpeed;this.velocity.y=0;l.rotatePoint(this.rotation,this.velocity);this.rotation*=l.DEG_TO_RADS;this.rotationSpeed*=l.DEG_TO_RADS;this.alpha=this.startAlpha;this.scale.x=this.scale.y=this.startScale;if(this.startColor){this._sR=this.startColor[0];this._sG=this.startColor[1];this._sB=this.startColor[2];if(this.endColor){this._eR=this.endColor[0];this._eG=this.endColor[1];this._eB=this.endColor[2]}}this._doAlpha=this.startAlpha!=this.endAlpha;this._doSpeed=this.startSpeed!=this.endSpeed;this._doScale=this.startScale!=this.endScale;this._doColor=!!this.endColor;this._doAcceleration=this.acceleration.x!==0||this.acceleration.y!==0;this._doNormalMovement=this._doSpeed||this.startSpeed!==0||this._doAcceleration;this._oneOverLife=1/this.maxLife;this.tint=l.combineRGBComponents(this._sR,this._sG,this._sB);this.visible=true};s.applyArt=function(a){if(n){this.texture=a}else{this.setTexture(a)}};s.updateParticle=s.Particle_update=function(d){this.age+=d;if(this.age>=this.maxLife){this.kill();return -1}var b=this.age*this._oneOverLife;if(this.ease){if(this.ease.length==4){b=this.ease(b,0,1,1)}else{b=this.ease(b)}}if(this._doAlpha){this.alpha=(this.endAlpha-this.startAlpha)*b+this.startAlpha}if(this._doScale){var f=(this.endScale-this.startScale)*b+this.startScale;this.scale.x=this.scale.y=f}if(this._doNormalMovement){if(this._doSpeed){var g=(this.endSpeed-this.startSpeed)*b+this.startSpeed;l.normalize(this.velocity);l.scaleBy(this.velocity,g)}else{if(this._doAcceleration){this.velocity.x+=this.acceleration.x*d;this.velocity.y+=this.acceleration.y*d}}this.position.x+=this.velocity.x*d;this.position.y+=this.velocity.y*d}if(this._doColor){var h=(this._eR-this._sR)*b+this._sR;var a=(this._eG-this._sG)*b+this._sG;var c=(this._eB-this._sB)*b+this._sB;this.tint=l.combineRGBComponents(h,a,c)}if(this.rotationSpeed!==0){this.rotation+=this.rotationSpeed*d}else{if(this.acceleration){this.rotation=Math.atan2(this.velocity.y,this.velocity.x)}}return b};s.kill=function(){this.emitter.recycle(this)};s.destroy=function(){this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null};o.parseArt=function(a){var b;for(b=a.length;b>=0;--b){if(typeof a[b]=="string"){a[b]=PIXI.Texture.fromImage(a[b])}}if(true){for(b=a.length-1;b>0;--b){if(a[b].baseTexture!=a[b-1].baseTexture){if(window.console){break}}}}return a};o.parseData=function(a){return a};k.Particle=o}(cloudkid));(function(k,p){var l=k.ParticleUtils;var r=PIXI.extras.MovieClip;var m;var n=l.useAPI3;if(!n){var q=document.createElement("canvas");q.width=q.height=1;m=PIXI.Texture.fromCanvas(q)}var o=function(a){if(n){var b=[];a.particleImages.forEach(function(d,c){b.push({texture:d,time:a.frameTimes[c]})});r.call(this,b)}else{r.call(this,m)}this.emitter=a;this.anchor.x=this.anchor.y=0.5;this.velocity=new PIXI.Point();this.maxLife=0;this.age=0;this.ease=null;this.extraData=null;this.startAlpha=0;this.endAlpha=0;this.startSpeed=0;this.endSpeed=0;this.acceleration=new PIXI.Point();this.startScale=0;this.endScale=0;this.startColor=null;this._sR=0;this._sG=0;this._sB=0;this.endColor=null;this._eR=0;this._eG=0;this._eB=0;this._doAlpha=false;this._doScale=false;this._doSpeed=false;this._doAcceleration=false;this._doColor=false;this._doNormalMovement=false;this._oneOverLife=0;this.next=null;this.prev=null;this.init=this.init;this.Particle_init=this.Particle_init;this.update=this.update;this.Particle_update=this.Particle_update;this.applyArt=this.applyArt;this.kill=this.kill};var s=o.prototype=Object.create(r.prototype);s.init=s.Particle_init=function(){this.age=0;this.velocity.x=this.startSpeed;this.velocity.y=0;l.rotatePoint(this.rotation,this.velocity);this.rotation*=l.DEG_TO_RADS;this.rotationSpeed*=l.DEG_TO_RADS;this.alpha=this.startAlpha;this.scale.x=this.scale.y=this.startScale;if(this.startColor){this._sR=this.startColor[0];this._sG=this.startColor[1];this._sB=this.startColor[2];if(this.endColor){this._eR=this.endColor[0];this._eG=this.endColor[1];this._eB=this.endColor[2]}}this._doAlpha=this.startAlpha!=this.endAlpha;this._doSpeed=this.startSpeed!=this.endSpeed;this._doScale=this.startScale!=this.endScale;this._doColor=!!this.endColor;this._doAcceleration=this.acceleration.x!==0||this.acceleration.y!==0;this._doNormalMovement=this._doSpeed||this.startSpeed!==0||this._doAcceleration;this._oneOverLife=1/this.maxLife;this.tint=l.combineRGBComponents(this._sR,this._sG,this._sB);this.visible=true};s.applyArt=function(a){if(n){this.texture=a}else{this.setTexture(a)}};s.updateParticle=s.Particle_update=function(d){this.age+=d;if(this.age>=this.maxLife){this.kill();return -1}var b=this.age*this._oneOverLife;if(this.ease){if(this.ease.length==4){b=this.ease(b,0,1,1)}else{b=this.ease(b)}}if(this._doAlpha){this.alpha=(this.endAlpha-this.startAlpha)*b+this.startAlpha}if(this._doScale){var f=(this.endScale-this.startScale)*b+this.startScale;this.scale.x=this.scale.y=f}if(this._doNormalMovement){if(this._doSpeed){var g=(this.endSpeed-this.startSpeed)*b+this.startSpeed;l.normalize(this.velocity);l.scaleBy(this.velocity,g)}else{if(this._doAcceleration){this.velocity.x+=this.acceleration.x*d;this.velocity.y+=this.acceleration.y*d}}this.position.x+=this.velocity.x*d;this.position.y+=this.velocity.y*d}if(this._doColor){var h=(this._eR-this._sR)*b+this._sR;var a=(this._eG-this._sG)*b+this._sG;var c=(this._eB-this._sB)*b+this._sB;this.tint=l.combineRGBComponents(h,a,c)}if(this.rotationSpeed!==0){this.rotation+=this.rotationSpeed*d}else{if(this.acceleration){this.rotation=Math.atan2(this.velocity.y,this.velocity.x)}}return b};s.kill=function(){this.emitter.recycle(this)};s.destroy=function(){this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null};o.parseArt=function(a){var b;for(b=a.length;b>=0;--b){if(typeof a[b]=="string"){a[b]=PIXI.Texture.fromImage(a[b])}}if(true){for(b=a.length-1;b>0;--b){if(a[b].baseTexture!=a[b-1].baseTexture){if(window.console){break}}}}return a};o.parseData=function(a){return a};k.ParticleMovie=o}(cloudkid));(function(j,l){var n=j.ParticleUtils,k=j.Particle,p=PIXI.ParticleContainer;var q=function(a,c,b){this._particleConstructor=k;this.particleImages=null;this.startAlpha=1;this.endAlpha=1;this.startSpeed=0;this.endSpeed=0;this.acceleration=null;this.startScale=1;this.endScale=1;this.minimumScaleMultiplier=1;this.startColor=null;this.endColor=null;this.minLifetime=0;this.maxLifetime=0;this.minStartRotation=0;this.maxStartRotation=0;this.minRotationSpeed=0;this.maxRotationSpeed=0;this.particleBlendMode=0;this.customEase=null;this.extraData=null;this._frequency=1;this.maxParticles=1000;this.emitterLifetime=-1;this.spawnPos=null;this.spawnType=null;this._spawnFunc=null;this.spawnRect=null;this.spawnCircle=null;this.particlesPerWave=1;this.particleSpacing=0;this.angleStart=0;this.rotation=0;this.ownerPos=null;this._prevEmitterPos=null;this._prevPosIsValid=false;this._posChanged=false;this._parentIsPC=false;this._parent=null;this.addAtBack=false;this.particleCount=0;this._emit=false;this._spawnTimer=0;this._emitterLife=-1;this._activeParticlesFirst=null;this._activeParticlesLast=null;this._poolFirst=null;this._origConfig=null;this._origArt=null;this.parent=a;if(c&&b){this.init(c,b)}this.recycle=this.recycle;this.update=this.update;this.rotate=this.rotate;this.updateSpawnPos=this.updateSpawnPos;this.updateOwnerPos=this.updateOwnerPos};var o=q.prototype={};var m=new PIXI.Point();Object.defineProperty(o,"frequency",{get:function(){return this._frequency},set:function(a){if(typeof a=="number"&&a>0){this._frequency=a}else{this._frequency=1}}});Object.defineProperty(o,"particleConstructor",{get:function(){return this._particleConstructor},set:function(b){if(b!=this._particleConstructor){this._particleConstructor=b;this.cleanup();for(var a=this._poolFirst;a;a=a.next){a.destroy()}this._poolFirst=null;if(this._origConfig&&this._origArt){this.init(this._origArt,this._origConfig)}}}});Object.defineProperty(o,"parent",{get:function(){return this._parent},set:function(a){this.cleanup();this._parent=a;this._parentIsPC=p&&a&&a instanceof p}});o.init=function(g,d){if(!g||!d){return}this.cleanup();this._origConfig=d;this._origArt=g;g=Array.isArray(g)?g.slice():[g];var f=this._particleConstructor;this.particleImages=f.parseArt?f.parseArt(g):g;if(d.alpha){this.startAlpha=d.alpha.start;this.endAlpha=d.alpha.end}else{this.startAlpha=this.endAlpha=1}if(d.speed){this.startSpeed=d.speed.start;this.endSpeed=d.speed.end}else{this.startSpeed=this.endSpeed=0}var b=d.acceleration;if(b&&(b.x||b.y)){this.endSpeed=this.startSpeed;this.acceleration=new PIXI.Point(b.x,b.y)}else{this.acceleration=new PIXI.Point()}if(d.scale){this.startScale=d.scale.start;this.endScale=d.scale.end;this.minimumScaleMultiplier=d.scale.minimumScaleMultiplier||1}else{this.startScale=this.endScale=this.minimumScaleMultiplier=1}if(d.color){this.startColor=n.hexToRGB(d.color.start);if(d.color.start!=d.color.end){this.endColor=n.hexToRGB(d.color.end)}else{this.endColor=null}}if(d.startRotation){this.minStartRotation=d.startRotation.min;this.maxStartRotation=d.startRotation.max}else{this.minStartRotation=this.maxStartRotation=0}if(d.rotationSpeed){this.minRotationSpeed=d.rotationSpeed.min;this.maxRotationSpeed=d.rotationSpeed.max}else{this.minRotationSpeed=this.maxRotationSpeed=0}this.minLifetime=d.lifetime.min;this.maxLifetime=d.lifetime.max;this.particleBlendMode=n.getBlendMode(d.blendMode);if(d.ease){this.customEase=typeof d.ease=="function"?d.ease:n.generateEase(d.ease)}else{this.customEase=null}if(f.parseData){this.extraData=f.parseData(d.extraData)}else{this.extraData=d.extraData||null}this.spawnRect=this.spawnCircle=null;this.particlesPerWave=1;this.particleSpacing=0;this.angleStart=0;var a;switch(d.spawnType){case"rect":this.spawnType="rect";this._spawnFunc=this._spawnRect;var c=d.spawnRect;this.spawnRect=new PIXI.Rectangle(c.x,c.y,c.w,c.h);break;case"circle":this.spawnType="circle";this._spawnFunc=this._spawnCircle;a=d.spawnCircle;this.spawnCircle=new PIXI.Circle(a.x,a.y,a.r);break;case"ring":this.spawnType="ring";this._spawnFunc=this._spawnRing;a=d.spawnCircle;this.spawnCircle=new PIXI.Circle(a.x,a.y,a.r);this.spawnCircle.minRadius=a.minR;break;case"burst":this.spawnType="burst";this._spawnFunc=this._spawnBurst;this.particlesPerWave=d.particlesPerWave;this.particleSpacing=d.particleSpacing;this.angleStart=d.angleStart?d.angleStart:0;break;case"point":this.spawnType="point";this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point";this._spawnFunc=this._spawnPoint;break}this.frequency=d.frequency;this.emitterLifetime=d.emitterLifetime||-1;this.maxParticles=d.maxParticles>0?d.maxParticles:1000;this.addAtBack=!!d.addAtBack;this.rotation=0;this.ownerPos=new PIXI.Point();this.spawnPos=new PIXI.Point(d.pos.x,d.pos.y);this._prevEmitterPos=this.spawnPos.clone();this._prevPosIsValid=false;this._spawnTimer=0;this.emit=true};o.recycle=function(a){if(a.next){a.next.prev=a.prev}if(a.prev){a.prev.next=a.next}if(a===this._activeParticlesLast){this._activeParticlesLast=a.prev}if(a===this._activeParticlesFirst){this._activeParticlesFirst=a.next}a.prev=null;a.next=this._poolFirst;this._poolFirst=a;if(this._parentIsPC){a.alpha=0;a.visible=false}else{if(a.parent){a.parent.removeChild(a)}}--this.particleCount;if(Sys.isDefined(a.stop)){a.stop()}};o.rotate=function(b){if(this.rotation==b){return}var a=b-this.rotation;this.rotation=b;n.rotatePoint(a,this.spawnPos);this._posChanged=true};o.updateSpawnPos=function(b,a){this._posChanged=true;this.spawnPos.x=b;this.spawnPos.y=a};o.updateOwnerPos=function(b,a){this._posChanged=true;this.ownerPos.x=b;this.ownerPos.y=a};o.resetPositionTracking=function(){this._prevPosIsValid=false};Object.defineProperty(o,"emit",{get:function(){return this._emit},set:function(a){this._emit=!!a;this._emitterLife=this.emitterLifetime}});o.update=function(d){var b,F,a;for(F=this._activeParticlesFirst;F;F=a){a=F.next;F.updateParticle(d)}var D,E;if(this._prevPosIsValid){D=this._prevEmitterPos.x;E=this._prevEmitterPos.y}var h=this.ownerPos.x+this.spawnPos.x;var B=this.ownerPos.y+this.spawnPos.y;if(this.emit){this._spawnTimer-=d;while(this._spawnTimer<=0){if(this._emitterLife>0){this._emitterLife-=this._frequency;if(this._emitterLife<=0){this._spawnTimer=0;this._emitterLife=0;this.emit=false;break}}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}var c;if(this.minLifetime==this.maxLifetime){c=this.minLifetime}else{c=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime}if(-this._spawnTimer<c){var G,J;if(this._prevPosIsValid&&this._posChanged){var f=1+this._spawnTimer/d;G=(h-D)*f+D;J=(B-E)*f+E}else{G=h;J=B}b=0;for(var H=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);b<H;++b){var i;if(this._poolFirst){i=this._poolFirst;this._poolFirst=this._poolFirst.next;i.next=null}else{i=new this.particleConstructor(this)}if(this.particleImages.length>1){if(Sys.isDefined(i.play)){i.gotoAndPlay(Sys.Math.randomIntBetween(0,i.totalFrames));i.animationSpeed=Sys.Math.randomBetween(0.8,1.2)}else{i.applyArt(this.particleImages.random())}}else{i.applyArt(this.particleImages[0])}i.startAlpha=this.startAlpha;i.endAlpha=this.endAlpha;i.startSpeed=this.startSpeed;i.endSpeed=this.endSpeed;i.acceleration.x=this.acceleration.x;i.acceleration.y=this.acceleration.y;if(this.minimumScaleMultiplier!=1){var C=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier;i.startScale=this.startScale*C;i.endScale=this.endScale*C}else{i.startScale=this.startScale;i.endScale=this.endScale}i.startColor=this.startColor;i.endColor=this.endColor;if(this.minRotationSpeed==this.maxRotationSpeed){i.rotationSpeed=this.minRotationSpeed}else{i.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed}i.maxLife=c;i.blendMode=this.particleBlendMode;i.ease=this.customEase;i.extraData=this.extraData;this._spawnFunc(i,G,J,b);i.init();i.updateParticle(-this._spawnTimer);if(!this._parentIsPC||!i.parent){if(this.addAtBack){this._parent.addChildAt(i,0)}else{this._parent.addChild(i)}}else{var g=this._parent.children;var I=g.indexOf(i);if(I<1){g.shift()}else{if(I==g.length-1){g.pop()}else{g.splice(I,1)}}if(this.addAtBack){g.unshift(i)}else{g.push(i)}}if(this._activeParticlesLast){this._activeParticlesLast.next=i;i.prev=this._activeParticlesLast;this._activeParticlesLast=i}else{this._activeParticlesLast=this._activeParticlesFirst=i}++this.particleCount}}this._spawnTimer+=this._frequency}}if(this._posChanged){this._prevEmitterPos.x=h;this._prevEmitterPos.y=B;this._prevPosIsValid=true;this._posChanged=false}};o._spawnPoint=function(a,c,d,b){if(this.minStartRotation==this.maxStartRotation){a.rotation=this.minStartRotation+this.rotation}else{a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation}a.position.x=c;a.position.y=d};o._spawnRect=function(a,c,d,b){if(this.minStartRotation==this.maxStartRotation){a.rotation=this.minStartRotation+this.rotation}else{a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation}m.x=Math.random()*this.spawnRect.width+this.spawnRect.x;m.y=Math.random()*this.spawnRect.height+this.spawnRect.y;if(this.rotation!==0){n.rotatePoint(this.rotation,m)}a.position.x=c+m.x;a.position.y=d+m.y};o._spawnCircle=function(a,c,d,b){if(this.minStartRotation==this.maxStartRotation){a.rotation=this.minStartRotation+this.rotation}else{a.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation}m.x=Math.random()*this.spawnCircle.radius;m.y=0;n.rotatePoint(Math.random()*360,m);m.x+=this.spawnCircle.x;m.y+=this.spawnCircle.y;if(this.rotation!==0){n.rotatePoint(this.rotation,m)}a.position.x=c+m.x;a.position.y=d+m.y};o._spawnRing=function(g,c,d,b){var a=this.spawnCircle;if(this.minStartRotation==this.maxStartRotation){g.rotation=this.minStartRotation+this.rotation}else{g.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation}if(a.minRadius==a.radius){m.x=Math.random()*(a.radius-a.minRadius)+a.minRadius}else{m.x=a.radius}m.y=0;var f=Math.random()*360;g.rotation+=f;n.rotatePoint(f,m);m.x+=this.spawnCircle.x;m.y+=this.spawnCircle.y;if(this.rotation!==0){n.rotatePoint(this.rotation,m)}g.position.x=c+m.x;g.position.y=d+m.y};o._spawnBurst=function(a,c,d,b){if(this.particleSpacing===0){a.rotation=Math.random()*360}else{a.rotation=this.angleStart+(this.particleSpacing*b)+this.rotation}a.position.x=c;a.position.y=d};o.cleanup=function(){var a,b;for(a=this._activeParticlesFirst;a;a=b){b=a.next;this.recycle(a);if(a.parent){a.parent.removeChild(a)}}this._activeParticlesFirst=this._activeParticlesLast=null;this.particleCount=0};o.destroy=function(){this.cleanup();for(var a=this._poolFirst;a;a=a.next){a.destroy()}this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null};j.Emitter=q}(cloudkid));(function e(h,j,l){function m(a,c){if(!j[a]){if(!h[a]){var d=typeof require=="function"&&require;if(!c&&d){return d(a,!0)}if(i){return i(a,!0)}var b=new Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}var f=j[a]={exports:{}};h[a][0].call(f.exports,function(g){var n=h[a][1][g];return m(n?n:g)},f,f.exports,e,h,j,l)}return j[a].exports}var i=typeof require=="function"&&require;for(var k=0;k<l.length;k++){m(l[k])}return m})({1:[function(d,g,f){g.exports=PIXI.spine={Spine:d("./Spine"),SpineRuntime:d("./SpineRuntime"),loaders:d("./loaders")}},{"./Spine":43,"./SpineRuntime":41,"./loaders":46}],2:[function(f,i,g){var h=f("../SpineUtil");h.Animation=function(c,b,a){this.name=c;this.timelines=b;this.duration=a};h.Animation.prototype={apply:function(a,b,c,q,d){if(q&&this.duration!=0){c%=this.duration;b%=this.duration}var n=this.timelines;for(var p=0,r=n.length;p<r;p++){n[p].apply(a,b,c,d,1)}},mix:function(q,t,r,c,a,n){if(c&&this.duration!=0){r%=this.duration;t%=this.duration}var b=this.timelines;for(var d=0,s=b.length;d<s;d++){b[d].apply(q,t,r,a,n)}}};h.Animation.binarySearch=function(l,a,d){var m=0;var c=Math.floor(l.length/d)-2;if(!c){return d}var b=c>>>1;while(true){if(l[(b+1)*d]<=a){m=b+1}else{c=b}if(m==c){return(m+1)*d}b=(m+c)>>>1}};h.Animation.binarySearch1=function(d,a){var k=0;var c=d.length-2;if(!c){return 1}var b=c>>>1;while(true){if(d[b+1]<=a){k=b+1}else{c=b}if(k==c){return k+1}b=(k+c)>>>1}};h.Animation.linearSearch=function(l,a,b){for(var d=0,c=l.length-b;d<=c;d+=b){if(l[d]>a){return d}}return -1};i.exports=h.Animation},{"../SpineUtil":42}],3:[function(f,i,g){var h=f("../SpineUtil");h.TrackEntry=f("./TrackEntry");h.AnimationState=function(a){this.data=a;this.tracks=[];this.events=[]};h.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var d=0;d<this.tracks.length;d++){var b=this.tracks[d];if(!b){continue}b.time+=a*b.timeScale;if(b.previous){var l=a*b.previous.timeScale;b.previous.time+=l;b.mixTime+=l}var c=b.next;if(c){c.time=b.lastTime-c.delay;if(c.time>=0){this.setCurrent(d,c)}}else{if(!b.loop&&b.lastTime>=b.endTime){this.clearTrack(d)}}}},apply:function(x){x.resetDrawOrder();for(var w=0;w<this.tracks.length;w++){var b=this.tracks[w];if(!b){continue}this.events.length=0;var z=b.time;var A=b.lastTime;var d=b.endTime;var v=b.loop;if(!v&&z>d){z=d}var u=b.previous;if(!u){if(b.mix==1){b.animation.apply(x,b.lastTime,z,v,this.events)}else{b.animation.mix(x,b.lastTime,z,v,this.events,b.mix)}}else{var a=u.time;if(!u.loop&&a>u.endTime){a=u.endTime}u.animation.apply(x,a,a,u.loop,null);var y=b.mixTime/b.mixDuration*b.mix;if(y>=1){y=1;b.previous=null}b.animation.mix(x,b.lastTime,z,v,this.events,y)}for(var D=0,C=this.events.length;D<C;D++){var B=this.events[D];if(b.onEvent){b.onEvent(w,B)}if(this.onEvent){this.onEvent(w,B)}}if(v?(A%d>z%d):(A<d&&z>=d)){var c=Math.floor(z/d);if(b.onComplete){b.onComplete(w,c)}if(this.onComplete){this.onComplete(w,c)}}b.lastTime=b.time}},clearTracks:function(){for(var b=0,a=this.tracks.length;b<a;b++){this.clearTrack(b)}this.tracks.length=0},clearTrack:function(a){if(a>=this.tracks.length){return}var b=this.tracks[a];if(!b){return}if(b.onEnd){b.onEnd(a)}if(this.onEnd){this.onEnd(a)}this.tracks[a]=null},_expandToIndex:function(a){if(a<this.tracks.length){return this.tracks[a]}while(a>=this.tracks.length){this.tracks.push(null)}return null},setCurrent:function(d,b){var a=this._expandToIndex(d);if(a){var c=a.previous;a.previous=null;if(a.onEnd){a.onEnd(d)}if(this.onEnd){this.onEnd(d)}b.mixDuration=this.data.getMix(a.animation,b.animation);if(b.mixDuration>0){b.mixTime=0;if(c&&a.mixTime/a.mixDuration<0.5){b.previous=c}else{b.previous=a}}}this.tracks[d]=b;if(b.onStart){b.onStart(d)}if(this.onStart){this.onStart(d)}},setAnimationByName:function(a,c,d){var b=this.data.skeletonData.findAnimation(c);if(!b){throw"Animation not found: "+c}return this.setAnimation(a,b,d)},setAnimation:function(a,b,d){var c=new h.TrackEntry();c.animation=b;c.loop=d;c.endTime=b.duration;this.setCurrent(a,c);return c},addAnimationByName:function(a,c,k,d){var b=this.data.skeletonData.findAnimation(c);if(!b){throw"Animation not found: "+c}return this.addAnimation(a,b,k,d)},addAnimation:function(a,b,m,l){var c=new h.TrackEntry();c.animation=b;c.loop=m;c.endTime=b.duration;var d=this._expandToIndex(a);if(d){while(d.next){d=d.next}d.next=c}else{this.tracks[a]=c}if(l<=0){if(d){l+=d.endTime-this.data.getMix(d.animation,b)}else{l=0}}c.delay=l;return c},getCurrent:function(a){if(a>=this.tracks.length){return null}return this.tracks[a]}};i.exports=h.AnimationState},{"../SpineUtil":42,"./TrackEntry":39}],4:[function(f,i,g){var h=f("../SpineUtil");h.AnimationStateData=function(a){this.skeletonData=a;this.animationToMixTime={}};h.AnimationStateData.prototype={defaultMix:0,setMixByName:function(d,k,c){var a=this.skeletonData.findAnimation(d);if(!a){throw"Animation not found: "+d}var b=this.skeletonData.findAnimation(k);if(!b){throw"Animation not found: "+k}this.setMix(a,b,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=a.name+":"+b.name;return this.animationToMixTime.hasOwnProperty(c)?this.animationToMixTime[c]:this.defaultMix}};i.exports=h.AnimationStateData},{"../SpineUtil":42}],5:[function(f,i,g){var h=f("../SpineUtil");h.AtlasReader=f("./AtlasReader");h.AtlasPage=f("./AtlasPage");h.AtlasRegion=f("./AtlasRegion");h.Atlas=function(v,z,u){if(z&&z.lastIndexOf("/")!==(z.length-1)){z+="/"}this.pages=[];this.regions=[];this.texturesLoading=0;var E=this;var B=PIXI.utils.getResolutionOfUrl(z);var A=new h.AtlasReader(v);var b=[];b.length=4;var y=null;while(true){var D=A.readLine();if(D===null){break}D=A.trim(D);if(!D.length){y=null}else{if(!y){y=new h.AtlasPage();y.name=D;if(A.readTuple(b)==2){y.width=parseInt(b[0]);y.height=parseInt(b[1]);A.readTuple(b)}y.format=h.Atlas.Format[b[0]];A.readTuple(b);y.minFilter=h.Atlas.TextureFilter[b[0]];y.magFilter=h.Atlas.TextureFilter[b[1]];var c=A.readValue();y.uWrap=h.Atlas.TextureWrap.clampToEdge;y.vWrap=h.Atlas.TextureWrap.clampToEdge;if(c=="x"){y.uWrap=h.Atlas.TextureWrap.repeat}else{if(c=="y"){y.vWrap=h.Atlas.TextureWrap.repeat}else{if(c=="xy"){y.uWrap=y.vWrap=h.Atlas.TextureWrap.repeat}}}y.rendererObject=PIXI.BaseTexture.fromImage(z+D,u);this.pages.push(y)}else{var w=new h.AtlasRegion();w.name=D;w.page=y;w.rotate=A.readValue()=="true";A.readTuple(b);var d=parseInt(b[0])/B;var x=parseInt(b[1])/B;A.readTuple(b);var C=parseInt(b[0])/B;var a=parseInt(b[1])/B;w.u=d/y.width;w.v=x/y.height;if(w.rotate){w.u2=(d+a)/y.width;w.v2=(x+C)/y.height}else{w.u2=(d+C)/y.width;w.v2=(x+a)/y.height}w.x=d;w.y=x;w.width=Math.abs(C);w.height=Math.abs(a);if(A.readTuple(b)==4){w.splits=[parseInt(b[0]),parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(A.readTuple(b)==4){w.pads=[parseInt(b[0]),parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];A.readTuple(b)}}w.originalWidth=parseInt(b[0])/B;w.originalHeight=parseInt(b[1])/B;A.readTuple(b);w.offsetX=parseInt(b[0])/B;w.offsetY=parseInt(b[1])/B;w.index=parseInt(A.readValue());this.regions.push(w)}}}};h.Atlas.prototype={findRegion:function(d){var a=this.regions;for(var c=0,b=a.length;c<b;c++){if(a[c].name==d){return a[c]}}return null},dispose:function(){var c=this.pages;for(var b=0,a=c.length;b<a;b++){c[b].rendererObject.destroy(true)}},updateUVs:function(d){var a=this.regions;for(var l=0,b=a.length;l<b;l++){var c=a[l];if(c.page!=d){continue}c.u=c.x/d.width;c.v=c.y/d.height;if(c.rotate){c.u2=(c.x+c.height)/d.width;c.v2=(c.y+c.width)/d.height}else{c.u2=(c.x+c.width)/d.width;c.v2=(c.y+c.height)/d.height}}}};h.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};h.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};h.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};i.exports=h.Atlas},{"../SpineUtil":42,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9}],6:[function(f,i,g){var h=f("../SpineUtil");h.RegionAttachment=f("./RegionAttachment");h.MeshAttachment=f("./MeshAttachment");h.SkinnedMeshAttachment=f("./SkinnedMeshAttachment");h.BoundingBoxAttachment=f("./BoundingBoxAttachment");h.AtlasAttachmentParser=function(a){this.atlas=a};h.AtlasAttachmentParser.prototype={newRegionAttachment:function(b,k,c){var d=this.atlas.findRegion(c);if(!d){throw"Region not found in atlas: "+c+" (region attachment: "+k+")"}var a=new h.RegionAttachment(k);a.rendererObject=d;a.setUVs(d.u,d.v,d.u2,d.v2,d.rotate);a.regionOffsetX=d.offsetX;a.regionOffsetY=d.offsetY;a.regionWidth=d.width;a.regionHeight=d.height;a.regionOriginalWidth=d.originalWidth;a.regionOriginalHeight=d.originalHeight;return a},newMeshAttachment:function(b,k,c){var d=this.atlas.findRegion(c);if(!d){throw"Region not found in atlas: "+c+" (mesh attachment: "+k+")"}var a=new h.MeshAttachment(k);a.rendererObject=d;a.regionU=d.u;a.regionV=d.v;a.regionU2=d.u2;a.regionV2=d.v2;a.regionRotate=d.rotate;a.regionOffsetX=d.offsetX;a.regionOffsetY=d.offsetY;a.regionWidth=d.width;a.regionHeight=d.height;a.regionOriginalWidth=d.originalWidth;a.regionOriginalHeight=d.originalHeight;return a},newSkinnedMeshAttachment:function(b,k,c){var d=this.atlas.findRegion(c);if(!d){throw"Region not found in atlas: "+c+" (skinned mesh attachment: "+k+")"}var a=new h.SkinnedMeshAttachment(k);a.rendererObject=d;a.regionU=d.u;a.regionV=d.v;a.regionU2=d.u2;a.regionV2=d.v2;a.regionRotate=d.rotate;a.regionOffsetX=d.offsetX;a.regionOffsetY=d.offsetY;a.regionWidth=d.width;a.regionHeight=d.height;a.regionOriginalWidth=d.originalWidth;a.regionOriginalHeight=d.originalHeight;return a},newBoundingBoxAttachment:function(a,b){return new h.BoundingBoxAttachment(b)}};i.exports=h.AtlasAttachmentParser},{"../SpineUtil":42,"./BoundingBoxAttachment":14,"./MeshAttachment":27,"./RegionAttachment":28,"./SkinnedMeshAttachment":36}],7:[function(f,i,g){var h=f("../SpineUtil");h.AtlasPage=function(){};h.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0};i.exports=h.AtlasPage},{"../SpineUtil":42}],8:[function(f,i,g){var h=f("../SpineUtil");h.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)};h.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){if(this.index>=this.lines.length){return null}return this.lines[this.index++]},readValue:function(){var b=this.readLine();var a=b.indexOf(":");if(a==-1){throw"Invalid line: "+b}return this.trim(b.substring(a+1))},readTuple:function(m){var d=this.readLine();var b=d.indexOf(":");if(b==-1){throw"Invalid line: "+d}var c=0,a=b+1;for(;c<3;c++){var n=d.indexOf(",",a);if(n==-1){break}m[c]=this.trim(d.substr(a,n-a));a=n+1}m[c]=this.trim(d.substring(a));return c+1}};i.exports=h.AtlasReader},{"../SpineUtil":42}],9:[function(f,i,g){var h=f("../SpineUtil");h.AtlasRegion=function(){};h.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:false,splits:null,pads:null};i.exports=h.AtlasRegion},{"../SpineUtil":42}],10:[function(f,i,g){var h=f("../SpineUtil");h.Curves=f("./Curves");h.Animation=f("./Animation");h.AttachmentTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a;this.attachmentNames=[];this.attachmentNames.length=a};h.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b;this.attachmentNames[a]=c},apply:function(c,d,n,q,o){var b=this.frames;if(n<b[0]){if(d>n){this.apply(c,d,Number.MAX_VALUE,null,0)}return}else{if(d>n){d=-1}}var a=n>=b[b.length-1]?b.length-1:h.Animation.binarySearch1(b,n)-1;if(b[a]<d){return}var p=this.attachmentNames[a];c.slots[this.slotIndex].setAttachment(!p?null:c.getAttachmentBySlotIndex(this.slotIndex,p))}};i.exports=h.AttachmentTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],11:[function(f,i,g){var h=f("../SpineUtil");h.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3};i.exports=h.AttachmentType},{"../SpineUtil":42}],12:[function(f,i,g){var h=f("../SpineUtil");h.Bone=function(a,b,c){this.data=a;this.skeleton=b;this.parent=c;this.setToSetupPose()};h.Bone.yDown=false;h.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:false,flipY:false,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:false,worldFlipY:false,updateWorldTransform:function(){var c=this.parent;if(c){this.worldX=this.x*c.m00+this.y*c.m01+c.worldX;this.worldY=this.x*c.m10+this.y*c.m11+c.worldY;if(this.data.inheritScale){this.worldScaleX=c.worldScaleX*this.scaleX;this.worldScaleY=c.worldScaleY*this.scaleY}else{this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY}this.worldRotation=this.data.inheritRotation?(c.worldRotation+this.rotationIK):this.rotationIK;this.worldFlipX=c.worldFlipX!=this.flipX;this.worldFlipY=c.worldFlipY!=this.flipY}else{var d=this.skeleton.flipX,m=this.skeleton.flipY;this.worldX=d?-this.x:this.x;this.worldY=(m!=h.Bone.yDown)?-this.y:this.y;this.worldScaleX=this.scaleX;this.worldScaleY=this.scaleY;this.worldRotation=this.rotationIK;this.worldFlipX=d!=this.flipX;this.worldFlipY=m!=this.flipY}var a=this.worldRotation*h.degRad;var b=Math.cos(a);var l=Math.sin(a);if(this.worldFlipX){this.m00=-b*this.worldScaleX;this.m01=l*this.worldScaleY}else{this.m00=b*this.worldScaleX;this.m01=-l*this.worldScaleY}if(this.worldFlipY!=h.Bone.yDown){this.m10=-l*this.worldScaleX;this.m11=-b*this.worldScaleY}else{this.m10=l*this.worldScaleX;this.m11=b*this.worldScaleY}},setToSetupPose:function(){var a=this.data;this.x=a.x;this.y=a.y;this.rotation=a.rotation;this.rotationIK=this.rotation;this.scaleX=a.scaleX;this.scaleY=a.scaleY;this.flipX=a.flipX;this.flipY=a.flipY},worldToLocal:function(c){var p=c[0]-this.worldX,q=c[1]-this.worldY;var d=this.m00,a=this.m10,n=this.m01,b=this.m11;if(this.worldFlipX!=(this.worldFlipY!=h.Bone.yDown)){d=-d;b=-b}var o=1/(d*b-n*a);c[0]=p*d*o-q*n*o;c[1]=q*b*o-p*a*o},localToWorld:function(a){var b=a[0],c=a[1];a[0]=b*this.m00+c*this.m01+this.worldX;a[1]=b*this.m10+c*this.m11+this.worldY}};i.exports=h.Bone},{"../SpineUtil":42}],13:[function(f,i,g){var h=f("../SpineUtil");h.BoneData=function(b,a){this.name=b;this.parent=a};h.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:true,inheritRotation:true,flipX:false,flipY:false};i.exports=h.BoneData},{"../SpineUtil":42}],14:[function(f,i,g){var h=f("../SpineUtil");h.AttachmentType=f("./AttachmentType");h.BoundingBoxAttachment=function(a){this.name=a;this.vertices=[]};h.BoundingBoxAttachment.prototype={type:h.AttachmentType.boundingbox,computeWorldVertices:function(c,n,B,z){c+=B.worldX;n+=B.worldY;var A=B.m00,a=B.m01,v=B.m10,w=B.m11;var u=this.vertices;for(var x=0,y=u.length;x<y;x+=2){var b=u[x];var d=u[x+1];z[x]=b*A+d*a+c;z[x+1]=b*v+d*w+n}}};i.exports=h.BoundingBoxAttachment},{"../SpineUtil":42,"./AttachmentType":11}],15:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.ColorTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*5};h.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,n,m){a*=5;this.frames[a]=b;this.frames[a+1]=c;this.frames[a+2]=d;this.frames[a+3]=n;this.frames[a+4]=m},apply:function(L,b,J,a,K){var C=this.frames;if(J<C[0]){return}var B,d,c,F;if(J>=C[C.length-5]){var r=C.length-1;B=C[r-3];d=C[r-2];c=C[r-1];F=C[r]}else{var H=h.Animation.binarySearch(C,J,5);var N=C[H-4];var I=C[H-3];var E=C[H-2];var D=C[H-1];var G=C[H];var O=1-(J-G)/(C[H-5]-G);O=this.curves.getCurvePercent(H/5-1,O);B=N+(C[H+1]-N)*O;d=I+(C[H+2]-I)*O;c=E+(C[H+3]-E)*O;F=D+(C[H+4]-D)*O}var M=L.slots[this.slotIndex];if(K<1){M.r+=(B-M.r)*K;M.g+=(d-M.g)*K;M.b+=(c-M.b)*K;M.a+=(F-M.a)*K}else{M.r=B;M.g=d;M.b=c;M.a=F}}};i.exports=h.ColorTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],16:[function(f,i,g){var h=f("../SpineUtil");h.Curves=function(a){this.curves=[]};h.Curves.prototype={setLinear:function(a){this.curves[a*19]=0},setStepped:function(a){this.curves[a*19]=1},setCurve:function(T,R,c,S,d){var V=1/10,n=V*V,y=n*V;var Z=3*V,ab=3*n,ad=6*n,b=6*y;var x=-R*2+S,L=-c*2+d,X=(R-S)*3+1,Y=(c-d)*3+1;var a=R*Z+x*ab+X*y,K=c*Z+L*ab+Y*y;var U=x*ad+X*b,W=L*ad+Y*b;var aa=X*b,ac=Y*b;var N=T*19;var M=this.curves;M[N++]=2;var P=a,Q=K;for(var O=N+19-1;N<O;N+=2){M[N]=P;M[N+1]=Q;a+=U;K+=W;U+=aa;W+=ac;P+=a;Q+=K}},getCurvePercent:function(w,n){n=n<0?0:(n>1?1:n);var a=this.curves;var u=w*19;var d=a[u];if(d===0){return n}if(d==1){return 0}u++;var b=0;for(var x=u,v=u+19-1;u<v;u+=2){b=a[u];if(b>=n){var s,t;if(u==x){s=0;t=0}else{s=a[u-2];t=a[u-1]}return t+(a[u+1]-t)*(n-s)/(b-s)}}var c=a[u-1];return c+(1-c)*(n-b)/(1-b)}};i.exports=h.Curves},{"../SpineUtil":42}],17:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.DrawOrderTimeline=function(a){this.frames=[];this.frames.length=a;this.drawOrders=[];this.drawOrders.length=a};h.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,c,b){this.frames[a]=c;this.drawOrders[a]=b},apply:function(t,x,u,z,n){var b=this.frames;if(u<b[0]){return}var w;if(u>=b[b.length-1]){w=b.length-1}else{w=h.Animation.binarySearch1(b,u)-1}var y=t.drawOrder;var c=t.slots;var a=this.drawOrders[w];if(a){for(var d=0,v=a.length;d<v;d++){y[d]=a[d]}}}};i.exports=h.DrawOrderTimeline},{"../SpineUtil":42,"./Animation":2}],18:[function(f,i,g){var h=f("../SpineUtil");h.Event=function(a){this.data=a};h.Event.prototype={intValue:0,floatValue:0,stringValue:null};i.exports=h.Event},{"../SpineUtil":42}],19:[function(f,i,g){var h=f("../SpineUtil");h.EventData=function(a){this.name=a};h.EventData.prototype={intValue:0,floatValue:0,stringValue:null};i.exports=h.EventData},{"../SpineUtil":42}],20:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.EventTimeline=function(a){this.frames=[];this.frames.length=a;this.events=[];this.events.length=a};h.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b;this.events[a]=c},apply:function(p,u,q,a,d){if(!a){return}var c=this.frames;var r=c.length;if(u>q){this.apply(p,u,Number.MAX_VALUE,a,d);u=-1}else{if(u>=c[r-1]){return}}if(q<c[0]){return}var s;if(u<c[0]){s=0}else{s=h.Animation.binarySearch1(c,u);var t=c[s];while(s>0){if(c[s-1]!=t){break}s--}}var b=this.events;for(;s<r&&q>=c[s];s++){a.push(b[s])}}};i.exports=h.EventTimeline},{"../SpineUtil":42,"./Animation":2}],21:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.FfdTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a;this.frameVertices=[];this.frameVertices.length=a};h.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b;this.frameVertices[a]=c},apply:function(K,d,H,c,J){var L=K.slots[this.slotIndex];if(L.attachment!=this.attachment){return}var C=this.frames;if(H<C[0]){return}var G=this.frameVertices;var D=G[0].length;var I=L.attachmentVertices;if(I.length!=D){I=L.attachmentVertices=[];for(var A=0;A<D;A++){I.push(0)}J=1}if(H>=C[C.length-1]){var b=G[C.length-1];if(J<1){for(var k=0;k<D;k++){I[k]+=(b[k]-I[k])*J}}else{for(var k=0;k<D;k++){I[k]=b[k]}}return}var F=h.Animation.binarySearch1(C,H);var E=C[F];var M=1-(H-E)/(C[F-1]-E);M=this.curves.getCurvePercent(F-1,M<0?0:(M>1?1:M));var a=G[F-1];var N=G[F];if(J<1){for(var k=0;k<D;k++){var B=a[k];I[k]+=(B+(N[k]-B)*M-I[k])*J}}else{for(var k=0;k<D;k++){var B=a[k];I[k]=B+(N[k]-B)*M}}}};i.exports=h.FfdTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],22:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.FlipXTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*2};h.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2;this.frames[a]=b;this.frames[a+1]=c?1:0},apply:function(c,d,m,o,n){var b=this.frames;if(m<b[0]){if(d>m){this.apply(c,d,Number.MAX_VALUE,null,0)}return}else{if(d>m){d=-1}}var a=(m>=b[b.length-2]?b.length:h.Animation.binarySearch(b,m,2))-2;if(b[a]<d){return}c.bones[this.boneIndex].flipX=b[a+1]!=0}};i.exports=h.FlipXTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],23:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.FlipYTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*2};h.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2;this.frames[a]=b;this.frames[a+1]=c?1:0},apply:function(c,d,m,o,n){var b=this.frames;if(m<b[0]){if(d>m){this.apply(c,d,Number.MAX_VALUE,null,0)}return}else{if(d>m){d=-1}}var a=(m>=b[b.length-2]?b.length:h.Animation.binarySearch(b,m,2))-2;if(b[a]<d){return}c.bones[this.boneIndex].flipY=b[a+1]!=0}};i.exports=h.FlipYTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],24:[function(f,i,g){var h=f("../SpineUtil");h.IkConstraint=function(c,b){this.data=c;this.mix=c.mix;this.bendDirection=c.bendDirection;this.bones=[];for(var d=0,a=c.bones.length;d<a;d++){this.bones.push(b.findBone(c.bones[d].name))}this.target=b.findBone(c.target.name)};h.IkConstraint.prototype={apply:function(){var a=this.target;var b=this.bones;switch(b.length){case 1:h.IkConstraint.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:h.IkConstraint.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix);break}}};h.IkConstraint.apply1=function(b,c,d,a){var n=(!b.data.inheritRotation||!b.parent)?0:b.parent.worldRotation;var o=b.rotation;var m=(h.Bone.yDown?-h.radDeg:h.radDeg)*Math.atan2(d-b.worldY,c-b.worldX)-n;b.rotationIK=o+(m-o)*a};h.IkConstraint.apply2=function(N,Q,I,M,c,T){var V=Q.rotation,b=N.rotation;if(!T){Q.rotationIK=V;N.rotationIK=b;return}var K,L,d=h.temp;var H=N.parent;if(H){d[0]=I;d[1]=M;H.worldToLocal(d);I=(d[0]-N.x)*H.worldScaleX;M=(d[1]-N.y)*H.worldScaleY}else{I-=N.x;M-=N.y}if(Q.parent==N){K=Q.x;L=Q.y}else{d[0]=Q.x;d[1]=Q.y;Q.parent.localToWorld(d);N.worldToLocal(d);K=d[0];L=d[1]}var D=K*N.worldScaleX,E=L*N.worldScaleY;var S=Math.atan2(E,D);var O=Math.sqrt(D*D+E*E),P=Q.data.length*Q.worldScaleX;var U=2*O*P;if(U<0.0001){Q.rotationIK=V+(Math.atan2(M,I)*h.radDeg-b-V)*T;return}var W=(I*I+M*M-O*O-P*P)/U;if(W<-1){W=-1}else{if(W>1){W=1}}var R=Math.acos(W)*c;var a=O+P*W,J=P*Math.sin(R);var G=Math.atan2(M*a-I*J,I*a+M*J);var F=(G-S)*h.radDeg-b;if(F>180){F-=360}else{if(F<-180){F+=360}}N.rotationIK=b+F*T;F=(R+S)*h.radDeg-V;if(F>180){F-=360}else{if(F<-180){F+=360}}Q.rotationIK=V+(F+N.worldRotation-Q.parent.worldRotation)*T};i.exports=h.IkConstraint},{"../SpineUtil":42}],25:[function(f,i,g){var h=f("../SpineUtil")||{};h.IkConstraintData=function(a){this.name=a;this.bones=[]};h.IkConstraintData.prototype={target:null,bendDirection:1,mix:1};i.exports=h.IkConstraintData},{"../SpineUtil":42}],26:[function(f,i,g){var h=f("../SpineUtil")||{};h.Animation=f("./Animation");h.Curves=f("./Curves");h.IkConstraintTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*3};h.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3;this.frames[a]=b;this.frames[a+1]=c;this.frames[a+2]=d},apply:function(u,y,v,a,t){var d=this.frames;if(v<d[0]){return}var b=u.ikConstraints[this.ikConstraintIndex];if(v>=d[d.length-3]){b.mix+=(d[d.length-2]-b.mix)*t;b.bendDirection=d[d.length-1];return}var w=h.Animation.binarySearch(d,v,3);var x=d[w+-2];var r=d[w];var s=1-(v-r)/(d[w+-3]-r);s=this.curves.getCurvePercent(w/3-1,s);var c=x+(d[w+1]-x)*s;b.mix+=(c-b.mix)*t;b.bendDirection=d[w+-1]}};i.exports=h.IkConstraintTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],27:[function(f,i,g){var h=f("../SpineUtil")||{};h.AttachmentType=f("./AttachmentType");h.MeshAttachment=function(a){this.name=a};h.MeshAttachment.prototype={type:h.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:false,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var b=this.regionU2-this.regionU,d=this.regionV2-this.regionV;var a=this.regionUVs.length;if(!this.uvs||this.uvs.length!=a){this.uvs=new h.Float32Array(a)}if(this.regionRotate){for(var c=0;c<a;c+=2){this.uvs[c]=this.regionU+this.regionUVs[c+1]*b;this.uvs[c+1]=this.regionV+d-this.regionUVs[c]*d}}else{for(var c=0;c<a;c+=2){this.uvs[c]=this.regionU+this.regionUVs[c]*b;this.uvs[c+1]=this.regionV+this.regionUVs[c+1]*d}}},computeWorldVertices:function(c,d,b,B){var D=b.bone;c+=D.worldX;d+=D.worldY;var C=D.m00,a=D.m01,y=D.m10,z=D.m11;var w=this.vertices;var x=w.length;if(b.attachmentVertices.length==x){w=b.attachmentVertices}for(var A=0;A<x;A+=2){var u=w[A];var v=w[A+1];B[A]=u*C+v*a+c;B[A+1]=u*y+v*z+d}}};i.exports=h.MeshAttachment},{"../SpineUtil":42,"./AttachmentType":11}],28:[function(f,i,g){var h=f("../SpineUtil");h.AttachmentType=f("./AttachmentType");h.RegionAttachment=function(a){this.name=a;this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};h.RegionAttachment.prototype={type:h.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(d,m,b,a,l){var c=this.uvs;if(l){c[2]=d;c[3]=a;c[4]=d;c[5]=m;c[6]=b;c[7]=m;c[0]=b;c[1]=a}else{c[0]=d;c[1]=a;c[2]=d;c[3]=m;c[4]=b;c[5]=m;c[6]=b;c[7]=a}},updateOffset:function(){var c=this.width/this.regionOriginalWidth*this.scaleX;var d=this.height/this.regionOriginalHeight*this.scaleY;var J=-this.width/2*this.scaleX+this.regionOffsetX*c;var a=-this.height/2*this.scaleY+this.regionOffsetY*d;var E=J+this.regionWidth*c;var x=a+this.regionHeight*d;var b=this.rotation*h.degRad;var I=Math.cos(b);var K=Math.sin(b);var C=J*I+this.x;var D=J*K;var z=a*I+this.y;var B=a*K;var y=E*I+this.x;var A=E*K;var G=x*I+this.y;var H=x*K;var F=this.offset;F[0]=C-B;F[1]=z+D;F[2]=C-H;F[3]=G+D;F[4]=y-H;F[5]=G+A;F[6]=y-B;F[7]=z+A},computeVertices:function(d,o,b,p){d+=b.worldX;o+=b.worldY;var a=b.m00,c=b.m01,q=b.m10,r=b.m11;var s=this.offset;p[0]=s[0]*a+s[1]*c+d;p[1]=s[0]*q+s[1]*r+o;p[2]=s[2]*a+s[3]*c+d;p[3]=s[2]*q+s[3]*r+o;p[4]=s[4]*a+s[5]*c+d;p[5]=s[4]*q+s[5]*r+o;p[6]=s[6]*a+s[7]*c+d;p[7]=s[6]*q+s[7]*r+o}};i.exports=h.RegionAttachment},{"../SpineUtil":42,"./AttachmentType":11}],29:[function(f,i,g){var h=f("../SpineUtil")||{};h.Animation=f("./Animation");h.Curves=f("./Curves");h.RotateTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*2};h.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,c,b){a*=2;this.frames[a]=c;this.frames[a+1]=b},apply:function(u,y,v,a,t){var c=this.frames;if(v<c[0]){return}var b=u.bones[this.boneIndex];if(v>=c[c.length-2]){var s=b.data.rotation+c[c.length-1]-b.rotation;while(s>180){s-=360}while(s<-180){s+=360}b.rotation+=s*t;return}var x=h.Animation.binarySearch(c,v,2);var w=c[x-1];var d=c[x];var r=1-(v-d)/(c[x-2]-d);r=this.curves.getCurvePercent(x/2-1,r);var s=c[x+1]-w;while(s>180){s-=360}while(s<-180){s+=360}s=b.data.rotation+(w+s*r)-b.rotation;while(s>180){s-=360}while(s<-180){s+=360}b.rotation+=s*t}};i.exports=h.RotateTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],30:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.ScaleTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*3};h.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,c,d,b){a*=3;this.frames[a]=c;this.frames[a+1]=d;this.frames[a+2]=b},apply:function(t,y,u,a,s){var c=this.frames;if(u<c[0]){return}var b=t.bones[this.boneIndex];if(u>=c[c.length-3]){b.scaleX+=(b.data.scaleX*c[c.length-2]-b.scaleX)*s;b.scaleY+=(b.data.scaleY*c[c.length-1]-b.scaleY)*s;return}var v=h.Animation.binarySearch(c,u,3);var w=c[v-2];var x=c[v-1];var d=c[v];var r=1-(u-d)/(c[v+-3]-d);r=this.curves.getCurvePercent(v/3-1,r);b.scaleX+=(b.data.scaleX*(w+(c[v+1]-w)*r)-b.scaleX)*s;b.scaleY+=(b.data.scaleY*(x+(c[v+2]-x)*r)-b.scaleY)*s}};i.exports=h.ScaleTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],31:[function(f,i,g){var h=f("../SpineUtil");h.Bone=f("./Bone");h.Slot=f("./Slot");h.IkConstraint=f("./IkConstraint");h.Skeleton=function(q){this.data=q;this.bones=[];for(var p=0,r=q.bones.length;p<r;p++){var b=q.bones[p];var n=!b.parent?null:this.bones[q.bones.indexOf(b.parent)];this.bones.push(new h.Bone(b,this,n))}this.slots=[];this.drawOrder=[];for(var p=0,r=q.slots.length;p<r;p++){var d=q.slots[p];var c=this.bones[q.bones.indexOf(d.boneData)];var a=new h.Slot(d,c);this.slots.push(a);this.drawOrder.push(p)}this.ikConstraints=[];for(var p=0,r=q.ikConstraints.length;p<r;p++){this.ikConstraints.push(new h.IkConstraint(q.ikConstraints[p],this))}this.boneCache=[];this.updateCache()};h.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:false,flipY:false,updateCache:function(){var b=this.ikConstraints;var B=b.length;var n=B+1;var a=this.boneCache;if(a.length>n){a.length=n}for(var x=0,z=a.length;x<z;x++){a[x].length=0}while(a.length<n){a[a.length]=[]}var C=a[0];var y=this.bones;outer:for(var x=0,z=y.length;x<z;x++){var c=y[x];var w=c;do{for(var d=0;d<B;d++){var D=b[d];var v=D.bones[0];var A=D.bones[D.bones.length-1];while(true){if(w==A){a[d].push(c);a[d+1].push(c);continue outer}if(A==v){break}A=A.parent}}w=w.parent}while(w);C[C.length]=c}},updateWorldTransform:function(){var q=this.bones;for(var n=0,r=q.length;n<r;n++){var b=q[n];b.rotationIK=b.rotation}var n=0,c=this.boneCache.length-1;while(true){var p=this.boneCache[n];for(var d=0,a=p.length;d<a;d++){p[d].updateWorldTransform()}if(n==c){break}this.ikConstraints[n].apply();n++}},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){var l=this.bones;for(var c=0,a=l.length;c<a;c++){l[c].setToSetupPose()}var b=this.ikConstraints;for(var c=0,a=b.length;c<a;c++){var d=b[c];d.bendDirection=d.data.bendDirection;d.mix=d.data.mix}},setSlotsToSetupPose:function(){var b=this.slots;for(var c=0,a=b.length;c<a;c++){b[c].setToSetupPose(c)}this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(b){var d=this.bones;for(var c=0,a=d.length;c<a;c++){if(d[c].data.name==b){return d[c]}}return null},findBoneIndex:function(b){var d=this.bones;for(var c=0,a=d.length;c<a;c++){if(d[c].data.name==b){return c}}return -1},findSlot:function(d){var b=this.slots;for(var c=0,a=b.length;c<a;c++){if(b[c].data.name==d){return b[c]}}return null},findSlotIndex:function(d){var b=this.slots;for(var c=0,a=b.length;c<a;c++){if(b[c].data.name==d){return c}}return -1},setSkinByName:function(b){var a=this.data.findSkin(b);if(!a){throw"Skin not found: "+b}this.setSkin(a)},setSkin:function(d){if(d){if(this.skin){d._attachAll(this,this.skin)}else{var n=this.slots;for(var o=0,a=n.length;o<a;o++){var b=n[o];var p=b.data.attachmentName;if(p){var c=d.getAttachment(o,p);if(c){b.setAttachment(c)}}}}}this.skin=d},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(b,c){if(this.skin){var a=this.skin.getAttachment(b,c);if(a){return a}}if(this.data.defaultSkin){return this.data.defaultSkin.getAttachment(b,c)}return null},setAttachment:function(o,p){var d=this.slots;for(var n=0,a=d.length;n<a;n++){var b=d[n];if(b.data.name==o){var c=null;if(p){c=this.getAttachmentBySlotIndex(n,p);if(!c){throw"Attachment not found: "+p+", for slot: "+o}}b.setAttachment(c);return}}throw"Slot not found: "+o},findIkConstraint:function(b){var c=this.ikConstraints;for(var d=0,a=c.length;d<a;d++){if(c[d].data.name==b){return c[d]}}return null},update:function(a){this.time+=a},resetDrawOrder:function(){for(var b=0,a=this.drawOrder.length;b<a;b++){this.drawOrder[b]=b}}};i.exports=h.Skeleton},{"../SpineUtil":42,"./Bone":12,"./IkConstraint":24,"./Slot":37}],32:[function(f,i,g){var h=f("../SpineRuntime")||{};h.AttachmentType=f("./AttachmentType");h.SkeletonBounds=function(){this.polygonPool=[];this.polygons=[];this.boundingBoxes=[]};h.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(y,b){var c=y.slots;var n=c.length;var D=y.x,a=y.y;var A=this.boundingBoxes;var d=this.polygonPool;var E=this.polygons;A.length=0;for(var w=0,B=E.length;w<B;w++){d.push(E[w])}E.length=0;for(var w=0;w<n;w++){var C=c[w];var x=C.attachment;if(x.type!=h.AttachmentType.boundingbox){continue}A.push(x);var z=d.length,F;if(z>0){F=d[z-1];d.splice(z-1,1)}else{F=[]}E.push(F);F.length=x.vertices.length;x.computeWorldVertices(D,a,C.bone,F)}if(b){this.aabbCompute()}},aabbCompute:function(){var b=this.polygons;var u=Number.MAX_VALUE,v=Number.MAX_VALUE,x=Number.MIN_VALUE,y=Number.MIN_VALUE;for(var t=0,w=b.length;t<w;t++){var n=b[t];for(var a=0,z=n.length;a<z;a+=2){var c=n[a];var d=n[a+1];u=Math.min(u,c);v=Math.min(v,d);x=Math.max(x,c);y=Math.max(y,d)}}this.minX=u;this.minY=v;this.maxX=x;this.maxY=y},aabbContainsPoint:function(b,a){return b>=this.minX&&b<=this.maxX&&a>=this.minY&&a<=this.maxY},aabbIntersectsSegment:function(t,a,u,c){var m=this.minX,r=this.minY,v=this.maxX,w=this.maxY;if((t<=m&&u<=m)||(a<=r&&c<=r)||(t>=v&&u>=v)||(a>=w&&c>=w)){return false}var s=(c-a)/(u-t);var d=s*(m-t)+a;if(d>r&&d<w){return true}d=s*(v-t)+a;if(d>r&&d<w){return true}var b=(r-a)/s+t;if(b>m&&b<v){return true}b=(w-a)/s+t;if(b>m&&b<v){return true}return false},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(l,a){var d=this.polygons;for(var c=0,b=d.length;c<b;c++){if(this.polygonContainsPoint(d[c],l,a)){return this.boundingBoxes[c]}}return null},intersectsSegment:function(n,b,o,c){var p=this.polygons;for(var d=0,a=p.length;d<a;d++){if(p[d].intersectsSegment(n,b,o,c)){return this.boundingBoxes[d]}}return null},polygonContainsPoint:function(d,c,p){var a=d.length;var s=a-2;var r=false;for(var b=0;b<a;b+=2){var u=d[b+1];var q=d[s+1];if((u<p&&q>=p)||(q<p&&u>=p)){var t=d[b];if(t+(p-u)/(q-u)*(d[s]-t)<c){r=!r}}s=b}return r},polygonIntersectsSegment:function(B,E,J,b,K){var N=B.length;var a=E-b,L=J-K;var G=E*K-J*b;var c=B[N-2],M=B[N-1];for(var y=0;y<N;y+=2){var x=B[y],O=B[y+1];var H=c*O-M*x;var C=c-x,d=M-O;var I=a*d-L*C;var D=(G*C-a*H)/I;if(((D>=c&&D<=x)||(D>=x&&D<=c))&&((D>=E&&D<=b)||(D>=b&&D<=E))){var F=(G*d-L*H)/I;if(((F>=M&&F<=O)||(F>=O&&F<=M))&&((F>=J&&F<=K)||(F>=K&&F<=J))){return true}}c=x;M=O}return false},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return b==-1?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}};i.exports=h.SkeletonBounds},{"../SpineRuntime":41,"./AttachmentType":11}],33:[function(f,i,g){var h=f("../SpineUtil");h.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.events=[];this.animations=[];this.ikConstraints=[]};h.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(b){var d=this.bones;for(var c=0,a=d.length;c<a;c++){if(d[c].name==b){return d[c]}}return null},findBoneIndex:function(b){var d=this.bones;for(var c=0,a=d.length;c<a;c++){if(d[c].name==b){return c}}return -1},findSlot:function(d){var b=this.slots;for(var c=0,a=b.length;c<a;c++){if(b[c].name==d){return this.slots[c]}}return null},findSlotIndex:function(d){var b=this.slots;for(var c=0,a=b.length;c<a;c++){if(b[c].name==d){return c}}return -1},findSkin:function(d){var b=this.skins;for(var c=0,a=b.length;c<a;c++){if(b[c].name==d){return b[c]}}return null},findEvent:function(d){var b=this.events;for(var c=0,a=b.length;c<a;c++){if(b[c].name==d){return b[c]}}return null},findAnimation:function(c){var a=this.animations;for(var d=0,b=a.length;d<b;d++){if(a[d].name==c){return a[d]}}return null},findIkConstraint:function(b){var c=this.ikConstraints;for(var d=0,a=c.length;d<a;d++){if(c[d].name==b){return c[d]}}return null}};i.exports=h.SkeletonData},{"../SpineUtil":42}],34:[function(f,i,g){var h=f("../SpineUtil");h.SkeletonData=f("./SkeletonData");h.BoneData=f("./BoneData");h.IkConstraintData=f("./IkConstraintData");h.SlotData=f("./SlotData");h.Skin=f("./Skin");h.EventData=f("./EventData");h.AttachmentType=f("./AttachmentType");h.ColorTimeline=f("./ColorTimeline");h.AttachmentTimeline=f("./AttachmentTimeline");h.RotateTimeline=f("./RotateTimeline");h.ScaleTimeline=f("./ScaleTimeline");h.TranslateTimeline=f("./TranslateTimeline");h.FlipXTimeline=f("./FlipXTimeline");h.FlipYTimeline=f("./FlipYTimeline");h.IkConstraintTimeline=f("./IkConstraintTimeline");h.FfdTimeline=f("./FfdTimeline");h.DrawOrderTimeline=f("./DrawOrderTimeline");h.EventTimeline=f("./EventTimeline");h.Event=f("./Event");h.Animation=f("./Animation");h.SkeletonJsonParser=function(a){this.attachmentLoader=a};h.SkeletonJsonParser.prototype={scale:1,readSkeletonData:function(ac,a){var aq=new h.SkeletonData();aq.name=a;var ar=ac.skeleton;if(ar){aq.hash=ar.hash;aq.version=ar.spine;aq.width=ar.width||0;aq.height=ar.height||0}var S=ac.bones;for(var W=0,ah=S.length;W<ah;W++){var d=S[W];var ad=null;if(d.parent){ad=aq.findBone(d.parent);if(!ad){throw"Parent bone not found: "+d.parent}}var am=new h.BoneData(d.name,ad);am.length=(d.length||0)*this.scale;am.x=(d.x||0)*this.scale;am.y=(d.y||0)*this.scale;am.rotation=(d.rotation||0);am.scaleX=d.hasOwnProperty("scaleX")?d.scaleX:1;am.scaleY=d.hasOwnProperty("scaleY")?d.scaleY:1;am.inheritScale=d.hasOwnProperty("inheritScale")?d.inheritScale:true;am.inheritRotation=d.hasOwnProperty("inheritRotation")?d.inheritRotation:true;aq.bones.push(am)}var Z=ac.ik;if(Z){for(var W=0,ah=Z.length;W<ah;W++){var c=Z[W];var R=new h.IkConstraintData(c.name);var S=c.bones;for(var T=0,at=S.length;T<at;T++){var an=aq.findBone(S[T]);if(!an){throw"IK bone not found: "+S[T]}R.bones.push(an)}R.target=aq.findBone(c.target);if(!R.target){throw"Target bone not found: "+c.target}R.bendDirection=(!c.hasOwnProperty("bendPositive")||c.bendPositive)?1:-1;R.mix=c.hasOwnProperty("mix")?c.mix:1;aq.ikConstraints.push(R)}}var X=ac.slots;for(var W=0,ah=X.length;W<ah;W++){var V=X[W];var am=aq.findBone(V.bone);if(!am){throw"Slot bone not found: "+V.bone}var al=new h.SlotData(V.name,am);var Y=V.color;if(Y){al.r=this.toColor(Y,0);al.g=this.toColor(Y,1);al.b=this.toColor(Y,2);al.a=this.toColor(Y,3)}al.attachmentName=V.attachment;al.blendMode=V.blend&&h.SlotData.PIXI_BLEND_MODE_MAP[V.blend]||h.SlotData.PIXI_BLEND_MODE_MAP.normal;aq.slots.push(al)}var b=ac.skins;for(var U in b){if(!b.hasOwnProperty(U)){continue}var aj=b[U];var ab=new h.Skin(U);for(var ai in aj){if(!aj.hasOwnProperty(ai)){continue}var n=aq.findSlotIndex(ai);var af=aj[ai];for(var ak in af){if(!af.hasOwnProperty(ak)){continue}var aa=this.readAttachment(ab,ak,af[ak]);if(aa){ab.addAttachment(n,ak,aa)}}}aq.skins.push(ab);if(ab.name=="default"){aq.defaultSkin=ab}}var au=ac.events;for(var ao in au){if(!au.hasOwnProperty(ao)){continue}var Q=au[ao];var ap=new h.EventData(ao);ap.intValue=Q["int"]||0;ap.floatValue=Q["float"]||0;ap.stringValue=Q.string||null;aq.events.push(ap)}var ae=ac.animations;for(var ag in ae){if(!ae.hasOwnProperty(ag)){continue}this.readAnimation(ag,ae[ag],aq)}return aq},readAttachment:function(B,a,c){a=c.name||a;var I=h.AttachmentType[c.type||"region"];var D=c.path||a;var b=this.scale;if(I==h.AttachmentType.region){var J=this.attachmentLoader.newRegionAttachment(B,a,D);if(!J){return null}J.path=D;J.x=(c.x||0)*b;J.y=(c.y||0)*b;J.scaleX=c.hasOwnProperty("scaleX")?c.scaleX:1;J.scaleY=c.hasOwnProperty("scaleY")?c.scaleY:1;J.rotation=c.rotation||0;J.width=(c.width||0)*b;J.height=(c.height||0)*b;var A=c.color;if(A){J.r=this.toColor(A,0);J.g=this.toColor(A,1);J.b=this.toColor(A,2);J.a=this.toColor(A,3)}J.updateOffset();return J}else{if(I==h.AttachmentType.mesh){var L=this.attachmentLoader.newMeshAttachment(B,a,D);if(!L){return null}L.path=D;L.vertices=this.getFloatArray(c,"vertices",b);L.triangles=this.getIntArray(c,"triangles");L.regionUVs=this.getFloatArray(c,"uvs",1);L.updateUVs();A=c.color;if(A){L.r=this.toColor(A,0);L.g=this.toColor(A,1);L.b=this.toColor(A,2);L.a=this.toColor(A,3)}L.hullLength=(c.hull||0)*2;if(c.edges){L.edges=this.getIntArray(c,"edges")}L.width=(c.width||0)*b;L.height=(c.height||0)*b;return L}else{if(I==h.AttachmentType.skinnedmesh){var L=this.attachmentLoader.newSkinnedMeshAttachment(B,a,D);if(!L){return null}L.path=D;var F=this.getFloatArray(c,"uvs",1);var H=this.getFloatArray(c,"vertices",1);var d=[];var n=[];for(var z=0,C=H.length;z<C;){var G=H[z++]|0;n[n.length]=G;for(var K=z+G*4;z<K;){n[n.length]=H[z];d[d.length]=H[z+1]*b;d[d.length]=H[z+2]*b;d[d.length]=H[z+3];z+=4}}L.bones=n;L.weights=d;L.triangles=this.getIntArray(c,"triangles");L.regionUVs=F;L.updateUVs();A=c.color;if(A){L.r=this.toColor(A,0);L.g=this.toColor(A,1);L.b=this.toColor(A,2);L.a=this.toColor(A,3)}L.hullLength=(c.hull||0)*2;if(c.edges){L.edges=this.getIntArray(c,"edges")}L.width=(c.width||0)*b;L.height=(c.height||0)*b;return L}else{if(I==h.AttachmentType.boundingbox){var E=this.attachmentLoader.newBoundingBoxAttachment(B,a);var H=c.vertices;for(var z=0,C=H.length;z<C;z++){E.vertices.push(H[z]*b)}return E}}}}throw"Unknown attachment type: "+I},readAnimation:function(a4,aC,aX){var d=[];var aG=0;var aF=aC.slots;for(var aB in aF){if(!aF.hasOwnProperty(aB)){continue}var aE=aF[aB];var av=aX.findSlotIndex(aB);for(var bk in aE){if(!aE.hasOwnProperty(bk)){continue}var az=aE[bk];if(bk=="color"){var ba=new h.ColorTimeline(az.length);ba.slotIndex=av;var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];var aA=aK.color;var a=this.toColor(aA,0);var aM=this.toColor(aA,1);var aD=this.toColor(aA,2);var aw=this.toColor(aA,3);ba.setFrame(bg,aK.time,a,aM,aD,aw);this.readCurve(ba,bg,aK);bg++}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()*5-5])}else{if(bk=="attachment"){var ba=new h.AttachmentTimeline(az.length);ba.slotIndex=av;var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];ba.setFrame(bg++,aK.time,aK.name)}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()-1])}else{throw"Invalid timeline type for a slot: "+bk+" ("+aB+")"}}}}var a3=aC.bones;for(var a6 in a3){if(!a3.hasOwnProperty(a6)){continue}var a8=aX.findBoneIndex(a6);if(a8==-1){throw"Bone not found: "+a6}var bd=a3[a6];for(var bk in bd){if(!bd.hasOwnProperty(bk)){continue}var az=bd[bk];if(bk=="rotate"){var ba=new h.RotateTimeline(az.length);ba.boneIndex=a8;var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];ba.setFrame(bg,aK.time,aK.angle);this.readCurve(ba,bg,aK);bg++}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()*2-2])}else{if(bk=="translate"||bk=="scale"){var ba;var aQ=1;if(bk=="scale"){ba=new h.ScaleTimeline(az.length)}else{ba=new h.TranslateTimeline(az.length);aQ=this.scale}ba.boneIndex=a8;var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];var b=(aK.x||0)*aQ;var c=(aK.y||0)*aQ;ba.setFrame(bg,aK.time,b,c);this.readCurve(ba,bg,aK);bg++}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()*3-3])}else{if(bk=="flipX"||bk=="flipY"){var b=bk=="flipX";var ba=b?new h.FlipXTimeline(az.length):new h.FlipYTimeline(az.length);ba.boneIndex=a8;var a9=b?"x":"y";var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];ba.setFrame(bg,aK.time,aK[a9]||false);bg++}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()*2-2])}else{throw"Invalid timeline type for a bone: "+bk+" ("+a6+")"}}}}}var aY=aC.ik;for(var bb in aY){if(!aY.hasOwnProperty(bb)){continue}var ax=aX.findIkConstraint(bb);var az=aY[bb];var ba=new h.IkConstraintTimeline(az.length);ba.ikConstraintIndex=aX.ikConstraints.indexOf(ax);var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];var a0=aK.hasOwnProperty("mix")?aK.mix:1;var aS=(!aK.hasOwnProperty("bendPositive")||aK.bendPositive)?1:-1;ba.setFrame(bg,aK.time,a0,aS);this.readCurve(ba,bg,aK);bg++}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()*3-3])}var aW=aC.ffd;for(var aJ in aW){var aZ=aX.findSkin(aJ);var aE=aW[aJ];for(aB in aE){var av=aX.findSlotIndex(aB);var aU=aE[aB];for(var a7 in aU){var az=aU[a7];var ba=new h.FfdTimeline(az.length);var aT=aZ.getAttachment(av,a7);if(!aT){throw"FFD attachment not found: "+a7}ba.slotIndex=av;ba.attachment=aT;var bl=aT.type==h.AttachmentType.mesh;var aO;if(bl){aO=aT.vertices.length}else{aO=aT.weights.length/3*2}var bg=0;for(var aP=0,a2=az.length;aP<a2;aP++){var aK=az[aP];var bi;if(!aK.vertices){if(bl){bi=aT.vertices}else{bi=[];for(var aR=0;aR<aO;++aR){bi.push(0)}}}else{var x=aK.vertices;bi=[];for(var aR=0;aR<aO;++aR){bi.push(0)}var aL=aK.offset||0;var aI=x.length;if(this.scale==1){for(var y=0;y<aI;y++){bi[y+aL]=x[y]}}else{for(var y=0;y<aI;y++){bi[y+aL]=x[y]*this.scale}}if(bl){var ay=aT.vertices;for(var y=0,aI=bi.length;y<aI;y++){bi[y]+=ay[y]}}}ba.setFrame(bg,aK.time,bi);this.readCurve(ba,bg,aK);bg++}d[d.length]=ba;aG=Math.max(aG,ba.frames[ba.getFrameCount()-1])}}}var a5=aC.drawOrder;if(!a5){a5=aC.draworder}if(a5){var ba=new h.DrawOrderTimeline(a5.length);var bc=aX.slots.length;var bg=0;for(var aP=0,a2=a5.length;aP<a2;aP++){var n=a5[aP];var j=null;if(n.offsets){j=[];j.length=bc;for(var y=bc-1;y>=0;y--){j[y]=-1}var aV=n.offsets;var bj=[];bj.length=bc-aV.length;var be=0,aH=0;for(var y=0,aI=aV.length;y<aI;y++){var bf=aV[y];var av=aX.findSlotIndex(bf.slot);if(av==-1){throw"Slot not found: "+bf.slot}while(be!=av){bj[aH++]=be++}j[be+bf.offset]=be++}while(be<bc){bj[aH++]=be++}for(var y=bc-1;y>=0;y--){if(j[y]==-1){j[y]=bj[--aH]}}}ba.setFrame(bg++,n.time,j)}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()-1])}var aN=aC.events;if(aN){var ba=new h.EventTimeline(aN.length);var bg=0;for(var aP=0,a2=aN.length;aP<a2;aP++){var bh=aN[aP];var a1=aX.findEvent(bh.name);if(!a1){throw"Event not found: "+bh.name}var r=new h.Event(a1);r.intValue=bh.hasOwnProperty("int")?bh["int"]:a1.intValue;r.floatValue=bh.hasOwnProperty("float")?bh["float"]:a1.floatValue;r.stringValue=bh.hasOwnProperty("string")?bh.string:a1.stringValue;ba.setFrame(bg++,bh.time,r)}d.push(ba);aG=Math.max(aG,ba.frames[ba.getFrameCount()-1])}aX.animations.push(new h.Animation(a4,d,aG))},readCurve:function(d,a,b){var c=b.curve;if(!c){d.curves.setLinear(a)}else{if(c=="stepped"){d.curves.setStepped(a)}else{if(c instanceof Array){d.curves.setCurve(a,c[0],c[1],c[2],c[3])}}}},toColor:function(b,a){if(b.length!=8){throw"Color hexidecimal length must be 8, recieved: "+b}return parseInt(b.substring(a*2,(a*2)+2),16)/255},getFloatArray:function(c,o,b){var d=c[o];var p=new h.Float32Array(d.length);var n=0,a=d.length;if(b==1){for(;n<a;n++){p[n]=d[n]}}else{for(;n<a;n++){p[n]=d[n]*b}}return p},getIntArray:function(b,m){var c=b[m];var n=new h.Uint16Array(c.length);for(var d=0,a=c.length;d<a;d++){n[d]=c[d]|0}return n}};i.exports=h.SkeletonJsonParser},{"../SpineUtil":42,"./Animation":2,"./AttachmentTimeline":10,"./AttachmentType":11,"./BoneData":13,"./ColorTimeline":15,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./FlipXTimeline":22,"./FlipYTimeline":23,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./RotateTimeline":29,"./ScaleTimeline":30,"./SkeletonData":33,"./Skin":35,"./SlotData":38,"./TranslateTimeline":40}],35:[function(f,i,g){var h=f("../SpineUtil");h.Skin=function(a){this.name=a;this.attachments={}};h.Skin.prototype={addAttachment:function(c,b,a){this.attachments[c+":"+b]=a},getAttachment:function(b,a){return this.attachments[b+":"+a]},_attachAll:function(d,a){for(var o in a.attachments){var n=o.indexOf(":");var q=parseInt(o.substring(0,n));var p=o.substring(n+1);var b=d.slots[q];if(b.attachment&&b.attachment.name==p){var c=this.getAttachment(q,p);if(c){b.setAttachment(c)}}}}};i.exports=h.Skin},{"../SpineUtil":42}],36:[function(f,i,g){var h=f("../SpineUtil")||{};h.AttachmentType=f("./AttachmentType");h.SkinnedMeshAttachment=function(a){this.name=a};h.SkinnedMeshAttachment.prototype={type:h.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:false,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(b,c,t,d,q){var s=this.regionU2-this.regionU,a=this.regionV2-this.regionV;var r=this.regionUVs.length;if(!this.uvs||this.uvs.length!=r){this.uvs=new h.Float32Array(r)}if(this.regionRotate){for(var n=0;n<r;n+=2){this.uvs[n]=this.regionU+this.regionUVs[n+1]*s;this.uvs[n+1]=this.regionV+a-this.regionUVs[n]*a}}else{for(var n=0;n<r;n+=2){this.uvs[n]=this.regionU+this.regionUVs[n]*s;this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*a}}},computeWorldVertices:function(J,K,N,n){var L=N.bone.skeleton.bones;var F=this.weights;var a=this.bones;var I=0,H=0,x=0,G=0,b=a.length,O;var c,v,M,d,w,y;if(!N.attachmentVertices.length){for(;H<b;I+=2){c=0;v=0;O=a[H++]+H;for(;H<O;H++,x+=3){M=L[a[H]];d=F[x];w=F[x+1];y=F[x+2];c+=(d*M.m00+w*M.m01+M.worldX)*y;v+=(d*M.m10+w*M.m11+M.worldY)*y}n[I]=c+J;n[I+1]=v+K}}else{var P=N.attachmentVertices;for(;H<b;I+=2){c=0;v=0;O=a[H++]+H;for(;H<O;H++,x+=3,G+=2){M=L[a[H]];d=F[x]+P[G];w=F[x+1]+P[G+1];y=F[x+2];c+=(d*M.m00+w*M.m01+M.worldX)*y;v+=(d*M.m10+w*M.m11+M.worldY)*y}n[I]=c+J;n[I+1]=v+K}}}};i.exports=h.SkinnedMeshAttachment},{"../SpineUtil":42,"./AttachmentType":11}],37:[function(f,i,g){var h=f("../SpineUtil");h.Slot=function(b,a){this.data=b;this.bone=a;this.setToSetupPose()};h.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(a){this.attachment=a;this._attachmentTime=this.bone.skeleton.time;this.attachmentVertices.length=0},setAttachmentTime:function(a){this._attachmentTime=this.bone.skeleton.time-a},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var c=this.data;this.r=c.r;this.g=c.g;this.b=c.b;this.a=c.a;this.blendMode=c.blendMode;var a=this.bone.skeleton.data.slots;for(var d=0,b=a.length;d<b;d++){if(a[d]==c){this.setAttachment(!c.attachmentName?null:this.bone.skeleton.getAttachmentBySlotIndex(d,c.attachmentName));break}}}};i.exports=h.Slot},{"../SpineUtil":42}],38:[function(f,i,g){var h=f("../SpineUtil");h.SlotData=function(b,a){this.name=b;this.boneData=a};h.SlotData.PIXI_BLEND_MODE_MAP={multiply:PIXI.BLEND_MODES.MULTIPLY,screen:PIXI.BLEND_MODES.SCREEN,additive:PIXI.BLEND_MODES.ADD,normal:PIXI.BLEND_MODES.NORMAL};h.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:PIXI.BLEND_MODES.NORMAL};i.exports=h.SlotData},{"../SpineUtil":42}],39:[function(f,i,g){var h=f("../SpineUtil");h.TrackEntry=function(){};h.TrackEntry.prototype={next:null,previous:null,animation:null,loop:false,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null};i.exports=h.TrackEntry},{"../SpineUtil":42}],40:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.Curves=f("./Curves");h.TranslateTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a*3};h.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,c,d,b){a*=3;this.frames[a]=c;this.frames[a+1]=d;this.frames[a+2]=b},apply:function(t,y,u,a,s){var c=this.frames;if(u<c[0]){return}var b=t.bones[this.boneIndex];if(u>=c[c.length-3]){b.x+=(b.data.x+c[c.length-2]-b.x)*s;b.y+=(b.data.y+c[c.length-1]-b.y)*s;return}var v=h.Animation.binarySearch(c,u,3);var w=c[v-2];var x=c[v-1];var d=c[v];var r=1-(u-d)/(c[v+-3]-d);r=this.curves.getCurvePercent(v/3-1,r);b.x+=(b.data.x+w+(c[v+1]-w)*r-b.x)*s;b.y+=(b.data.y+x+(c[v+2]-x)*r-b.y)*s}};i.exports=h.TranslateTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],41:[function(f,i,g){var h=f("../SpineUtil");h.Animation=f("./Animation");h.AnimationStateData=f("./AnimationStateData");h.AnimationState=f("./AnimationState");h.AtlasAttachmentParser=f("./AtlasAttachmentParser");h.Atlas=f("./Atlas");h.AtlasPage=f("./AtlasPage");h.AtlasReader=f("./AtlasReader");h.AtlasRegion=f("./AtlasRegion");h.AttachmentTimeline=f("./AttachmentTimeline");h.AttachmentType=f("./AttachmentType");h.BoneData=f("./BoneData");h.Bone=f("./Bone");h.BoundingBoxAttachment=f("./BoundingBoxAttachment");h.ColorTimeline=f("./ColorTimeline");h.Curves=f("./Curves");h.DrawOrderTimeline=f("./DrawOrderTimeline");h.EventData=f("./EventData");h.Event=f("./Event");h.EventTimeline=f("./EventTimeline");h.FfdTimeline=f("./FfdTimeline");h.FlipXTimeline=f("./FlipXTimeline");h.FlipYTimeline=f("./FlipYTimeline");h.IkConstraintData=f("./IkConstraintData");h.IkConstraint=f("./IkConstraint");h.IkConstraintTimeline=f("./IkConstraintTimeline");h.MeshAttachment=f("./MeshAttachment");h.RegionAttachment=f("./RegionAttachment");h.RotateTimeline=f("./RotateTimeline");h.ScaleTimeline=f("./ScaleTimeline");h.SkeletonBounds=f("./SkeletonBounds");h.SkeletonData=f("./SkeletonData");h.Skeleton=f("./Skeleton");h.SkeletonJsonParser=f("./SkeletonJsonParser");h.Skin=f("./Skin.js");h.SkinnedMeshAttachment=f("./SkinnedMeshAttachment");h.SlotData=f("./SlotData");h.Slot=f("./Slot");h.TrackEntry=f("./TrackEntry");h.TranslateTimeline=f("./TranslateTimeline");i.exports=h},{"../SpineUtil":42,"./Animation":2,"./AnimationState":3,"./AnimationStateData":4,"./Atlas":5,"./AtlasAttachmentParser":6,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9,"./AttachmentTimeline":10,"./AttachmentType":11,"./Bone":12,"./BoneData":13,"./BoundingBoxAttachment":14,"./ColorTimeline":15,"./Curves":16,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./FlipXTimeline":22,"./FlipYTimeline":23,"./IkConstraint":24,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./MeshAttachment":27,"./RegionAttachment":28,"./RotateTimeline":29,"./ScaleTimeline":30,"./Skeleton":31,"./SkeletonBounds":32,"./SkeletonData":33,"./SkeletonJsonParser":34,"./Skin.js":35,"./SkinnedMeshAttachment":36,"./Slot":37,"./SlotData":38,"./TrackEntry":39,"./TranslateTimeline":40}],42:[function(d,g,f){g.exports={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:(typeof(Float32Array)==="undefined")?Array:Float32Array,Uint16Array:(typeof(Uint16Array)==="undefined")?Array:Uint16Array}},{}],43:[function(l,k,h){var j=l("../SpineRuntime");var i=l("../loaders/atlasParser");j.Bone.yDown=true;function m(f){PIXI.Container.call(this);if(!f){throw new Error("The spineData param is required.")}if((typeof f)==="string"){throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.')}this.spineData=f;this.skeleton=new j.Skeleton(f);this.skeleton.updateWorldTransform();this.stateData=new j.AnimationStateData(f);this.state=new j.AnimationState(this.stateData);this.slotContainers=[];for(var n=0,t=this.skeleton.slots.length;n<t;n++){var c=this.skeleton.slots[n];var g=c.attachment;var d=new PIXI.Container();this.slotContainers.push(d);this.addChild(d);if(g instanceof j.RegionAttachment){var s=g.rendererObject.name;var b=this.createSprite(c,g);c.currentSprite=b;c.currentSpriteName=s;d.addChild(b)}else{if(g instanceof j.MeshAttachment){var a=this.createMesh(c,g);c.currentMesh=a;c.currentMeshName=g.name;d.addChild(a)}else{continue}}}this.autoUpdate=true}m.fromAtlas=function(a){var b=i.AnimCache[a];if(!b){throw new Error('Spine data "'+a+'" does not exist in the animation cache')}return new m(b)};m.prototype=Object.create(PIXI.Container.prototype);m.prototype.constructor=m;k.exports=m;Object.defineProperties(m.prototype,{autoUpdate:{get:function(){return(this.updateTransform===m.prototype.autoUpdateTransform)},set:function(a){this.updateTransform=a?m.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform}}});m.prototype.update=function(x){this.state.update(x);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();var y=this.skeleton.drawOrder;var b=this.skeleton.slots;for(var f=0,n=y.length;f<n;f++){this.children[f]=this.slotContainers[y[f]]}for(f=0,n=b.length;f<n;f++){var C=b[f];var d=C.attachment;var c=this.slotContainers[f];if(!d){c.visible=false;continue}var a=d.type;if(a===j.AttachmentType.region){if(d.rendererObject){if(!C.currentSpriteName||C.currentSpriteName!==d.rendererObject.name){var g=d.rendererObject.name;if(C.currentSprite!==undefined){C.currentSprite.visible=false}C.sprites=C.sprites||{};if(C.sprites[g]!==undefined){C.sprites[g].visible=true}else{var B=this.createSprite(C,d);c.addChild(B)}C.currentSprite=C.sprites[g];C.currentSpriteName=g}}var A=C.bone;c.position.x=A.worldX+d.x*A.m00+d.y*A.m01;c.position.y=A.worldY+d.x*A.m10+d.y*A.m11;c.scale.x=A.worldScaleX;c.scale.y=A.worldScaleY;c.rotation=-(C.bone.worldRotation*j.degRad);if(A.worldFlipX){c.scale.x=-c.scale.x;c.rotation=-c.rotation}if(A.worldFlipY==j.Bone.yDown){c.scale.y=-c.scale.y;c.rotation=-c.rotation}C.currentSprite.blendMode=C.blendMode;C.currentSprite.tint=PIXI.utils.rgb2hex([C.r,C.g,C.b])}else{if(a===j.AttachmentType.skinnedmesh||a===j.AttachmentType.mesh){if(!C.currentMeshName||C.currentMeshName!==d.name){var D=d.name;if(C.currentMesh!==undefined){C.currentMesh.visible=false}C.meshes=C.meshes||{};if(C.meshes[D]!==undefined){C.meshes[D].visible=true}else{var z=this.createMesh(C,d);c.addChild(z)}C.currentMesh=C.meshes[D];C.currentMeshName=D}d.computeWorldVertices(C.bone.skeleton.x,C.bone.skeleton.y,C,C.currentMesh.vertices)}else{c.visible=false;continue}}c.visible=true;c.alpha=C.a}};m.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=(Date.now()-this.lastTime)*0.001;this.lastTime=Date.now();this.update(a);PIXI.Container.prototype.updateTransform.call(this)};m.prototype.createSprite=function(p,a){var b=a.rendererObject;var d=b.page.rendererObject;var c=new PIXI.Rectangle(b.x,b.y,b.rotate?b.height:b.width,b.rotate?b.width:b.height);var g=new PIXI.Texture(d,c);var f=new PIXI.Sprite(g);var q=b.rotate?Math.PI*0.5:0;f.scale.x=a.width/b.originalWidth*a.scaleX;f.scale.y=a.height/b.originalHeight*a.scaleY;f.rotation=q-(a.rotation*j.degRad);f.anchor.x=(0.5*b.originalWidth-b.offsetX)/b.width;f.anchor.y=(0.5*b.originalHeight-b.offsetY)/b.height;f.alpha=a.a;p.sprites=p.sprites||{};p.sprites[b.name]=f;return f};m.prototype.createMesh=function(a,b){var c=b.rendererObject;var d=c.page.rendererObject;var f=new PIXI.Texture(d);var g=new PIXI.mesh.Mesh(f,new Float32Array(b.uvs.length),new Float32Array(b.uvs),new Uint16Array(b.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);g.canvasPadding=1.5;g.alpha=b.a;a.meshes=a.meshes||{};a.meshes[b.name]=g;return g}},{"../SpineRuntime":41,"../loaders/atlasParser":45}],44:[function(i,h,f){var g=i("./atlasParser");PIXI.loaders.Loader.addPixiMiddleware(g);PIXI.loader.use(g())},{"./atlasParser":45}],45:[function(o,n,i){var k=PIXI.loaders.Resource,m=PIXI.utils.async,l=o("../SpineRuntime");var j=n.exports=function(){return function(a,c){if(!a.data||!a.isJson||!a.data.bones){return c()}var f=a.url.substr(0,a.url.lastIndexOf("."))+".atlas";var d={crossOrigin:a.crossOrigin,xhrType:k.XHR_RESPONSE_TYPE.TEXT};var b=a.url.substr(0,a.url.lastIndexOf("/")+1);this.add(a.name+"_atlas",f,d,function(h){var g=new l.Atlas(this.xhr.responseText,b,h.crossOrigin);var r=new l.SkeletonJsonParser(new l.AtlasAttachmentParser(g));var s=r.readSkeletonData(a.data);a.spineData=s;a.spineAtlas=g;if(j.enableCaching){j.AnimCache[a.name]=a.spineData}m.each(g.pages,function(p,q){if(p.rendererObject.hasLoaded){q()}else{p.rendererObject.once("loaded",q)}},c)})}};j.AnimCache={};j.enableCaching=true},{"../SpineRuntime":41}],46:[function(d,g,f){g.exports={atlasParser:d("./atlasParser"),Loader:d("./Loader")}},{"./Loader":44,"./atlasParser":45}]},{},[1]);Object.defineProperties(PIXI.Text.prototype,{style:{get:function(){return this._style},set:function(b){b=b||{};if(typeof b.fill==="number"){b.fill=utils.hex2string(b.fill)}if(typeof b.stroke==="number"){b.stroke=utils.hex2string(b.stroke)}if(typeof b.dropShadowColor==="number"){b.dropShadowColor=utils.hex2string(b.dropShadowColor)}b.font=b.font||"bold 20pt Arial";b.fill=b.fill||"black";b.align=b.align||"left";b.stroke=b.stroke||"black";b.strokeThickness=b.strokeThickness||0;b.wordWrap=b.wordWrap||false;b.wordWrapWidth=b.wordWrapWidth||100;b.dropShadow=b.dropShadow||false;b.dropShadowColor=b.dropShadowColor||"#000000";b.dropShadowAngle=b.dropShadowAngle||Math.PI/6;b.dropShadowDistance=b.dropShadowDistance||5;b.padding=b.padding||0;b.textBaseline=b.textBaseline||"alphabetic";b.lineJoin=b.lineJoin||"miter";b.miterLimit=b.miterLimit||10;b.shadowBlur=b.shadowBlur||0;b.shadowOffsetX=b.shadowOffsetX||0;b.shadowOffsetY=b.shadowOffsetY||0;this._style=b;this.dirty=true}}});PIXI.Text.prototype.updateText=function(){var D=this._style;this.context.font=D.font;var x=D.wordWrap?this.wordWrap(this._text):this._text;var r=x.split(/(?:\r\n|\r|\n)/);var y=new Array(r.length);var i=0;var A=this.determineFontProperties(D.font);for(var w=0;w<r.length;w++){var v=this.context.measureText(r[w]).width;y[w]=v;i=Math.max(i,v)}var B=i+D.strokeThickness;if(D.dropShadow){B+=D.dropShadowDistance}this.canvas.width=(B+this.context.lineWidth)*this.resolution;var t=this.style.lineHeight||A.fontSize+D.strokeThickness;var s=t*r.length;if(D.dropShadow){s+=D.dropShadowDistance}this.canvas.height=(s+this._style.padding*2)*this.resolution;this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=D.font;this.context.strokeStyle=D.stroke;this.context.lineWidth=D.strokeThickness;this.context.textBaseline=D.textBaseline;this.context.lineJoin=D.lineJoin;this.context.miterLimit=D.miterLimit;if(D.shadowBlur>0){this.context.shadowBlur=D.shadowBlur;this.context.shadowColor=D.dropShadowColor;this.context.shadowOffsetX=D.shadowOffsetX;this.context.shadowOffsetY=D.shadowOffsetY}var z;var C;if(D.dropShadow){this.context.fillStyle=D.dropShadowColor;var u=Math.cos(D.dropShadowAngle)*D.dropShadowDistance;var E=Math.sin(D.dropShadowAngle)*D.dropShadowDistance;for(w=0;w<r.length;w++){z=D.strokeThickness/2;C=(D.strokeThickness/2+w*t)+A.ascent;if(D.align==="right"){z+=i-y[w]}else{if(D.align==="center"){z+=(i-y[w])/2}}if(D.fill){this.context.fillText(r[w],z+u,C+E+this._style.padding)}}}this.context.fillStyle=D.fill;for(w=0;w<r.length;w++){z=D.strokeThickness/2;C=(D.strokeThickness/2+w*t)+A.ascent;if(D.align==="right"){z+=i-y[w]}else{if(D.align==="center"){z+=(i-y[w])/2}}if(D.stroke&&D.strokeThickness){this.context.strokeText(r[w],z,C+this._style.padding)}if(D.fill){this.context.fillText(r[w],z,C+this._style.padding)}}this.updateTexture()};PIXI.RETINA_PREFIX=/@(.+?)x/g;PIXI.utils.getResolutionOfUrl=function(g){var d=PIXI.RETINA_PREFIX.exec(g),f=1;while(d!==null){f=parseFloat(d[1]);d=PIXI.RETINA_PREFIX.exec(g)}return f};PIXI.VideoBaseTexture.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};PIXI.spine.Spine.prototype.createSprite=function(l,n){var o=n.rendererObject;var q=o.page.rendererObject;var p=new PIXI.Rectangle(o.x,o.y,o.rotate?o.height:o.width,o.rotate?o.width:o.height);var k=new PIXI.Texture(q,p);PIXI.Texture.addTextureToCache(k,n.name);var j=new PIXI.Sprite(k);var m=o.rotate?Math.PI*0.5:0;j.scale.x=n.width/o.originalWidth*n.scaleX;j.scale.y=n.height/o.originalHeight*n.scaleY;j.rotation=m-(n.rotation*(Math.PI/180));j.anchor.x=j.anchor.y=0.5;j.x=(o.offsetX-(o.originalWidth-o.width)*0.5)*j.scale.x;j.y=-(o.offsetY-(o.originalHeight-o.height)*0.5)*j.scale.y;j.alpha=n.a;l.sprites=l.sprites||{};l.sprites[o.name]=j;return j};PIXI.interaction.InteractionManager.prototype.addEvents=function(){if(!this.interactionDOMElement){return}PIXI.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);window.document.addEventListener("mousedown",this.onMouseDown,true);window.document.addEventListener("mouseout",this.onMouseOut,true);window.addEventListener("mouseup",this.onMouseUp,true);window.addEventListener("touchstart",this.onTouchStart,true);window.addEventListener("touchend",this.onTouchEnd,true);window.addEventListener("touchmove",this.onTouchMove,true);if(window.navigator.pointerEnabled){window.document.addEventListener("pointerdown",this.onTouchStart,true);window.document.addEventListener("pointermove",this.onTouchMove,true);window.document.addEventListener("pointerup",this.onTouchEnd,true)}else{if(window.navigator.msPointerEnabled){window.document.addEventListener("MSPointerDown",this.onTouchStart,true);window.document.addEventListener("MSPointerMove",this.onTouchMove,true);window.document.addEventListener("MSPointerUp",this.onTouchEnd,true)}}this.eventsAdded=true};PIXI.interaction.InteractionManager.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}PIXI.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);window.document.removeEventListener("mousedown",this.onMouseDown,true);window.document.removeEventListener("mouseout",this.onMouseOut,true);window.removeEventListener("mouseup",this.onMouseUp,true);window.removeEventListener("touchstart",this.onTouchStart,true);window.removeEventListener("touchend",this.onTouchEnd,true);window.removeEventListener("touchmove",this.onTouchMove,true);if(window.navigator.pointerEnabled){window.document.removeEventListener("pointerdown",this.onTouchStart,true);window.document.removeEventListener("pointermove",this.onTouchMove,true);window.document.removeEventListener("pointerup",this.onTouchEnd,true)}else{if(window.navigator.msPointerEnabled){window.document.removeEventListener("MSPointerDown",this.onTouchStart,true);window.document.removeEventListener("MSPointerMove",this.onTouchMove,true);window.document.removeEventListener("MSPointerUp",this.onTouchEnd,true)}}this.interactionDOMElement=null;this.eventsAdded=false};PIXI.interaction.InteractionManager.prototype.onTouchStart=function(k){if(this.autoPreventDefault){k.preventDefault()}var l=(typeof k.changedTouches!=="undefined")?k.changedTouches:[k];var j=l.length;for(var m=0;m<j;m++){var i=l[m];var h=this.getTouchData(i);h.originalEvent=k;this.eventData.data=h;this.eventData.stopped=false;this.processInteractive(h.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.returnTouchData(h)}};PIXI.interaction.InteractionManager.prototype.onTouchMove=function(k){if(this.autoPreventDefault){k.preventDefault()}var l=(typeof k.changedTouches!=="undefined")?k.changedTouches:[k];var j=l.length;for(var m=0;m<j;m++){var i=l[m];var h=this.getTouchData(i);h.originalEvent=k;this.eventData.data=h;this.eventData.stopped=false;this.processInteractive(h.global,this.renderer._lastObjectRendered,this.processTouchMove,true);this.returnTouchData(h)}};PIXI.interaction.InteractionManager.prototype.onTouchEnd=function(k){if(this.autoPreventDefault){k.preventDefault()}var l=(typeof k.changedTouches!=="undefined")?k.changedTouches:[k];var j=l.length;for(var m=0;m<j;m++){var i=l[m];var h=this.getTouchData(i);h.originalEvent=k;this.eventData.data=h;this.eventData.stopped=false;this.processInteractive(h.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.returnTouchData(h)}};Sys.ns("Integration");Integration.OpenBetResourceHandlerOverride={INTEGRATION:"openbet",determineSessionID:function(){return this.performServletCall(Resources.readData("queryData").callbackurl,"openbet")},handleServletResponse:function(h){var k=this,j={},m=Sys.utils.qsToObj(h.responseText,false),i=Resources.readData("queryData"),l=m.pluginURL;j["openbet.rgitoken"]=m.rgitoken;j["openbet.user_id"]=i["openbet.user_id"];j["openbet.game_code"]=i["openbet.game_code"];j["openbet.channel"]=k.getOpenBetChannel();j["openbet.user_type"]=i["openbet.user_type"];j["openbet.affiliate"]=Sys.isDefined(i["openbet.affiliate"])?i["openbet.affiliate"]:"";j["openbet.rgs_site"]="NetEnt site";j["openbet.promotions"]="NO";Sys.applyIf(Resources.readData("extraParams"),j);k.storeSessionID("NULL");if(Sys.isDefined(l)){Resources.storeData("pluginURL",decodeURIComponent(l))}else{k.determinePluginURL()}},getOpenBetChannel:function(){return Resources.readData("queryData")["openbet.channel"]},_gameServerInitComplete:Loader.ResourceHandler.prototype.gameServerInitComplete,gameServerInitComplete:function(d){var c=Sys.utils.parseQueryStringToNestedObject(d.responseText);Resources.storeData("gameServerInitResponse",Sys.utils.qsToObj(d.responseText));Resources.storeData("gameServerInitResponseObject",c);this.storeSessionID(c.openbet.sessionid);Resources.storeData("unParsedGameServerInitResponse",d.responseText);Resources.storeData("historyUrl",this.buildHistoryUrl())}};Integration.OpenBetLanguageManagerOverride={_getText:Core.LanguageManager.prototype.getText,getText:function(h,f){var i=this,g="OB"+h;if(i.hasText(g)){return i._getText(g,f)}return i._getText(h,f)}};Integration.applyOpenBetOverrides=function(){Sys.override(Loader.ResourceHandler,Integration.OpenBetResourceHandlerOverride);Integration.applyOpenBetLanguageOverrides()};Integration.applyOpenBetLanguageOverrides=function(){if(Platform.isDesktopDevice){Sys.override(Core.LanguageManager,Integration.OpenBetLanguageManagerOverride)}};if(Sys.openBetMode){Integration.applyOpenBetOverrides()}else{if(Sys.openBetPlayForFunMode){Integration.applyOpenBetLanguageOverrides()}}Sys.ns("Integration.GCM");Integration.GCM.availableOptions=["MUTE","TURBO"];Integration.GCM.Proxy={MODULE_NAME:"GCMProxy",gcmCoreInstance:undefined,exclusivityEnable:false,inIdleState:false,multiChoiceGameDialogsQueue:[],freeBetBalance:0,latestWin:0,basicGamePanelEnabled:true,constructor:function(){var d=this,g,f;Integration.GCM.Proxy.superclass.constructor.call(d);Sys.override(Loader.ResourceHandler,{getOpenBetChannel:d.getGcmChannel.bind(d)});Sys.override(Environment,{goToLobby:d.goToLobby.bind(d)});this.exposedInterface={gameRevealed:this.gameRevealed.bind(d),gcmReady:this.gcmReady.bind(d),optionHasChanged:this.optionHasChanged.bind(d),balancesHasChanged:this.balancesHasChanged.bind(d),toggleMute:this.toggleMute.bind(d),configReady:this.configReady.bind(d),resume:this.resume.bind(d),updateLoadingBar:this.simulateLoading.bind(d)};g=com.openbet.gcmBridge;g.init(document.body,window.location.href,this.exposedInterface);f=this.getIframe();if(f!==null&&Sys.isDefined(f)){f.style.zIndex=10}d.on({"notify:resourceHandler.gameAssetsLoaded":d.onGameLoadedSuccessfully,"request:gcmProxy.updateProgress":d.simulateLoading,"notify:stateHandler.leavingBeforeLoaderCloseState":d.onGameResourcesLoaded,"notify:resourceHandler.animationComplete":d.onLoadAnimationClosed,"notify:loader.closed":d.onLoadAnimationClosed,"notify:stateHandler.enteringSpinningState":d.onSpinStart,"notify:stateHandler.enteringIdleState":d.onEnteringIdleState,"notify:stateHandler.leavingIdleState":d.onLeavingIdleState,"notify:settingsManager.settingChanged":d.onSettingChanged,"notify:responseParser.responseParsed":d.processServerResponse,"notify:moneyManager.betChanged":d.updateBetInUI,"notify:moneyManager.balanceReloaded":d.updateBalanceInUI,"request:disableBasicGamePanel":d.disableBasicGamePanel,"request:enableBasicGamePanel":d.enableBasicGamePanel,"request:gcmProxy.handleError":d.handleError,"request:cashField.showWin":d.onShowWin})},goToLobby:function(){var b=this;b.handleError({category:"CRITICAL",severity:"ERROR",errorCode:"CRITICAL_ERROR",message:Services.languageManager.getText(Language.Keys.btn_casino),extraParameters:{originalError:"criticalError",originalTitle:Services.languageManager.getText(Language.Keys.btn_casino),reason:3,suppressMessage:true}})},getIframe:function(){return document.querySelector("iframe[name='commonUIIFrame']")},getGcmChannel:function(){return this.gcmCoreInstance.getConfig().channel},onGameLoadedSuccessfully:function(){this.setupAccount();setViewportHidden(false)},setupAccount:function(){var i=Resources.readData("gameServerInitResponse"),l=i.playercurrencyiso,m=Sys.utils.XMLHelper.getMoneyFormatFromXML(Resources.readData("moneyformat_player"),l),n={ccy_code:l,ccy_decimal_separator:m.decimalDivider,ccy_thousand_separator:m.thousandsDivider},j=Number(i.credit),k=Sys.isDefined(i["openbet.freebets"])?Number(i["openbet.freebets"]):0,o={CASH:{amount:j},FREEBET:{amount:k}};this.gcmCoreInstance.accountInit(n,o);this.gcmCoreInstance.stakeUpdate(0);this.gcmCoreInstance.paidUpdate(0)},onGameResourcesLoaded:function(){this.gameResourcesLoaded=true;this.tryToFinishGCMInitialization()},onLoadAnimationClosed:function(){this.loadAnimationClosed=true;this.tryToFinishGCMInitialization()},tryToFinishGCMInitialization:function(){var b=this;if(b.gameResourcesLoaded&&b.loadAnimationClosed){b.updateBalanceInUI();b.updateBetInUI();b.updatePayoutInUI();b.registerAvailableOptions();b.gcmCoreInstance.gameReady();b.fireEvent("request:scaling.update")}},registerAvailableOptions:function(){var d=this,c=d.gcmCoreInstance;Sys.each(Integration.GCM.availableOptions,function(a){c.regOption(a)});d.hasRegisteredOptions=true;d.updateTurboSettingInUI();d.updateAudioSettingInUI()},onSpinStart:function(){this.hideCommonUI()},hideCommonUI:function(){this.gcmCoreInstance.gameAnimationStart()},processServerResponse:function(g){var d=this,f=g.openbet;d.freeBetBalance=(Sys.isDefined(f)&&Sys.isDefined(f.freebets))?Number(f.freebets):d.freeBetBalance;d.latestWin=Sys.isDefined(g.wins)?g.wins.centsTotal:0},onShowWin:function(){this.updateBalanceInUI();this.updatePayoutInUI()},onEnteringIdleState:function(){var b=this;b.inIdleState=true;b.showCommonUI()},showCommonUI:function(){this.gcmCoreInstance.gameAnimationComplete(this.enableUI)},enableUI:function(){},updateBalanceInUI:function(){var b=this.getBalances();this.gcmCoreInstance.balancesUpdate(b)},getBalances:function(){var d=Services.moneyManager.getBalanceCents()/100,c=this.freeBetBalance/100;return{CASH:{amount:d-c},FREEBET:{amount:c}}},updatePayoutInUI:function(){this.gcmCoreInstance.paidUpdate(this.latestWin/100)},onLeavingIdleState:function(){this.inIdleState=false;this.gcmCoreInstance.paidUpdate(0);this.updateBalanceInUI()},onSettingChanged:function(b){if(b==="betLevel"||b==="denomination"||b==="betLines"){this.updateBetInUI()}else{if(b==="quickSpin"){this.updateTurboSettingInUI()}else{if(b==="volume"){this.updateAudioSettingInUI()}}}},updateBetInUI:function(){var b=Services.moneyManager.getBetCents()/100;if(Sys.isNumber(b)){this.gcmCoreInstance.stakeUpdate(b)}},updateTurboSettingInUI:function(){var d=this,c=Services.settingsManager.getSetting("quickSpin")===true;if(d.hasRegisteredOptions&&Integration.GCM.availableOptions.contains("TURBO")){d.gcmCoreInstance.optionHasChanged("TURBO","GAME",c)}},updateAudioSettingInUI:function(){var c=this,d=Services.settingsManager.getSetting("volume")===0;if(c.hasRegisteredOptions&&Integration.GCM.availableOptions.contains("MUTE")){c.exposedInterface.toggleMute(d)}},handleError:function(k){var g=this;g.disableUI();var h=true;if(k.RGIError){var i=com.openbet.gcm.xmlutil,j=i.getErrorInfoFromRGIXml(decodeURIComponent(k.RGIXML));g.shouldRevertRound=j.errorAction==="VOID_TXN";g.gcmCoreInstance.handleServerError(j)}else{k=Sys.applyIf(k,{category:"NON_RECOVERABLE_ERROR",severity:"ERROR",message:"An error occurred",errorCode:"CLIENTERROR"});if(k.category==="MULTI_CHOICE_DIALOG"){if(Sys.isDefined(g.actionsOfCurrentDialog)){h=false;g.multiChoiceGameDialogsQueue.push(k)}else{g.actionsOfCurrentDialog=k.actions;if(!g.exclusivityEnable){g.fireEvent("request:userInputManager.activateExclusivity",g.MODULE_NAME);g.fireEvent("request:quickSettingsMenu.externalDeactivate",g.MODULE_NAME);g.fireEvent("request:spinButton.hide",g.MODULE_NAME);g.exclusivityEnable=true}}}if(h){g.shouldRevertRound=k.revert===true;g.gcmCoreInstance.handleError(k.category,k.severity,k.errorCode,k.message,k.extraParameters)}}},disableUI:function(){},gcmReady:function(b){this.gcmCoreInstance=b;this.simulateLoading(0)},configReady:function(){var d=this,c=!d.isDemoMode();if((c&&Sys.openBetMode)||(!c&&!Sys.openBetMode)){initializeGame({loaderProgressCallBack:d.simulateLoading.bind(d)})}else{if(c&&!Sys.openBetMode){d.handleError({category:"LOGIN_ERROR",severity:"ERROR",message:"ACCOUNT_UNAVAILABLE",errorCode:"ACCOUNT_UNAVAILABLE",extraParameters:{originalError:70,originalTitle:"MGaccountUnavailable"}})}else{Environment.goToLobby()}}},isDemoMode:function(){return this.gcmCoreInstance.getConfig().playMode==="demo"},simulateLoading:function(b){b=Sys.utils.toInt(b);if(b<100){this.gcmCoreInstance.loadProgressUpdate(b)}else{this.gcmCoreInstance.loadProgressUpdate(99);this.hideCommonUI();this.fireEvent("notify:gcmProxy.animationComplete")}},gameRevealed:function(){this.configureGameForGcm()},configureGameForGcm:function(){this.fireEvent("request:homeButton.hidePermanently")},optionHasChanged:function(d,g){var f=this;switch(d){case"MUTE":f.toggleSound(g);break;case"TURBO":f.toggleQuickSpin(g);break;case"GAME_PREFERENCES":if(Platform.isDesktopDevice){f.toggleSettingsWindowDesktop("gameSettings")}else{f.toggleSettingsWindow(g,"betSettings")}break;case"PAYTABLE":f.toggleSettingsWindow(g,"paytable");break;case"ABOUT":if(f.inIdleState){f.toggleSettingsWindow(g,"gameRules")}break;default:}},disableBasicGamePanel:function(){this.basicGamePanelEnabled=false},enableBasicGamePanel:function(){this.basicGamePanelEnabled=true},toggleSettingsWindowDesktop:function(b){this.fireEvent("request:"+b+".toggle")},toggleSettingsWindow:function(d,c){if(!this.basicGamePanelEnabled){return}if(d){this.fireEvent("request:"+c+".show")}else{this.fireEvent("request:settingsWindow.close")}},toggleSound:function(b){Services.settingsManager.storeSetting("volume",b?0:1)},toggleQuickSpin:function(c){var d;this.fireEvent("request:settingsManager.storeData","quickSpin",c);d=Services.settingsManager.getSetting("quickSpin");if(d!==c){this.gcmCoreInstance.optionHasChanged("TURBO","GAME",d)}},balancesHasChanged:function(d){if(this.inIdleState){var f=parseInt(Math.round(d.CASH.amount*100),10),g=parseInt(Math.round(d.FREEBET.amount*100),10);Services.moneyManager.setBalance(f+g);this.freeBetBalance=g}else{Sys.utils.reload()}},toggleMute:function(b){this.gcmCoreInstance.optionHasChanged("MUTE","GAME",b)},resume:function(g){var d=this;try{if(Sys.isArray(d.actionsOfCurrentDialog)&&Sys.isDefined(d.actionsOfCurrentDialog[g])){d.actionsOfCurrentDialog[g]()}else{if(d.shouldRevertRound){d.fireEvent("request:moneyManager.revertBet");d.fireEvent("request:spin.activateDefaultOutcome","basic");d.updateBalanceInUI()}}}finally{d.actionsOfCurrentDialog=undefined}if(d.multiChoiceGameDialogsQueue.length>0){var f=d.multiChoiceGameDialogsQueue.shift();d.handleError(f)}else{d.exclusivityEnable=false;d.fireEvent("request:userInputManager.deactivateExclusivity",d.MODULE_NAME);d.fireEvent("request:quickSettingsMenu.externalActivate",d.MODULE_NAME);d.fireEvent("request:spinButton.show",d.MODULE_NAME)}}};Integration.GCM.Proxy=Sys.extend(Sys.Observable,Integration.GCM.Proxy,"Integration.GCM.Proxy");function setViewportHidden(d){var g=document.getElementById("viewport");if(g!==null&&Sys.isDefined(g)){var f=1;if(d){f=0.01}g.style.opacity=f}}if(Sys.isGcmEnabled){setViewportHidden(true);Sys.utils.addCSSClassToBody("gcmMode");Sys.utils.loadJS({url:"../../../gcm/js/gcmBridge.js"}).then(function(){new Integration.GCM.Proxy()})}Sys.ns("Integration.GCM");Integration.ErrorHandler={handleRequestError:function(i){var h=this,g=Sys.utils.getResponseParameter("openbet.error.xml",i),f;if(!Sys.utils.httpRequestIsOK(i)){f="http"}else{if(Sys.isDefined(g)){this.fireEvent("request:gcmProxy.handleError",{RGIError:true,RGIXML:g.replace(/\+/g," ")})}else{f="server"}}if(!Sys.isDefined(f)||f===h.readStatus()){return}h[h.errorStatus[f]]();h.setStatus(f)}};Integration.GCM.ResourceHandler={slownessDetected:function(){}};Integration.GCM.DeviceDetector={handleIntegrationSpecificDialogs:function(i){var h=i.severity==="stopped",f={category:"MULTI_CHOICE_DIALOG",severity:h?"ERROR":"INFO",message:i.texts.join("\n"),errorCode:"ERROR",actions:[],extraParameters:{}},g=[];Sys.each(i.buttons,function(a){g.push(a.label);f.actions.push(a.action)});f.extraParameters.options=g;this.fireEvent("request:gcmProxy.handleError",f)}};(function(){if(Sys.isGcmEnabled){Sys.override(Loader.ErrorHandler,Integration.GCM.ErrorHandler);Sys.override(Loader.ResourceHandler,Integration.GCM.ResourceHandler);if(Sys.isDefined(Loader.DeviceDetector)){Sys.override(Loader.DeviceDetector,Integration.GCM.DeviceDetector)}}}());